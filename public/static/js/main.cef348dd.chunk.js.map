{"version":3,"sources":["component/RoomDaily/Room.module.scss","App.module.scss","layout/Header/Header.module.scss","component/RoomDaily/History/History.module.scss","component/RoomDaily/ListRoomDetail/ListRoomDetail.module.scss","component/RoomDaily/AddRoom/AddRoom.module.scss","component/Telegram/Telegram.module.scss","component/RoomMonth/Room.module.scss","component/RoomMonth/AddRoomMonth/AddRoomMonth.module.scss","component/RoomMonth/AdjustRoom/AdjustRoom.module.scss","component/RoomMonth/PaymentInfo/PaymentInfo.module.scss","component/RoomMonth/PaymentInfo/TotalPaymentInfo.module.scss","component/WaterManager/ListWater.module.scss","component/WaterManager/Inventory.module.scss","component/Modal/modal.module.scss","api/index.js","component/dateUtils.js","component/RoomDaily/History/HistoryRoom.js","component/Modal/ModalContext.js","component/RoomDaily/AddRoom/AddRoom.js","component/Telegram/Telegram.js","component/RoomDaily/ListRoomDetail/ListRoomDetail.js","component/RoomMonth/AddRoomMonth/AddRoomMonth.js","component/RoomMonth/AdjustRoom/AdjustRoom.js","component/RoomMonth/PaymentInfo/TotalPaymentInfo.js","component/RoomMonth/PaymentInfo/PaymentInfo.js","component/RoomMonth/Room.js","component/WaterManager/Inventory.js","component/WaterManager/ListWater.js","layout/Header/index.js","component/debounce.js","component/RoomDaily/Room.js","component/RoomDaily/RoomList.js","component/Modal/GlobalModal.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","api","axios","create","baseURL","timeout","handleRequest","async","promise","errorMessage","data","error","_error$response","_error$response$data","message","response","Error","editRoom","room","adjust","post","roomNumber","newDetails","fetchRoomsList","get","localStorage","setItem","JSON","stringify","fetchHistory","type","url","GetUpdateRoom","id","object","put","convertToISODate","dateStr","test","day","month","year","split","formatDateValue","datetime","date","formatTimeValue","time","substring","cx","classNames","bind","styles","HistoryRoom","history","setHistory","useState","currentPage","setCurrentPage","useEffect","getHistory","sortedHistory","sort","a","b","Date","checkOutDate","checkInDate","loadHistory","console","log","indexOfLastItem","indexOfFirstItem","currentItems","slice","totalPages","Math","ceil","length","flatpickr","enableTime","noCalendar","dateFormat","time_24hr","minuteIncrement","maxDate","_jsxs","children","_jsx","className","map","item","index","totalAmount","dangerouslySetInnerHTML","__html","description","onClick","idToDelete","status","updatedHistory","filter","_id","handleDeleteItem","colSpan","style","textAlign","padding","fontStyle","prevPage","disabled","nextPage","ModalContext","createContext","ModalProvider","_ref","showModal","setShowModal","modalContent","setModalContent","Provider","value","openModal","content","closeModal","useModal","useContext","AddRoom","setData","dailyprice","firstHour","extraHour","setMessage","handleAddRoom","daily","onChange","e","prev","target","required","Form2","_Fragment","src","alt","Form1","Telegram","props","ListRoomDetail","ListRoom","setListroom","sortedRooms","String","padStart","toLocaleString","roomID","deleted","window","location","reload","handleEditRoom","AddRoomMonth","deposit","setDeposit","hovaten","SoPhong","GiaPhong","sinhhoatchung","chisodiencu","chisodienmoi","chisonuoclanhcu","chisonuoclanhmoi","chisonuocnongcu","chisonuocnongmoi","ghichu","setTimeout","forEach","key","formattedValue","rawValue","replace","parseInt","handleDeposit","AdjustRoomMonth","handleUpdateRoom","TotalPaymentInfo","onlyPrice","setOnlyPrice","totalRoom","totalElectric","totalWater","totalElectricUsed","totalWaterUsed","roomCount","filteredRooms","electricUsed","waterUsed","hasElectric","hasWater","push","join","Room","PayMentInfo","Total","only","confirm","alert","prompt","position","HandleRefresh","handleBack","dientieuthu","nuoctieuthu","coastNuoc","coastDien","total","setListRoom","getListRoom","HandleAdjustRoom","input","includes","parts","parseFloat","isNaN","handleDeleteRoom","deleteRoomV2","list","handleOpenAjust","FaEdit","FaTrash","Inventory","waterList","setWaterList","getWaterList","resetWt","TestInventory2","ListWater","tenNuoc","soLuongDau","ban","thucTeCuoiKy","search","setSearch","originalList","setOriginalList","filtered","toLowerCase","handleSearch","handleAddWater","name","amount","nhap","soLuong","updated","Number","updateWater","placeholder","Header","href","_tempDates3","_tempDates4","handleInputChange","setCurrentTime","calculate","debounce","useDebounceHandler","debounceTimers","useRef","newVal","oldVal","callback","delay","arguments","undefined","current","clearTimeout","tempDates","setTempDates","checkDateRef","originalRef","handleChange","_originalRef$current","newValue","originalValue","_tempDates","_tempDates2","initFlatpickr","refs","checkindate","checkoutdate","checkintime","checkouttime","setRef","el","ref","handleCalculate","RoomList","rooms","setRooms","depositRef","deposit2Ref","loadRooms","now","toLocaleDateString","timeStr","getHours","getMinutes","dateStrBK","convertToStandardDateFormat","formattedDate","formattedDateTime","checkinDateInput","checkinTimeInput","_flatpickr","setDate","checkoutDateInput","checkoutTimeInput","checkInTime","checkOutTime","start","end","notes","diffMs","diffMinutes","diffHours","startHour","endHour","isSameDay","toDateString","isNightStay","dataRoom","find","holidays","surcharge","holidaySurcharge","extraMinutes","extraHoursCharged","floor","temp","setMinutes","totalExtraHourSurcharge","holidayHours","i","currentStr","isHoliday","setHours","surchargeHours","firstDayEnd","getDate","lastNoon","fullDays","round","extraHours","holidayCounts","endDate","getHolidayDays","objectDatatoSaveHistory","note","HandleSaveDatatoHistory","saveRoomHistory","numberValue","formatted","innerText","GlobalModal","stopPropagation","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.cef348dd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"room\":\"Room_room__3dn-v\",\"edit-room\":\"Room_edit-room__2UOE_\",\"time-container\":\"Room_time-container__1cqrG\",\"btn-container\":\"Room_btn-container__3bsDN\",\"btn-top\":\"Room_btn-top__3f26V\",\"check-in\":\"Room_check-in__uGDzQ\",\"check-out\":\"Room_check-out__245g2\",\"button\":\"Room_button__3GK7E\",\"btn-calculate\":\"Room_btn-calculate__12o8-\",\"calculate\":\"Room_calculate__NsbGe\",\"borderRun\":\"Room_borderRun__1BOZk\",\"calculate-header\":\"Room_calculate-header__2oNqo\",\"room-info\":\"Room_room-info__1i3is\",\"check-in-time\":\"Room_check-in-time__P7-KB\",\"check-out-time\":\"Room_check-out-time__2e3DF\",\"total-amount\":\"Room_total-amount__2ZyRh\",\"title\":\"Room_title__2iwMF\",\"additional-note\":\"Room_additional-note__w53VK\",\"control\":\"Room_control__1S4n6\",\"footer-note\":\"Room_footer-note__307lz\",\"title-table\":\"Room_title-table__3aXL3\",\"filter-container\":\"Room_filter-container__3TJ1h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1vo9O\",\"borderRun\":\"App_borderRun__2iWKz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1jUDE\",\"header__nav\":\"Header_header__nav__2dn1u\",\"header__menu\":\"Header_header__menu__31mMF\",\"header__item\":\"Header_header__item__2tILp\",\"header__link\":\"Header_header__link__SinI9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title-table\":\"History_title-table__228zP\",\"history-table\":\"History_history-table__IC4Mj\",\"add-room\":\"History_add-room__XPnpc\",\"pagination\":\"History_pagination__2zJno\",\"notification\":\"History_notification__-NJI2\",\"controls\":\"History_controls__-CZIH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title-table\":\"ListRoomDetail_title-table__ml7io\",\"control\":\"ListRoomDetail_control__3Ezzv\",\"add-room\":\"ListRoomDetail_add-room__33fcw\",\"telegram\":\"ListRoomDetail_telegram__2Vxns\",\"history-table\":\"ListRoomDetail_history-table__1vKnO\",\"pagination\":\"ListRoomDetail_pagination__1xP6h\",\"notification\":\"ListRoomDetail_notification__2XcTJ\",\"controls\":\"ListRoomDetail_controls__16woz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AddRoom_container__2M6M9\",\"title\":\"AddRoom_title__3u_SX\",\"form\":\"AddRoom_form__1RRjs\",\"formGroup\":\"AddRoom_formGroup__3GaUv\",\"label\":\"AddRoom_label__2wxth\",\"input\":\"AddRoom_input__1MztV\",\"button\":\"AddRoom_button__2XxF9\",\"message\":\"AddRoom_message__2miCS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Telegram_container__2LSO1\",\"image-wrapper\":\"Telegram_image-wrapper__3hNmw\",\"image\":\"Telegram_image__2Wx52\",\"header\":\"Telegram_header__3ISEH\",\"intro\":\"Telegram_intro__dcMgh\",\"spacer\":\"Telegram_spacer__SN81I\",\"step\":\"Telegram_step__agFSe\",\"instruction\":\"Telegram_instruction__1Vy5q\",\"example\":\"Telegram_example__3_Ixs\",\"note\":\"Telegram_note__2HcRx\",\"detail\":\"Telegram_detail__24UQ5\",\"response\":\"Telegram_response__228LW\",\"footer\":\"Telegram_footer__3rfZr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"Room_search__aVuJX\",\"title-table\":\"Room_title-table__3a3Ee\",\"water-table-history-table\":\"Room_water-table-history-table__2ujk4\",\"room-item\":\"Room_room-item__1g_o5\",\"plus-minus-button\":\"Room_plus-minus-button__2-584\",\"icon\":\"Room_icon__PY6Iu\",\"water-table-pagination\":\"Room_water-table-pagination__2252z\",\"water-table-notification\":\"Room_water-table-notification__3cwnB\",\"water-table-controls\":\"Room_water-table-controls__NPaqh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AddRoomMonth_container__2uQBT\",\"title\":\"AddRoomMonth_title__3m1W5\",\"form\":\"AddRoomMonth_form__YIc8x\",\"formGroup\":\"AddRoomMonth_formGroup__1wN6m\",\"label\":\"AddRoomMonth_label__3rlyw\",\"input\":\"AddRoomMonth_input__bPdOM\",\"control\":\"AddRoomMonth_control__2KH-h\",\"button\":\"AddRoomMonth_button__3D-hd\",\"message\":\"AddRoomMonth_message__3nk94\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AdjustRoom_container__385Ji\",\"title\":\"AdjustRoom_title__33BYK\",\"form\":\"AdjustRoom_form__3TEOn\",\"formGroup\":\"AdjustRoom_formGroup__3lZkF\",\"label\":\"AdjustRoom_label__P0DyX\",\"input\":\"AdjustRoom_input__WsTMm\",\"control\":\"AdjustRoom_control__3BKud\",\"button\":\"AdjustRoom_button__3u51z\",\"message\":\"AdjustRoom_message__1QMLd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"invoice-container\":\"PaymentInfo_invoice-container__8MVfW\",\"invoice-title\":\"PaymentInfo_invoice-title__11WgS\",\"invoice-summary\":\"PaymentInfo_invoice-summary__1P9ND\",\"summary-item\":\"PaymentInfo_summary-item__2VuQ7\",\"btn-summary\":\"PaymentInfo_btn-summary__3lvE-\",\"btn-total\":\"PaymentInfo_btn-total__1oEO1\",\"btn-refresh\":\"PaymentInfo_btn-refresh__3Om1H\",\"btn-back\":\"PaymentInfo_btn-back__15h45\",\"refresh\":\"PaymentInfo_refresh__3ELEp\",\"invoice-list\":\"PaymentInfo_invoice-list__10HsF\",\"invoice-card\":\"PaymentInfo_invoice-card__IZ8w3\",\"customer-name\":\"PaymentInfo_customer-name__mpk_C\",\"invoice-info\":\"PaymentInfo_invoice-info__1KHji\",\"invoice-charges\":\"PaymentInfo_invoice-charges__2X9b4\",\"divider\":\"PaymentInfo_divider__3ypoz\",\"invoice-info-item\":\"PaymentInfo_invoice-info-item__wX7f1\",\"info-line\":\"PaymentInfo_info-line__2tyYB\",\"charge-line\":\"PaymentInfo_charge-line__35bUn\",\"total-amount\":\"PaymentInfo_total-amount__KxI6-\",\"result\":\"PaymentInfo_result__C1cke\",\"result-item\":\"PaymentInfo_result-item__2HAsp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TotalPaymentInfo_container__IapsC\",\"center\":\"TotalPaymentInfo_center__3V9Fq\",\"summary-item\":\"TotalPaymentInfo_summary-item__3czLD\",\"btn-summary\":\"TotalPaymentInfo_btn-summary__5wW_y\",\"btn-total\":\"TotalPaymentInfo_btn-total__3qdz1\",\"result\":\"TotalPaymentInfo_result__3Lb7s\",\"result-item\":\"TotalPaymentInfo_result-item__1YjMp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"ListWater_search__1kSQX\",\"title-table\":\"ListWater_title-table__2mf65\",\"water-table-history-table\":\"ListWater_water-table-history-table__2cswU\",\"plus-minus-button\":\"ListWater_plus-minus-button__1Rrs8\",\"water-table-pagination\":\"ListWater_water-table-pagination__3SGE1\",\"water-table-notification\":\"ListWater_water-table-notification__26L_G\",\"water-table-controls\":\"ListWater_water-table-controls__1KLWs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"Inventory_search__2uETV\",\"news\":\"Inventory_news__2U8HP\",\"title-table\":\"Inventory_title-table__wiBor\",\"water-table-history-table\":\"Inventory_water-table-history-table__2gojk\",\"water-table-pagination\":\"Inventory_water-table-pagination___jlke\",\"water-table-notification\":\"Inventory_water-table-notification__259yr\",\"water-table-controls\":\"Inventory_water-table-controls__1INCz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal_overlay__2wYXf\",\"modal-parent\":\"modal_modal-parent__2mNpV\",\"modal-content\":\"modal_modal-content__26qwn\",\"modal-close\":\"modal_modal-close__2J9y6\"};","import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:3000\",\r\n  timeout: 10000,\r\n});\r\n\r\n// Hàm xử lý promise chung có catch lỗi\r\nconst handleRequest = async (promise, errorMessage) => {\r\n  try {\r\n    const res = await promise;\r\n    return res.data;\r\n  } catch (error) {\r\n    const message = error.response?.data?.message || errorMessage || \"Có lỗi xảy ra!\";\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\n// Các API dưới đây:\r\n\r\nconst editRoom = (room, adjust) => {\r\n  return handleRequest(\r\n    api.post('/api/edit-room', {\r\n      roomNumber: room,\r\n      newDetails: adjust\r\n    }),\r\n    \"Lỗi khi chỉnh sửa phòng\"\r\n  );\r\n};\r\n\r\nconst addRoom = (object) => {\r\n  return handleRequest(\r\n    api.post('/api/addroom', {\r\n      roomNumber: object.roomNumber,\r\n      daily: object.dailyprice,\r\n      firstHour: object.firstHour,\r\n      extraHour: object.extraHour,\r\n      checkInDate: \"\",\r\n      checkOutDate: \"\",\r\n    }),\r\n    \"Lỗi khi thêm phòng\"\r\n  );\r\n};\r\n\r\nconst saveRoomHistory = (room, adjust) => {\r\n  return handleRequest(\r\n    api.post('/api/history', {\r\n      roomNumber: room,\r\n      totalAmount: adjust.totalAmount,\r\n      checkInDate: adjust.checkInDate,\r\n      checkOutDate: adjust.checkOutDate,\r\n      description: adjust.description,\r\n    }),\r\n    \"Lỗi khi lưu lịch sử phòng\"\r\n  );\r\n};\r\n\r\nconst deleteRoomData = (room) => {\r\n  return handleRequest(\r\n    api.get(`/api/reset/${room}`),\r\n    \"Lỗi khi reset phòng\"\r\n  );\r\n};\r\n\r\nconst fetchRoomsList = async () => {\r\n  const data = await handleRequest(\r\n    api.get(\"/api/rooms\"),\r\n    \"Lỗi khi lấy danh sách phòng\"\r\n  );\r\n  if (data) {\r\n    localStorage.setItem(\"rooms\", JSON.stringify(data));\r\n  }\r\n  return data;\r\n};\r\n\r\nconst fetchHistory = (type) => {\r\n  const url = type === 'all' ? \"/api/history/all\" : `/api/history/${type}`;\r\n  return handleRequest(api.get(url), \"Lỗi khi lấy lịch sử phòng\");\r\n};\r\n\r\nconst fetchWaterList = () => {\r\n  return handleRequest(\r\n    api.get(\"/api/water\"),\r\n    \"Lỗi khi lấy danh sách nước\"\r\n  );\r\n};\r\n\r\nconst updateWater = (object) => {\r\n  return handleRequest(\r\n    api.post('/api/update-water', {\r\n      tenNuoc: object.tenNuoc,\r\n      soLuong: Number(object.soLuong) || 0,\r\n      nhap: Number(object.nhap) || 0,\r\n    }),\r\n    \"Lỗi khi cập nhật nước\"\r\n  );\r\n};\r\n\r\nconst TestInventory = () => {\r\n  return handleRequest(\r\n    api.get(\"/api/kiemhangthuall\"),\r\n    \"Lỗi khi kiểm hàng thử\"\r\n  );\r\n};\r\n\r\nconst TestInventory2 = async () => {\r\n  const check = window.confirm(\"Bạn có chắc muốn tạo mới dữ liệu không?\\nHệ thống sẽ tự động lấy Số lượng cuối và Chuyển về lại Số lượng Đầu\");\r\n  if (!check) return null;\r\n  \r\n  return handleRequest(\r\n    api.get(\"/api/resetwt\"),\r\n    \"Lỗi khi reset số lượng nước\"\r\n  );\r\n};\r\n\r\nconst GetAllRoomsMonth = () => {\r\n  return handleRequest(\r\n    api.get(\"/api/getallroom/v2\"),\r\n    \"Lỗi khi tải danh sách phòng tháng\"\r\n  );\r\n};\r\n\r\nconst GetUpdateRoom = (id, object) => {\r\n  return handleRequest(\r\n    api.put(`/api/update/${id}/v2`, object),\r\n    \"Lỗi khi cập nhật phòng\"\r\n  );\r\n};\r\n\r\nconst addRoomV2 = (object) => {\r\n  return handleRequest(\r\n    api.post(`/api/addroom/v2`, {\r\n      hovaten: object.hovaten,\r\n      SoPhong: object.SoPhong,\r\n      GiaPhong: object.GiaPhong,\r\n      chisodiencu: object.chisodiencu || 0,\r\n      chisodienmoi: 0,\r\n      chisonuoclanhcu: object.chisonuoclanhcu || 0,\r\n      chisonuoclanhmoi: 0,\r\n      chisonuocnongcu: object.chisonuocnongcu || 0,\r\n      chisonuocnongmoi: 0,\r\n      sinhhoatchung: object.sinhhoatchung || 0,\r\n      ghichu: \"Chưa có ghi chú\",\r\n    }),\r\n    \"Lỗi khi thêm phòng mới\"\r\n  );\r\n};\r\n\r\nconst deleteRoomV2 = async (id) => {\r\n  const check = window.confirm(\"Bạn có chắc muốn xóa không?\");\r\n  if (!check) return null;\r\n\r\n  return handleRequest(\r\n    api.get(`/api/delete/${id}/v2`),\r\n    \"Lỗi khi xóa phòng\"\r\n  );\r\n};\r\n\r\n// Xuất toàn bộ\r\nexport { \r\n  api, \r\n  editRoom, \r\n  saveRoomHistory, \r\n  deleteRoomData, \r\n  fetchRoomsList, \r\n  fetchHistory, \r\n  addRoom, \r\n  fetchWaterList, \r\n  updateWater, \r\n  TestInventory, \r\n  TestInventory2, \r\n  GetAllRoomsMonth, \r\n  GetUpdateRoom, \r\n  addRoomV2, \r\n  deleteRoomV2 \r\n};\r\n","// Hàm lấy giờ Việt Nam\r\nexport function getVietnamTime() {\r\n    const now = new Date();\r\n    const utc = now.getTime() + now.getTimezoneOffset() * 60000;\r\n    return new Date(utc + 7 * 3600000);\r\n}\r\n\r\n// Hàm định dạng ngày theo múi giờ Việt Nam\r\nexport function formatVietnamDate(dateObj) {\r\n    console.log(\"du lieu nhan duoc\", dateObj)\r\n    const day = String(dateObj.getDate()).padStart(2, '0');\r\n    const month = String(dateObj.getMonth() + 1).padStart(2, '0');\r\n    const year = dateObj.getFullYear();\r\n    return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport function convertToISODate(dateStr) {\r\n    if (!/^\\d{2}-\\d{2}-\\d{4}$/.test(dateStr)) return '';\r\n    const [day, month, year] = dateStr.split('-');\r\n    return `${year}-${month}-${day}`;\r\n}\r\n  \r\n\r\nexport const convertToStandardDateFormat = (dateStr, timeStr) => {\r\n    // Tách ngày thành ngày, tháng, năm\r\n    const [day, month, year] = dateStr.split(\"/\");\r\n  \r\n    // Chuyển đổi thành định dạng yyyy-mm-dd\r\n    const formattedDate = `${day.padStart(2, \"0\")}-${month.padStart(2, \"0\")}-${year}`;\r\n  \r\n    let formattedDateTime\r\n    // Kết hợp ngày với giờ\r\n    if(timeStr) {\r\n        formattedDateTime = `${formattedDate} ${timeStr}`;\r\n    }else {\r\n        formattedDateTime = `${formattedDate}`;\r\n    }\r\n    \r\n  \r\n    return formattedDateTime;\r\n};\r\n\r\nexport const formatDateValue = (datetime) => {\r\n    if (!datetime) return \"\";\r\n    const [year, date, day] = datetime.split(\" \")[0].split(\"-\"); // Chia chuỗi theo dấu \"-\"\r\n\r\n    return day + \"-\" + date + \"-\" + year; // Định dạng lại thành d-m-Y\r\n  };\r\n\r\n  // Lấy giờ định dạng hh:mm\r\nexport const formatTimeValue = (datetime) => {\r\n    if (!datetime) return \"\";\r\n    const [, time] = datetime.split(\" \");\r\n    return time?.substring(0, 5) || \"\";\r\n  };\r\n  \r\n","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./History.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { fetchHistory } from \"../../../api\";\r\n\r\nimport flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nimport { formatDateValue, formatTimeValue } from \"../../dateUtils\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction HistoryRoom() {\r\n  const [history, setHistory] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5;\r\n\r\n  useEffect(() => {\r\n    const loadHistory = async () => {\r\n      const getHistory = await fetchHistory('all');\r\n      const sortedHistory = await getHistory.sort((a, b) => new Date(b.checkOutDate) - new Date(a.checkInDate));\r\n      setHistory(sortedHistory);\r\n    };\r\n\r\n    loadHistory();\r\n  }, []);\r\n  console.log(history)\r\n\r\n  // Tính toán dữ liệu cho mỗi trang\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = history.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n  // Chuyển sang trang kế tiếp\r\n  const nextPage = () => {\r\n    if (currentPage < totalPages()) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  // Chuyển sang trang trước\r\n  const prevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  // Tính tổng số trang\r\n  const totalPages = () => {\r\n    return Math.ceil(history.length / itemsPerPage);\r\n  };\r\n\r\n\r\n  const handleDeleteItem = async (idToDelete) => {\r\n    try {\r\n      // Gửi yêu cầu xóa đến backend\r\n      const response = await fetchHistory(idToDelete);\r\n\r\n      // Kiểm tra nếu xóa thành công (tùy vào response từ backend)\r\n      if (response.status === 200) {\r\n        // Xóa phần tử khỏi state history\r\n        const updatedHistory = history.filter(item => item._id !== idToDelete);\r\n        setHistory(updatedHistory);\r\n      } else {\r\n        console.error(\"Không thể xóa lịch sử, vui lòng thử lại.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi xóa lịch sử:\", error);\r\n    }\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n      flatpickr(`#startTime`, {\r\n        enableTime: true,\r\n        noCalendar: true,\r\n        dateFormat: \"H:i\",\r\n        time_24hr: true,\r\n        minuteIncrement: 60,\r\n  \r\n      });\r\n      flatpickr(`#endTime`, {\r\n        enableTime: true,\r\n        noCalendar: true,\r\n        dateFormat: \"H:i\",\r\n        time_24hr: true,\r\n        minuteIncrement: 60,\r\n      });\r\n  \r\n  \r\n      flatpickr(`#startDate`, {\r\n        dateFormat: \"d-m-Y\", // <-- Định dạng ngày/tháng/năm đúng\r\n        maxDate: \"today\",     // Chặn các ngày sau ngày hiện tại\r\n      });\r\n  \r\n      flatpickr(`#endDate`, {\r\n        dateFormat: \"d-m-Y\", // <-- Định dạng ngày/tháng/năm đúng\r\n      });\r\n  \r\n    }, []);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1 className={cx(\"title-table\")}>Lịch Sử Thuê Phòng</h1>\r\n      \r\n      <table className={cx(\"history-table\")}>\r\n        <thead>\r\n          <tr>\r\n            <th>Số Phòng</th>\r\n            <th>Ngày Vào</th>\r\n            <th>Ngày Ra</th>\r\n            <th>Tổng Tiền</th>\r\n            <th>Ghi Chú</th>\r\n            <th>Hành Động</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className={cx(\"data\")}>\r\n          {currentItems && currentItems.length > 0 ? (\r\n            currentItems.map((item, index) => (\r\n              <tr key={index}>\r\n                <td>{item.roomNumber}</td>\r\n                <td>\r\n                  Ngày {formatDateValue(item.checkInDate)} {formatTimeValue(item.checkInDate).split(\":\")[0]} giờ {formatTimeValue(item.checkInDate).split(\":\")[1]} phút\r\n                </td>\r\n\r\n                <td>\r\n                  Ngày {formatDateValue(item.checkOutDate)} {formatTimeValue(item.checkOutDate).split(\":\")[0]} giờ {formatTimeValue(item.checkOutDate).split(\":\")[1]} phút\r\n                </td>\r\n                <td>{item.totalAmount}</td>\r\n                <td dangerouslySetInnerHTML={{ __html: item.description }} />\r\n                <td><button onClick={() => handleDeleteItem(item._id)}>Xóa</button></td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"6\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                Không có bảng nào được ghi\r\n              </td>\r\n            </tr>\r\n          )}\r\n\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Pagination Controls */}\r\n      <div className={cx(\"pagination\")}>\r\n        <div className={cx(\"notification\")}><span>Trang {currentPage} of {totalPages()}</span></div>\r\n        <div className={cx(\"controls\")}>\r\n          <button onClick={prevPage} disabled={currentPage === 1}>\r\n            Trang trước\r\n          </button>\r\n          <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n            Trang sau\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HistoryRoom;\r\n","// src/context/ModalContext.js\r\nimport { createContext, useState, useContext } from \"react\";\r\n\r\nconst ModalContext = createContext();\r\n\r\nexport const ModalProvider = ({ children }) => {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [modalContent, setModalContent] = useState(null);\r\n\r\n  const openModal = (content) => {\r\n    setModalContent(content);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n    setModalContent(null);\r\n  };\r\n\r\n  return (\r\n    <ModalContext.Provider value={{ showModal, modalContent, openModal, closeModal }}>\r\n      {children}\r\n    </ModalContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useModal = () => useContext(ModalContext);\r\n","import React, { useState } from \"react\";\r\nimport styles from \"./AddRoom.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { addRoom } from \"api\";\r\n\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction AddRoom() {\r\n\r\n  const [data, setData] = useState({\r\n    roomNumber: \"\",\r\n    dailyprice: \"\",\r\n    firstHour: \"\",\r\n    extraHour: \"\"\r\n  });\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleAddRoom = async (event) => {\r\n    \r\n  \r\n    const { roomNumber, dailyprice, firstHour, extraHour } = data;\r\n  \r\n    if (!roomNumber || !dailyprice || !firstHour || !extraHour) {\r\n      setMessage(\"Vui lòng nhập đầy đủ thông tin!\");\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const response = await addRoom(data);\r\n      if (response) {\r\n        setMessage(\"Thêm phòng thành công!\");\r\n        // Reset form nếu cần\r\n        // setData({ roomNumber: '', dailyprice: '', firstHour: '', extraHour: '', ... });\r\n      }\r\n    } catch (error) {\r\n      console.error(error); // log ra để dễ debug\r\n      setMessage(error.message || \"Có lỗi xảy ra khi thêm phòng!\");\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className={cx(\"container\")}>\r\n      <h2 className={cx(\"title\")}>Thêm Phòng Mới</h2>\r\n      <form className={cx(\"form\")} id=\"roomForm\">\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Số phòng:</label>\r\n          <input value={data.roomNumber || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, roomNumber: e.target.value }))\r\n          } type=\"number\" id=\"roomNumber\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giá phòng ngày:</label>\r\n          <input value={data.dailyprice || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, dailyprice: e.target.value }))\r\n          } type=\"number\" id=\"daily\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giờ đầu tiên:</label>\r\n          <input value={data.firstHour || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, firstHour: e.target.value }))\r\n          } type=\"number\" id=\"firstHour\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giá thêm giờ:</label>\r\n          <input value={data.extraHour || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, extraHour: e.target.value }))\r\n          } type=\"number\" id=\"extraHour\" required className={cx(\"input\")} />\r\n        </div>\r\n        <button type=\"button\" onClick={() => handleAddRoom()} className={cx(\"button\")}>Thêm Phòng</button>\r\n      </form>\r\n      <p id=\"message\" className={cx(\"message\")}>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddRoom;","import React from \"react\";\r\nimport styles from \"./Telegram.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst Form2 = () => {\r\n  return (\r\n    <>\r\n      <div className={cx(\"container\")}>\r\n      <div className={cx(\"image-wrapper\")}>\r\n        <img\r\n          src=\"./telegram.png\"\r\n          alt=\"Mã QR Telegram\"\r\n          className={cx(\"image\")}\r\n        />\r\n      </div>\r\n        <span className={cx(\"header\")}>\r\n          📲{\" \"}\r\n          <strong>\r\n            Chào mừng bạn đến với bot tính tiền phòng HataHomeStay trên Telegram!\r\n          </strong>\r\n        </span>\r\n\r\n        <span className={cx(\"instruction\")}>\r\n          Bot này được tạo ra để giúp bạn gửi chỉ số điện, nước hàng tháng một\r\n          cách <strong>nhanh chóng</strong> và <strong>chính xác</strong>. Dưới\r\n          đây là hướng dẫn chi tiết:\r\n        </span>\r\n\r\n        <span className={cx(\"step\")}>\r\n          🔹 <strong>Bước 1:</strong> Mở ứng dụng <em>Quét mã QR</em> trên điện\r\n          thoại của bạn.\r\n        </span>\r\n\r\n        <span className={cx(\"step\")}>\r\n          🔹 <strong>Bước 2:</strong> Quét mã QR hiển thị trên màn hình hoặc tờ\r\n          hướng dẫn. Telegram sẽ tự động mở bot có tên <em>HATAHOMESTAY_BOT</em>\r\n          .\r\n        </span>\r\n\r\n        <span className={cx(\"step\")}>\r\n          🔹 <strong>Bước 3:</strong> Nhấn nút <code>Start</code> để bắt đầu sử\r\n          dụng bot.\r\n        </span>\r\n\r\n        <span className={cx(\"instruction\")}>\r\n          Sau khi khởi động bot, bạn có thể nhập số phòng bằng cách gửi\r\n          lệnh theo mẫu:\r\n        </span>\r\n\r\n        <span className={cx(\"example\")}>\r\n          <code>/001</code>\r\n        </span>\r\n\r\n        <span className={cx(\"detail\")}>\r\n          Trong đó <code>001</code> là số phòng. Khi bạn gửi lệnh này:\r\n          <br />– Bot sẽ kiểm tra xem phòng đó có tồn tại hay không.\r\n          <br />– Nếu phòng <strong>chưa có thời gian check-in</strong>, bot sẽ\r\n          tự động cập nhật thời gian và thông báo cho bạn và chỉ cần gửi lại lệnh cũ hệ thống sẽ tự động tính toán cho bạn.\r\n          <br />– Nếu phòng <strong>đã có thời gian</strong>, bot sẽ tự động\r\n          tính tiền dựa trên số liệu đã có trong danh sách và gửi lại thông tin thanh toán chính xác.\r\n          <br />– Nếu muốn reset thời gian nhận phòng chỉ cần gửi lệnh <strong>/sophong r, ví dụ: /001 r</strong>, lệnh này hệ thống sẽ tự động xóa thời gian checkin và sẵn sàng chờ lệnh tiếp theo.\r\n        </span>\r\n\r\n        <span className={cx(\"footer\")}>\r\n        Bot HataHomeStay được phát triển bởi <strong>Hữu Đức</strong>. Cảm ơn\r\n        bạn đã sử dụng!\r\n      </span>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst Form1 = () => {\r\n  return (\r\n    <div className={cx(\"container\")}>\r\n      <div className={cx(\"image-wrapper\")}>\r\n        <img\r\n          src=\"./telegram.png\"\r\n          alt=\"Mã QR Telegram\"\r\n          className={cx(\"image\")}\r\n        />\r\n      </div>\r\n\r\n      <span className={cx(\"header\")}>\r\n        📲{\" \"}\r\n        <strong>\r\n          Chào mừng bạn đến với bot điện nước HataHomeStay trên Telegram!\r\n        </strong>\r\n      </span>\r\n\r\n      <span className={cx(\"intro\")}>\r\n        Bot này giúp bạn gửi chỉ số điện, nước hàng tháng dễ dàng và chính xác.\r\n        Dưới đây là hướng dẫn chi tiết nhé!\r\n      </span>\r\n\r\n      <span className={cx(\"spacer\")} />\r\n\r\n      <span className={cx(\"step\")}>\r\n        <strong>Bước 1:</strong> Dùng điện thoại mở ứng dụng{\" \"}\r\n        <strong>Quét mã QR</strong>.\r\n      </span>\r\n\r\n      <span className={cx(\"step\")}>\r\n        <strong>Bước 2:</strong> Quét mã QR hiển thị trên màn hình hoặc tờ hướng\r\n        dẫn.\r\n      </span>\r\n\r\n      <span className={cx(\"instruction\")}>\r\n        Sau khi quét xong, Telegram sẽ mở ra bot có tên{\" \"}\r\n        <em>HATAHOMESTAY_BOT</em>.\r\n      </span>\r\n\r\n      <span className={cx(\"step\")}>\r\n        <strong>Bước 3:</strong> Nhấn nút <code>Start</code> để bắt đầu sử dụng\r\n        bot.\r\n      </span>\r\n\r\n      <span className={cx(\"instruction\")}>\r\n        Sau khi nhấn Start, bạn có thể bắt đầu nhập chỉ số điện nước mỗi tháng.\r\n      </span>\r\n\r\n      <span className={cx(\"step\")}>\r\n        <strong>Bước 4:</strong> Gửi thông tin theo đúng mẫu sau:\r\n      </span>\r\n\r\n      <span className={cx(\"example\")}>\r\n        <code>001 15 223 1523</code>\r\n      </span>\r\n\r\n      <span className={cx(\"note\")}>📝 Giải thích:</span>\r\n      <span className={cx(\"detail\")}>\r\n        - <code>001</code>: Số phòng\r\n        <br />- <code>15</code>: Số nước nóng mới\r\n        <br />- <code>223</code>: Số nước lạnh mới\r\n        <br />- <code>1523</code>: Số điện mới\r\n      </span>\r\n      <span className={cx(\"step\")}>\r\n        ✅ Bạn có thể gửi nhiều phòng cùng lúc bằng cách xuống dòng, ví dụ:\r\n      </span>\r\n\r\n      <span className={cx(\"example\")}>\r\n        <code>001 15 223 1523</code>\r\n        <br />\r\n        <code>002 14 210 1490</code>\r\n        <br />\r\n        <code>003 12 190 1400</code>\r\n      </span>\r\n\r\n      <span className={cx(\"instruction\")}>\r\n        Mỗi dòng là thông tin của 1 phòng. Nhớ nhập đúng thứ tự nhé!\r\n      </span>\r\n\r\n      <span className={cx(\"response\")}>\r\n        Sau khi gửi, bot sẽ phản hồi như: <em>\"Đã cập nhật cho phòng 001\"</em>,\r\n        \"phòng 002\", v.v...\r\n      </span>\r\n\r\n      <span className={cx(\"instruction\")}>\r\n        Bot sẽ tự động lưu lại. Bạn không cần nhập lại hay lo quên!\r\n      </span>\r\n\r\n      <span className={cx(\"step\")}>\r\n        <strong>Bước 5:</strong> Quay lại trang danh sách phòng trên hệ thống.\r\n      </span>\r\n\r\n      <span className={cx(\"instruction\")}>\r\n        Các chỉ số vừa nhập sẽ được cập nhật tự động. Bạn có thể kiểm tra lại và\r\n        tạo hóa đơn ngay.\r\n      </span>\r\n\r\n      <span className={cx(\"spacer\")} />\r\n\r\n      <span className={cx(\"footer\")}>\r\n        Bot HataHomeStay được phát triển bởi <strong>Hữu Đức</strong>. Cảm ơn\r\n        bạn đã sử dụng!\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\nfunction Telegram({ props }) {\r\n  return (\r\n    <>\r\n      {props === 1 && <Form1 />}\r\n      {props === 2 && <Form2 />}\r\n      {props === \"all\" && (\r\n        <>\r\n          <Form1 />\r\n          <Form2 />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Telegram;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./ListRoomDetail.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { fetchRoomsList } from \"../../../api\";\r\nimport { editRoom } from \"api\";\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport AddRoom from \"../AddRoom/AddRoom\";\r\nimport HistoryRoom from \"../History/HistoryRoom\";\r\nimport Telegram from \"component/Telegram/Telegram\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListRoomDetail() {\r\n\r\n  const {openModal} = useModal();\r\n\r\n  const [ListRoom, setListroom] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5;\r\n\r\n  useEffect(() => {\r\n    const loadHistory = async () => {\r\n      const getRooms = await fetchRoomsList();\r\n      const sortedRooms = getRooms.sort((a, b) => a.roomNumber - b.roomNumber);\r\n      setListroom(sortedRooms);\r\n    };\r\n\r\n    loadHistory();\r\n  }, []);\r\n  \r\n\r\n  // Tính toán dữ liệu cho mỗi trang\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = ListRoom.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n  // Chuyển sang trang kế tiếp\r\n  const nextPage = () => {\r\n    if (currentPage < totalPages()) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  // Chuyển sang trang trước\r\n  const prevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  // Tính tổng số trang\r\n  const totalPages = () => {\r\n    return Math.ceil(ListRoom.length / itemsPerPage);\r\n  };\r\n\r\n\r\n//   const handleDeleteItem = async (idToDelete) => {\r\n//     try {\r\n//       // Gửi yêu cầu xóa đến backend\r\n//       const response = await fetchHistory(idToDelete);\r\n\r\n//       // Kiểm tra nếu xóa thành công (tùy vào response từ backend)\r\n//       if (response.status === 200) {\r\n//         // Xóa phần tử khỏi state history\r\n//         const updatedHistory = history.filter(item => item._id !== idToDelete);\r\n//         setHistory(updatedHistory);\r\n//       } else {\r\n//         console.error(\"Không thể xóa lịch sử, vui lòng thử lại.\");\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Lỗi khi xóa lịch sử:\", error);\r\n//     }\r\n//   };\r\n\r\nconst handleEditRoom = async(roomID) => {\r\n    const response = await editRoom(roomID, {deleted: true});\r\n    if(response) {\r\n      window.location.reload();\r\n    }    \r\n  }\r\n\r\nconst handleOpenAddRoom = () => {\r\n    openModal(<AddRoom />);\r\n}\r\n\r\nconst handleHistoryRoom = () => {\r\n    openModal(<HistoryRoom />);\r\n}\r\n\r\nconst handleOpenTelegram = () => {\r\n  openModal(<Telegram props={2} />);\r\n}\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1 className={cx(\"title-table\")}>Danh sách phòng cụ thể</h1>\r\n      <div className={cx(\"control\")}>\r\n        <button onClick={(e) => handleOpenAddRoom()} className={cx(\"add-room\")}>Thêm phòng</button>\r\n        <button onClick={(e) => handleOpenTelegram()} className={cx(\"telegram\")}>Điều khiển bot qua telegram</button>\r\n      </div>\r\n      <table className={cx(\"history-table\")}>\r\n     \r\n        <thead>\r\n          <tr>\r\n            <th>Số Phòng</th>\r\n            <th>Giá phòng</th>\r\n            <th>Lịch sử thuê</th>\r\n            <th>Hành động</th>\r\n            \r\n          </tr>\r\n        </thead>\r\n        <tbody className={cx(\"data\")}>\r\n          {currentItems && currentItems.length > 0 ? (\r\n            currentItems.map((item, index) => (\r\n              <tr key={index}>\r\n                <td>Phòng: {String(item.roomNumber).padStart(3, \"0\")}</td>\r\n                <td>\r\n                    <span>Giá phòng ngày: {item.daily.toLocaleString()} VNĐ</span>\r\n                    <span>Giá phòng giờ đầu: {item.firstHour.toLocaleString()} VNĐ</span>\r\n                    <span> Giá phòng giờ đầu: {item.extraHour.toLocaleString()} VNĐ</span>\r\n                    \r\n                   \r\n                </td>\r\n                <td><button onClick={(e) => handleHistoryRoom()}>Xem ngay</button></td>\r\n                <td><button onClick={(e) => handleEditRoom(item._id)}>Xóa</button></td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"6\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                Không có bảng nào được ghi\r\n              </td>\r\n            </tr>\r\n          )}\r\n\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Pagination Controls */}\r\n      <div className={cx(\"pagination\")}>\r\n        <div className={cx(\"notification\")}><span>Trang {currentPage} of {totalPages()}</span></div>\r\n        <div className={cx(\"controls\")}>\r\n          <button onClick={prevPage} disabled={currentPage === 1}>\r\n            Trang trước\r\n          </button>\r\n          <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n            Trang sau\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ListRoomDetail;\r\n","import React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport styles from './AddRoomMonth.module.scss';\r\nimport { addRoomV2 } from 'api';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport ListRoom from '../Room';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction AddRoomMonth() {\r\n  const [data, setData] = useState({});\r\n  const [deposit, setDeposit] = useState({}); \r\n  const [message, setMessage] = useState('');\r\n  const { openModal } = useModal();\r\n\r\n  const handleAddRoom = async () => {\r\n      console.log(data)\r\n      if(data.hovaten && data.SoPhong && data.GiaPhong && data.sinhhoatchung) {\r\n        try {\r\n            const response = await addRoomV2(data);\r\n            if(response) {\r\n                setData({});\r\n\r\n                setTimeout(() => {\r\n                  setMessage(\"\")\r\n                }, 3000)\r\n                setMessage(\"Thêm phòng thành công!\");\r\n            }\r\n        }catch (error) {\r\n            setMessage(error.message);\r\n        }\r\n      }\r\n      \r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleDeposit = (value) => {\r\n      const rawValue = value.replace(/\\./g, \"\");\r\n      const numberValue = parseInt(rawValue, 10) || 0;\r\n      return numberValue.toLocaleString();\r\n    };\r\n    \r\n    [\"GiaPhong\", \"sinhhoatchung\"].forEach((key) => {\r\n      if (data[key]) {\r\n        const formattedValue = handleDeposit(data[key]);\r\n        setDeposit((prev) => ({ ...prev, [key]: formattedValue }));\r\n      }\r\n    });    \r\n  }, [data])\r\n\r\n\r\n  const handleCloseBack = () => {\r\n    openModal(<ListRoom />);\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n        <div className={cx(\"container\")}>\r\n      <h2 className={cx(\"title\")}>Thêm Phòng Mới</h2>\r\n      <form className={cx(\"form\")} id=\"roomForm\">\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Họ và tên người thuê phòng</label>\r\n          <input value={data.hovaten || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, hovaten: e.target.value }))\r\n          } type=\"text\" id=\"hovaten\" required className={cx(\"input\")} />\r\n          \r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Số Phòng</label>\r\n          <input value={data.SoPhong || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, SoPhong: e.target.value }))\r\n          } type=\"number\" id=\"SoPhong\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n\r\n        \r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giá phòng tháng</label>\r\n          <input value={data.GiaPhong || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, GiaPhong: e.target.value }))\r\n          } type=\"number\" id=\"GiaPhong\" required className={cx(\"input\")} />\r\n          <span>{deposit.GiaPhong || ''}</span>\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Phí sinh hoạt:</label>\r\n          <input value={data.sinhhoatchung || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, sinhhoatchung: e.target.value }))\r\n          } type=\"number\" id=\"sinhhoatchung\" required className={cx(\"input\")} />\r\n          <span>{deposit.sinhhoatchung || ''}</span>\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số điện cũ</label>\r\n          <input value={data.chisodiencu || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisodiencu: e.target.value }))\r\n          } type=\"number\" id=\"chisodien\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước nóng cũ</label>\r\n          <input value={data.chisonuocnongcu || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuocnongcu: e.target.value }))\r\n          } type=\"number\" id=\"chisonuocnongcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước lạnh cũ</label>\r\n          <input value={data.chisonuoclanhcu || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuoclanhcu: e.target.value }))\r\n          } type=\"number\" id=\"chisonuoclanhcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước nóng mới</label>\r\n          <input value={data.chisonuocnongmoi || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuocnongmoi: e.target.value }))\r\n          } type=\"number\" id=\"chisonuoclanhcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước lạnh mới</label>\r\n          <input value={data.chisonuoclanhmoi || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuoclanhmoi: e.target.value }))\r\n          } type=\"number\" id=\"chisonuoclanhcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"control\")}>\r\n        <button type=\"button\" onClick={() => handleCloseBack()} className={cx(\"button\")}>Quay lại</button>\r\n        <button type=\"button\" onClick={() => handleAddRoom()} className={cx(\"button\")}>Thêm Phòng</button>\r\n        </div>\r\n      </form>\r\n      <p id=\"message\" className={cx(\"message\")}>{message}</p>\r\n    </div>\r\n    </>\r\n  );\r\n}   \r\n\r\n\r\nexport default AddRoomMonth;","import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./AdjustRoom.module.scss\";\r\nimport { GetUpdateRoom } from \"api\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport ListRoom from \"component/RoomMonth/Room\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction AdjustRoomMonth({ props }) {\r\n  const [data, setData] = useState({});\r\n  const [deposit, setDeposit] = useState({});\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const { openModal } = useModal();\r\n\r\n  const handleUpdateRoom = async () => {\r\n    try {\r\n      const response = await GetUpdateRoom(props._id,data);\r\n      if (response) {\r\n        setTimeout(() => {\r\n          setMessage(\"\");\r\n        }, 3000);\r\n        setMessage(\"Cập nhật phòng thành công!\");\r\n      } else {\r\n        setMessage(\"Thêm phòng thất bại!\");\r\n      }\r\n    } catch (error) {\r\n      setMessage(error.message);\r\n    }\r\n  };\r\n\r\n  const handleDeposit = (value) => {\r\n    const rawValue = value.replace(/\\./g, \"\");\r\n    const numberValue = parseInt(rawValue, 10) || 0;\r\n    return numberValue.toLocaleString();\r\n  };\r\n  useEffect(() => {\r\n    // Cập nhật `data`\r\n    setData({\r\n      hovaten: props.hovaten,\r\n      GiaPhong: props.GiaPhong,\r\n      chisodiencu: props.chisodiencu,\r\n      chisodienmoi: props.chisodienmoi,\r\n      chisonuoclanhcu: props.chisonuoclanhcu,\r\n      chisonuoclanhmoi: props.chisonuoclanhmoi,\r\n      chisonuocnongcu: props.chisonuocnongcu,\r\n      chisonuocnongmoi: props.chisonuocnongmoi,\r\n      sinhhoatchung: props.sinhhoatchung,\r\n      ghichu: props.ghichu,\r\n    });\r\n  }, [props]);\r\n\r\n  useEffect(() => {\r\n    // Chạy lại khi `data` thay đổi\r\n    [\"GiaPhong\", \"sinhhoatchung\"].forEach((key) => {\r\n      if (data[key]) {\r\n        const formattedValue = handleDeposit(data[key]);\r\n        setDeposit((prev) => ({ ...prev, [key]: formattedValue }));\r\n      }\r\n    });\r\n  }, [props]); // Theo dõi sự thay đổi của `data`\r\n\r\n\r\n  const handleBackAgian = () => {\r\n    return openModal(<ListRoom />);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={cx(\"container\")}>\r\n        <h2 className={cx(\"title\")}>Cập nhật phòng - {props.SoPhong}</h2>\r\n        <form className={cx(\"form\")} id=\"roomForm\">\r\n          {/* Nhóm thông tin số phòng và giá phòng */}\r\n          <div className={cx(\"formGroup\")}>\r\n          <div className={cx(\"inputGroup\")}>\r\n                    <label className={cx(\"label\")}>Họ và tên</label>\r\n                    <input\r\n                      value={data.hovaten || ''}\r\n                      onChange={(e) =>\r\n                        setData((prev) => ({\r\n                          ...prev,\r\n                          hovaten: e.target.value,\r\n                        }))\r\n                      }\r\n                      type=\"text\"\r\n                      id=\"hovaten\"\r\n                      required\r\n                      className={cx(\"input\")}\r\n                    />\r\n                    <span>{deposit.sinhhoatchung || \"\"}</span>\r\n                  </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Số Phòng</label>\r\n              <input\r\n                value={props.SoPhong}\r\n                \r\n                type=\"number\"\r\n                id=\"SoPhong\"\r\n                disabled\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            \r\n          </div>\r\n\r\n          {/* Nhóm thông tin sinh hoạt chung */}\r\n          <div className={cx(\"formGroup\")}>\r\n          <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Giá phòng tháng</label>\r\n              <input\r\n                value={data.GiaPhong || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({ ...prev, GiaPhong: e.target.value }))\r\n                }\r\n                type=\"number\"\r\n                id=\"GiaPhong\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n              <span>{deposit.GiaPhong || \"\"}</span>\r\n            </div>\r\n                \r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Phí sinh hoạt</label>\r\n              <input\r\n                value={data.sinhhoatchung || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    sinhhoatchung: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"sinhhoatchung\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n              <span>{deposit.sinhhoatchung || \"\"}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Nhóm chỉ số điện và nước */}\r\n          <div className={cx(\"formGroup\")}>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số điện cũ</label>\r\n              <input\r\n                value={data.chisodiencu || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({ ...prev, chisodiencu: e.target.value }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số điện mới</label>\r\n              <input\r\n                value={data.chisodienmoi || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({ ...prev, chisodienmoi: e.target.value }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Nhóm chỉ số nước nóng và nước lạnh */}\r\n          <div className={cx(\"formGroup\")}>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước nóng cũ</label>\r\n              <input\r\n                value={data.chisonuocnongcu || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuocnongcu: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước nóng mới</label>\r\n              <input\r\n                value={data.chisonuocnongmoi || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuocnongmoi: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Nhóm chỉ số nước lạnh cũ và mới */}\r\n          <div className={cx(\"formGroup\")}>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước lạnh cũ</label>\r\n              <input\r\n                value={data.chisonuoclanhcu || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuoclanhcu: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisonuoclanh\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước lạnh mới</label>\r\n              <input\r\n                value={data.chisonuoclanhmoi || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuoclanhmoi: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisonuoclanh\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className={cx(\"control\")}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleBackAgian()}\r\n              className={cx(\"button\")}\r\n            >\r\n              Quay lại\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleUpdateRoom()}\r\n              className={cx(\"button\")}\r\n            >\r\n              Cập Nhật\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <p id=\"message\" className={cx(\"message\")}>\r\n          {message}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AdjustRoomMonth;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./TotalPaymentInfo.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport Room from \"component/RoomMonth/Room\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction TotalPaymentInfo({ props}) {\r\n  const [data, setData] = useState({});\r\n  const [onlyPrice, setOnlyPrice] = useState(3)\r\n  const {openModal} = useModal()\r\n\r\n  useEffect(() => {\r\n    let totalRoom = 0;\r\n    let totalElectric = 0;\r\n    let totalWater = 0;\r\n    let totalElectricUsed = 0;\r\n    let totalWaterUsed = 0;\r\n    let roomCount = [];\r\n    let filteredRooms = null;\r\n    if (onlyPrice === 1) {\r\n      filteredRooms = props.filter((item) => item.GiaPhong >= 1);\r\n    } else {\r\n      filteredRooms = props.filter((item) => item.GiaPhong === 0);\r\n    }\r\n\r\n    filteredRooms.forEach((item) => {\r\n      const electricUsed = item.chisodienmoi - item.chisodiencu;\r\n      const waterUsed =\r\n        item.chisonuoclanhmoi +\r\n        item.chisonuocnongmoi -\r\n        (item.chisonuoclanhcu + item.chisonuocnongcu);\r\n\r\n      const hasElectric = electricUsed > 0;\r\n      const hasWater = waterUsed > 0;\r\n\r\n      // Chỉ tính phòng nếu có điện hoặc nước tiêu thụ\r\n      if (hasElectric || hasWater) {\r\n        totalRoom += item.GiaPhong;\r\n        roomCount.push(item.SoPhong);\r\n\r\n        if (hasElectric) {\r\n          totalElectric += electricUsed;\r\n          totalElectricUsed += electricUsed * 4000;\r\n        }\r\n\r\n        if (hasWater) {\r\n          totalWater += waterUsed;\r\n          totalWaterUsed += waterUsed * 20000;\r\n        }\r\n      }\r\n    });\r\n\r\n    if(roomCount.length) {\r\n      setData({\r\n        totalRoom: totalRoom.toLocaleString(),\r\n        totalElectric: totalElectric > 0 ? totalElectric : 0,\r\n        totalWater: totalWater > 0 ? totalWater : 0,\r\n        totalElectricUsed:\r\n          totalElectricUsed > 0 ? totalElectricUsed.toLocaleString() : 0,\r\n        totalWaterUsed:\r\n          totalWaterUsed > 0 ? totalWaterUsed.toLocaleString() : 0,\r\n        roomCount: roomCount.length\r\n          ? roomCount.join(\", \")\r\n          : \"Không có phòng nào phù hợp\",\r\n      });\r\n    }else{\r\n      setOnlyPrice(3)\r\n    }\r\n\r\n    \r\n  }, [onlyPrice]); // nên thêm dependency là props nếu nó có thể thay đổi\r\n\r\n  return (\r\n    <div className={cx(\"container\")}>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={(e) => setOnlyPrice(2)} className={cx(\"btn-summary\")}>\r\n          Tổng kết hóa đơn phòng trống\r\n        </button>\r\n        <button onClick={(e) => setOnlyPrice(1)}  className={cx(\"btn-summary\", \"btn-total\")}>\r\n          Tổng kết hóa đơn phòng hiện có\r\n        </button>\r\n      </div>\r\n      {onlyPrice == 3 && <div className={cx(\"center\")}><span>Hiện chưa có dữ liệu được nạp vui lòng thử lại sau khi nạp dữ liệu</span></div>}\r\n\r\n{(onlyPrice === 1 || onlyPrice === 2) && (\r\n  <div className={cx(\"result\")}>\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Phân loại</strong> {onlyPrice === 2 ? \"Các phòng chưa có khách\" : \"Các phòng có khách\"}\r\n    </div>\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Tổng số phòng đã tính:</strong> Phòng: {data.roomCount}\r\n    </div>\r\n\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Tổng lượng điện sử dụng:</strong> {data.totalElectric} kWh\r\n    </div>\r\n\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Tổng tiền điện:</strong> {data.totalElectricUsed} đồng\r\n    </div>\r\n\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Tổng lượng nước sử dụng:</strong> {data.totalWater} m³\r\n    </div>\r\n\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Tổng tiền nước:</strong> {data.totalWaterUsed} đồng\r\n    </div>\r\n\r\n    <div className={cx(\"result-item\")}>\r\n      <strong>Tổng tiền phòng (cố định):</strong> {data.totalRoom} đồng\r\n    </div>\r\n\r\n    <div className={cx(\"result-item\")}>\r\n      <button onClick={(e) => openModal(<Room />)} className={cx(\"button\")}>⬅️ Quay lại</button>\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TotalPaymentInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./PaymentInfo.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport ListRoom from \"../Room\";\r\nimport TotalPaymentInfo from \"./TotalPaymentInfo\";\r\nimport { GetUpdateRoom } from \"api\";\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction PayMentInfo({ props }) {\r\n  const { openModal } = useModal();\r\n  const {data, setData} = useState({})\r\n\r\n  const HandleRefresh = async () => {\r\n    const confirmRefresh = window.confirm(\r\n      \"Khi làm mới hóa đơn, số liệu nước mới và điện mới sẽ được chuyển thành số liệu cũ. Bạn có chắc chắn muốn làm mới hóa đơn không?\"\r\n    );\r\n    if (!confirmRefresh) {\r\n      alert(\"Đã hủy thao tác làm mới hóa đơn\");\r\n      return;\r\n    }\r\n  \r\n    const password = prompt(\"Nhập mật khẩu để làm mới hóa đơn\");\r\n    if (password !== \"0786566176\") {\r\n      alert(\"Mật khẩu không đúng, không thể làm mới hóa đơn\");\r\n      return;\r\n    }\r\n  \r\n    let position = 0;\r\n    \r\n    // Dùng for...of để xử lý async tuần tự\r\n    for (const item of props) {\r\n      position++;\r\n  \r\n      const object = {\r\n        hovaten: item.hovaten,\r\n        GiaPhong: item.GiaPhong,\r\n        chisodiencu: item.chisodienmoi, // mới -> cũ\r\n        chisodienmoi: 0,                 // reset mới\r\n        chisonuoclanhcu: item.chisonuoclanhmoi,\r\n        chisonuoclanhmoi: 0,\r\n        chisonuocnongcu: item.chisonuocnongmoi,\r\n        chisonuocnongmoi: 0,\r\n        sinhhoatchung: item.sinhhoatchung,\r\n        ghichu: item.ghichu,\r\n      };\r\n  \r\n      const response = await GetUpdateRoom(item._id, object);\r\n  \r\n      if (response && position >= props.length) {\r\n        openModal(<ListRoom />);\r\n      }\r\n    }\r\n  };\r\n  \r\n\r\n  const handleBack = () => {\r\n    openModal(<ListRoom />);\r\n  };\r\n\r\n  const Total = () => {\r\n    const data = props\r\n    openModal(<TotalPaymentInfo props={data} only={1} />);\r\n\r\n  }\r\n\r\n  return (\r\n    <div className={cx(\"invoice-container\")}>\r\n    <h2 className={cx(\"invoice-title\")}>Danh sách hóa đơn thanh toán</h2>\r\n    \r\n    <div className={cx(\"invoice-summary\")}>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={() => Total()} className={cx(\"btn-summary\", \"btn-total\")}>\r\n          Tổng kết\r\n        </button>\r\n      </div>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={() => HandleRefresh()} className={cx(\"btn-summary\", \"btn-refresh\")}>\r\n          Làm mới\r\n        </button>\r\n      </div>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={handleBack} className={cx(\"btn-summary\", \"btn-back\")}>\r\n          Quay lại\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  \r\n\r\n      <div className={cx(\"invoice-list\")}>\r\n        {props.filter((item) => item.GiaPhong > 0).map((item) => {\r\n          const dientieuthu = item.chisodienmoi - item.chisodiencu;\r\n          const nuoctieuthu =\r\n            item.chisonuoclanhmoi -\r\n            item.chisonuoclanhcu +\r\n            item.chisonuocnongmoi -\r\n            item.chisonuocnongcu;\r\n          const coastNuoc = nuoctieuthu > 0 ? nuoctieuthu * 20000 : 0;\r\n          const coastDien = dientieuthu > 0 ? dientieuthu * 4000 : 0;\r\n          const total =\r\n            coastNuoc + coastDien + item.sinhhoatchung + item.GiaPhong;\r\n          return (\r\n            <div className={cx(\"invoice-card\")}>\r\n              <h3 className={cx(\"customer-name\")}>\r\n                {item.hovaten} - {item.SoPhong}\r\n              </h3>\r\n              <div className={cx(\"invoice-info\")}>\r\n                <span className={cx(\"divider\")}>-----------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Điện mới: {item.chisodienmoi} kWh\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Điện cũ: {item.chisodiencu} kWh\r\n                  </div>\r\n                  \r\n                </div>\r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước lạnh mới: {item.chisonuoclanhmoi} m³\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước lạnh cũ: {item.chisonuoclanhcu} m³\r\n                  </div>\r\n                </div>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước nóng mới: {item.chisonuocnongmoi} m³\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước nóng cũ: {item.chisonuocnongcu} m³\r\n                  </div>\r\n                </div>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                <div className={cx(\"info-line\")}>\r\n                    Tổng nước mới: {item.chisonuoclanhmoi + item.chisonuocnongmoi} m³\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Tổng nước cũ: {item.chisonuoclanhcu + item.chisonuocnongcu} m³\r\n                  </div>\r\n                  \r\n                </div>\r\n              \r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                 <div className={cx(\"info-line\")}>\r\n                    Giá phòng: {item.GiaPhong.toLocaleString()}đ\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Phí Sinh hoạt: {item.sinhhoatchung.toLocaleString()}đ\r\n                  </div>\r\n                </div>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Điện tiêu thụ: {dientieuthu >= 0 ? dientieuthu : 0} kWh\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước tiêu thụ: {nuoctieuthu >= 0 ? nuoctieuthu : 0} m³\r\n                  </div>\r\n                </div>\r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Tiền điện: {coastDien.toLocaleString()}đ<br></br>Giá điện: {\" \"}\r\n                    {dientieuthu >= 0 ? `${dientieuthu} x 4.000đ` : '0'}đ\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Tiền nước: {coastNuoc.toLocaleString()}đ<br></br>Giá\r\n                    nước: {nuoctieuthu >= 0 ? `${nuoctieuthu} x 20.000đ` : '0'}đ\r\n                  </div>\r\n                </div>\r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <span className={cx(\"total-amount\")}>Tổng thanh toán: {total.toLocaleString()}</span>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PayMentInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { GetAllRoomsMonth, GetUpdateRoom, deleteRoomV2 } from \"api\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./Room.module.scss\";\r\nimport AddRoomMonth from \"./AddRoomMonth/AddRoomMonth\";\r\nimport { FaTrash, FaEdit } from \"react-icons/fa\";\r\nimport AdjustRoomMonth from \"./AdjustRoom/AdjustRoom\";\r\nimport PayMentInfo from \"./PaymentInfo/PaymentInfo\";\r\nimport Telegram from \"component/Telegram/Telegram\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListRoom() {\r\n  const [ListRoom, setListRoom] = useState([]);\r\n  const { openModal } = useModal();\r\n  const getListRoom = async () => {\r\n    const response = await GetAllRoomsMonth();\r\n    if (response) {\r\n      setListRoom(response.data);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getListRoom();\r\n  }, []);\r\n\r\n  const HandleAdjustRoom = async (id, key) => {\r\n    const input = prompt(`Vui lòng nhập chỉ số`);\r\n\r\n    if (input) {\r\n      let value;\r\n\r\n      if (input.includes(\"+\")) {\r\n        const parts = input.split(\"+\");\r\n        const base = parseFloat(parts[0]) || 0;\r\n        const plus = parseFloat(parts[1]) || 0;\r\n        value = base + plus;\r\n      } else {\r\n        value = parseFloat(input);\r\n      }\r\n\r\n      if (!isNaN(value)) {\r\n        const object = { [key]: value };\r\n        const response = await GetUpdateRoom(id, object);\r\n        if (response) {\r\n          getListRoom();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleOpenAddRoom = () => {\r\n    openModal(<AddRoomMonth list={ListRoom} />);\r\n  };\r\n\r\n  const handleDeleteRoom = async (id) => {\r\n    const password = prompt(\"Bạn hãy nhập mật khẩu để xóa phòng?\");\r\n    if (password !== \"0786566176\") {\r\n      alert(\"Mật khẩu không đúng!\");\r\n      return;\r\n    }\r\n\r\n    const response = await deleteRoomV2(id);\r\n    if (response) {\r\n      alert(\"Xóa phòng thành công!\");\r\n      getListRoom();\r\n    }\r\n  };\r\n\r\n  const handlePaymentInfo = () => {\r\n    // const filterCoastRoom = ListRoom.filter((item) => item.GiaPhong !== 0);\r\n\r\n    // const isValid = filterCoastRoom.every(\r\n    //   (item) => item.chisodienmoi !== 0 && item.chisonuoclanhmoi !== 0\r\n    // );\r\n    // if (!isValid) {\r\n    //   alert(\r\n    //     \"Để tạo hóa đơn, hãy tạo mới chỉ số điện nước của tất cả các phòng\"\r\n    //   );\r\n    //   return;\r\n    // }\r\n\r\n    openModal(<PayMentInfo props={ListRoom}/>);\r\n  };\r\n\r\n\r\n  const handleOpenAjust = (item) => {\r\n    openModal(<AdjustRoomMonth props={item} />);\r\n  }\r\n\r\n  const handleOpenTelegram = () => {\r\n    openModal(<Telegram props={1}/>)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className={cx(\"search\")}>\r\n          <button\r\n            onClick={(e) => handleOpenAddRoom()}\r\n            className={cx(\"search-button\")}\r\n          >\r\n            Thêm phòng\r\n          </button>\r\n          <button\r\n            onClick={(e) => handlePaymentInfo()}\r\n            className={cx(\"search-button\")}\r\n          >\r\n            Tạo Hóa Đơn\r\n          </button>\r\n          <button\r\n            onClick={(e) => handleOpenTelegram()}\r\n            className={cx(\"search-button\")}\r\n          >\r\n            Điều khiển qua Telegram\r\n          </button>\r\n        </div>\r\n        <table className={cx(\"water-table-history-table\")}>\r\n          <thead>\r\n            <tr>\r\n              <th>STT</th>\r\n              <th>Số Phòng</th>\r\n              <th>Giá Phòng</th>\r\n              <th>Chỉ số tiêu thụ điện</th>\r\n              <th>Chỉ số tiêu thụ nước</th>\r\n              <th>Sinh hoạt</th>\r\n              <th>Trạng thái</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className={cx(\"water-table-data\")}>\r\n            {ListRoom.length > 0 ? (\r\n              ListRoom.map((item, index) => (\r\n                <tr key={index}>\r\n                  <td>{index + 1}</td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        {item.SoPhong}\r\n                        <a\r\n                          onClick={() => HandleAdjustRoom(item._id, \"SoPhong\")}\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        {item.GiaPhong.toLocaleString()}Đ\r\n                        <a\r\n                          onClick={() => HandleAdjustRoom(item._id, \"GiaPhong\")}\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      \r\n                      <span>\r\n                        Điện mới: {item.chisodienmoi}\r\n                        <a\r\n                          onClick={() => HandleAdjustRoom(item._id, \"chisodienmoi\")}\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n\r\n                      <span>\r\n                        Nước nóng mới: {item.chisonuocnongmoi}   \r\n                        <a\r\n                          onClick={() =>\r\n                            HandleAdjustRoom(item._id, \"chisonuocnongmoi\")\r\n                          }\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >+</a>\r\n                      </span>\r\n\r\n                      <span>\r\n                        Nước lạnh mới: {item.chisonuoclanhmoi}   \r\n                        <a\r\n                          onClick={() =>\r\n                            HandleAdjustRoom(item._id, \"chisonuoclanhmoi\")\r\n                          }\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >+  </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        {item.sinhhoatchung.toLocaleString()}Đ\r\n                        <a\r\n                          onClick={() =>\r\n                            HandleAdjustRoom(item._id, \"sinhhoatchung\")\r\n                          }\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        <a onClick={(e) => handleOpenAjust(item)} className={cx(\"plus-minus-button\", \"icon\")}>\r\n                          <FaEdit />\r\n                        </a>\r\n                        <a\r\n                          onClick={(e) => handleDeleteRoom(item._id)}\r\n                          className={cx(\"plus-minus-button\", \"icon\")}\r\n                        >\r\n                          <FaTrash />\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td\r\n                  colSpan=\"7\"\r\n                  style={{\r\n                    textAlign: \"center\",\r\n                    padding: \"20px\",\r\n                    fontStyle: \"italic\",\r\n                  }}\r\n                >\r\n                  Không có bảng nào được ghi\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ListRoom;\r\n","\r\nimport React from 'react';\r\nimport styles from './Inventory.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport { useEffect, useState } from 'react';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport ListWater from './ListWater';\r\nimport { TestInventory,TestInventory2 } from 'api';\r\n\r\n\r\nconst cx = classNames.bind(styles)\r\n\r\nfunction Inventory() {\r\n\r\n    const [waterList, setWaterList] = useState([]);        // Dữ liệu hiển thị\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 40;\r\n    const {openModal} = useModal();\r\n\r\n    // Lấy danh sách nước\r\n    const getWaterList = async () => {\r\n        console.log(\"ham da duoc goi\")\r\n        try {\r\n            const data = await TestInventory();\r\n            if (data) {\r\n                console.log(data)\r\n                setWaterList(data);     // Hiển thị mặc định\r\n            }\r\n\r\n            return data\r\n        } catch (error) {\r\n            console.error(\"Lỗi khi lấy danh sách nước:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getWaterList();\r\n    }, []);\r\n\r\n    // Tính toán phân trang\r\n    const indexOfLastItem = currentPage * itemsPerPage;\r\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n    const currentItems = waterList.slice(indexOfFirstItem, indexOfLastItem);\r\n    \r\n\r\n    const nextPage = () => {\r\n        if (currentPage < totalPages()) {\r\n            setCurrentPage(currentPage + 1);\r\n        }\r\n    };\r\n\r\n    const prevPage = () => {\r\n        if (currentPage > 1) {\r\n            setCurrentPage(currentPage - 1);\r\n        }\r\n    };\r\n\r\n    const totalPages = () => {\r\n        return Math.ceil(waterList.length / itemsPerPage);\r\n    };\r\n\r\n\r\n    const HandleBack = () => {  \r\n        \r\n        openModal(<ListWater />); // Mở modal với nội dung là component ListWater\r\n    }\r\n\r\n    const resetWt = async() => { \r\n        const password = prompt(\"Để reset bạn cần nhập mật khẩu: \")\r\n        if(password !== \"0786566176\") return alert(\"Mật khẩu không đúng\")\r\n        const data = await TestInventory2();\r\n        if(data) {\r\n            openModal(<ListWater />); // Mở modal với nội dung là component ListWater\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className={cx(\"search\")}>\r\n\r\n                <button onClick={(e) => HandleBack()} className={cx(\"search-button\")}>Quay lại</button>\r\n                <button onClick={(e) => resetWt()} className={cx(\"search-button\", \"news\")}>Làm mới</button>\r\n            </div>\r\n            <table className={cx(\"water-table-history-table\")}>\r\n                <thead>\r\n                    <tr>\r\n                        <th>STT</th>\r\n                        <th>Loại Nước</th>\r\n                        <th>Số lượng đầu</th>\r\n                        <th>Số lượng bán</th>\r\n                        <th>Số lượng cuối</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className={cx(\"water-table-data\")}>\r\n                    {currentItems.length > 0 ? (\r\n                        currentItems.map((item, index) => (\r\n                            \r\n                            <tr key={index}>\r\n                                <td>{index + 1}</td>\r\n                                <td>Nước {item.tenNuoc}</td>\r\n                                <td><span>{item.soLuongDau}</span></td>\r\n                                <td><span>{item.ban}</span></td>\r\n                                <td><span>{item.thucTeCuoiKy}</span></td>\r\n                                \r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"8\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                                Không có bảng nào được ghi\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination Controls */}\r\n            <div className={cx(\"water-table-pagination\")}>\r\n                <div className={cx(\"water-table-notification\")}>\r\n                    <span>Trang {currentPage} of {totalPages()}</span>\r\n                </div>\r\n                <div className={cx(\"water-table-controls\")}>\r\n                    <button onClick={prevPage} disabled={currentPage === 1}>\r\n                        Trang trước\r\n                    </button>\r\n                    <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n                        Trang sau\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Inventory;","import React, { useEffect, useState } from 'react';\r\nimport styles from './ListWater.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport { fetchWaterList, updateWater } from 'api';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport Inventory from 'component/WaterManager/Inventory';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListWater() {\r\n    const { openModal } = useModal();\r\n    const [search, setSearch] = useState(\"\");\r\n    const [waterList, setWaterList] = useState([]);        // Dữ liệu hiển thị\r\n    const [originalList, setOriginalList] = useState([]);  // Dữ liệu gốc\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 40;\r\n\r\n    // Lấy danh sách nước\r\n    const getWaterList = async () => {\r\n        try {\r\n            const data = await fetchWaterList();\r\n            if (data) {\r\n                setOriginalList(data);  // Lưu bản gốc\r\n                setWaterList(data);     // Hiển thị mặc định\r\n            }\r\n\r\n            return data\r\n        } catch (error) {\r\n            console.error(\"Lỗi khi lấy danh sách nước:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getWaterList();\r\n    }, []);\r\n\r\n\r\n    const handleSearch = (e) => {   \r\n        if(search) {\r\n            const filtered = originalList.filter((item) => item.tenNuoc.toLowerCase().includes(search.toLowerCase()));\r\n            setWaterList(filtered); \r\n            return\r\n        }\r\n\r\n        setWaterList(originalList); // Nếu không có gì thì hiển thị lại danh sách gốc\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleSearch(search)\r\n    }, [search])\r\n\r\n  \r\n\r\n    // Tính toán phân trang\r\n    const indexOfLastItem = currentPage * itemsPerPage;\r\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n    const currentItems = waterList.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n    const nextPage = () => {\r\n        if (currentPage < totalPages()) {\r\n            setCurrentPage(currentPage + 1);\r\n        }\r\n    };\r\n\r\n    const prevPage = () => {\r\n        if (currentPage > 1) {\r\n            setCurrentPage(currentPage - 1);\r\n        }\r\n    };\r\n\r\n    const totalPages = () => {\r\n        return Math.ceil(waterList.length / itemsPerPage);\r\n    };\r\n\r\n    // Cập nhật số lượng nước khi bán\r\n    const handleAddWater = async (name, type) => { \r\n        const amount = prompt(\"Nhập số lượng nước đã bán?\\nNếu muốn trừ số lượng -(số lượng muốn trừ)\");\r\n        if (amount) {\r\n            let object\r\n            if(type == \"nhap\") {\r\n                object = {\r\n                    tenNuoc: name,    \r\n                    nhap: amount || 0,\r\n                };\r\n            }else if(type == \"ban\") {\r\n                object = {\r\n                    tenNuoc: name,    \r\n                    soLuong: amount || 0,    \r\n                };\r\n            }\r\n            const updated = await updateWater(object);\r\n            if (updated) {\r\n                const response = await getWaterList();  // Cập nhật lại danh sách\r\n                alert(\"Nạp dữ liệu thành công\")\r\n                \r\n                if (search) {\r\n                    // Tự động lọc lại khi có tìm kiếm\r\n                    const filtered = response.filter((item) =>\r\n                        item.tenNuoc.toLowerCase().includes(search.toLowerCase())\r\n                    );\r\n                    setWaterList(filtered);\r\n                }\r\n            }\r\n        }\r\n    };\r\n     \r\n    const handleInventory = () => {\r\n        openModal(<Inventory />)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={cx(\"search\")}>\r\n                <input \r\n                    value={search || \"\"} \r\n                    onChange={(e) => setSearch(e.target.value)} \r\n                    type=\"text\" \r\n                    placeholder=\"Tìm kiếm...\" \r\n                    className={cx(\"search-input\")} \r\n                />\r\n                <button onClick={(e) => handleInventory()} className={cx(\"search-button\")}>Kiểm hàng</button>\r\n            </div>\r\n            <table className={cx(\"water-table-history-table\")}>\r\n                <thead>\r\n                    <tr>\r\n                        <th>STT</th>\r\n                        <th>Loại Nước</th>\r\n                        <th>Số lượng đầu</th>\r\n                        <th>Số lượng nhập</th>\r\n                        <th>Số lượng bán</th>\r\n                        <th>Số lượng cuối</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className={cx(\"water-table-data\")}>\r\n                    {currentItems.length > 0 ? (\r\n                        currentItems.map((item, index) => (\r\n                            <tr key={index}>\r\n                                <td>{indexOfFirstItem + index + 1}</td>\r\n                                <td>{item.tenNuoc}</td>\r\n                                <td>{item.soLuongDau}</td>\r\n                                <td>{item.nhap}\r\n                                    <a\r\n                                        className={cx(\"plus-minus-button\")}\r\n                                        onClick={() => handleAddWater(item.tenNuoc, \"nhap\")}\r\n                                    >\r\n                                        +\r\n                                    </a>    \r\n                                </td>\r\n                                <td>\r\n                                    {item.ban}{\" \"}\r\n                                    <a\r\n                                        className={cx(\"plus-minus-button\")}\r\n                                        onClick={() => handleAddWater(item.tenNuoc, \"ban\")}\r\n                                    >\r\n                                        +\r\n                                    </a>\r\n                                </td>\r\n                                <td>{item.thucTeCuoiKy}</td>\r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"8\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                                Không có bảng nào được ghi\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination Controls */}\r\n            <div className={cx(\"water-table-pagination\")}>\r\n                <div className={cx(\"water-table-notification\")}>\r\n                    <span>Trang {currentPage} of {totalPages()}</span>\r\n                </div>\r\n                <div className={cx(\"water-table-controls\")}>\r\n                    <button onClick={prevPage} disabled={currentPage === 1}>\r\n                        Trang trước\r\n                    </button>\r\n                    <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n                        Trang sau\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListWater;\r\n","import React from 'react';\r\nimport styles from './Header.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport HistoryRoom from 'component/RoomDaily/History/HistoryRoom';\r\nimport ListRoomDetail from 'component/RoomDaily/ListRoomDetail/ListRoomDetail';\r\nimport ListRoom from 'component/RoomMonth/Room';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport ListWater from 'component/WaterManager/ListWater';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst Header = () => {\r\n    const { openModal } = useModal();\r\n    const handleOpenHistoryRoom = () => {\r\n        openModal(<HistoryRoom />);\r\n    }\r\n\r\n    const handleOpenListRoom = () => {  \r\n        openModal(<ListRoomDetail />);\r\n    }\r\n\r\n    const handleOpenWaterManager = () => {  \r\n        openModal(<ListWater />);\r\n    }\r\n\r\n\r\n    const handleOpenListRoomMonth = () => {  \r\n        openModal(<ListRoom />);\r\n    }\r\n    return (\r\n        <header className={cx('header')}>\r\n            <nav className={cx('header__nav')}>\r\n                <ul className={cx('header__menu')}>\r\n                    <li className={cx('header__item')}>\r\n                        <a href=\"/\" className={cx('header__link')}>Trang chủ</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenHistoryRoom()}  >Lịch sử</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenListRoom()}>Danh sách phòng ngày</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenListRoomMonth()}>Danh sách phòng tháng</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenWaterManager()}>Quản lý nước</a>\r\n                    </li>\r\n                </ul>\r\n            </nav>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;","import { useRef } from \"react\";\r\n\r\nexport const useDebounceHandler = () => {\r\n  const debounceTimers = useRef({});\r\n\r\n\r\n  const debounce = (key, newVal, oldVal, callback, delay = 800) => {\r\n    console.log(\"hàm này hoạt động\")\r\n    if (newVal === oldVal) return;\r\n\r\n    if (debounceTimers.current[key]) {\r\n      clearTimeout(debounceTimers.current[key]);\r\n    }\r\n\r\n    debounceTimers.current[key] = setTimeout(() => {\r\n      callback();\r\n      delete debounceTimers.current[key];\r\n      console.log(\"da goi lai\")\r\n    }, delay);\r\n  };\r\n\r\n  return debounce;\r\n};\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./Room.module.scss\";\r\nimport { formatTimeValue, formatDateValue } from \"../dateUtils\";\r\nimport { useDebounceHandler } from \"../debounce\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst Room = ({ room, handleInputChange, setCurrentTime, calculate }) => {\r\n  const debounce = useDebounceHandler();\r\n  const [tempDates, setTempDates] = useState({});\r\n  const checkDateRef = useRef({});\r\n  const originalRef = useRef({});\r\n\r\n  // Hàm xử lý thay đổi input\r\n  const handleChange = (type, roomNumber, e) => {\r\n    const newValue = e.target.value;\r\n\r\n    // Lấy giá trị ban đầu từ ref hoặc tính toán từ room nếu chưa có giá trị\r\n    const originalValue = originalRef.current[`${type}-${roomNumber}`] ??\r\n      (type === \"date\" ? formatDateValue(room.checkInDate) : formatTimeValue(room.checkInDate));\r\n\r\n    // Cập nhật giá trị mới vào originalRef để theo dõi sự thay đổi\r\n    originalRef.current[`${type}-${roomNumber}`] = newValue;\r\n\r\n    // Cập nhật state (tempDates) với giá trị mới\r\n    setTempDates((prev) => ({\r\n      ...prev,\r\n      [`${type}-${roomNumber}`]: newValue,\r\n    }));\r\n\r\n    // Gọi debounce sau khi cập nhật state\r\n    debounce(\r\n      `${type}-${roomNumber}`,\r\n      newValue,\r\n      originalValue,\r\n      () => {\r\n        // Truyền đúng dữ liệu vào handleInputChange\r\n        handleInputChange(roomNumber, {\r\n          type,\r\n          value: newValue,\r\n          ...(type === \"checkTimeDate\"\r\n            ? {\r\n                date: tempDates[`checkInDate-${room.roomNumber}`] ?? formatDateValue(room.checkInDate),\r\n              }\r\n            : {\r\n                time: tempDates[`checkTimeDate-${room.roomNumber}`] ?? formatTimeValue(room.checkInDate),\r\n              }),\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  // Hàm khởi tạo flatpickr\r\n  const initFlatpickr = () => {\r\n    if (!checkDateRef.current[room.roomNumber]) return;\r\n\r\n    const refs = checkDateRef.current[room.roomNumber];\r\n\r\n    flatpickr(refs.checkindate, {\r\n      dateFormat: \"d-m-Y\",\r\n     \r\n      onChange: () => handleChange(\"checkInDate\", room.roomNumber, { target: { value: refs.checkindate.value } }), // Gọi handleChange khi chọn ngày\r\n    });\r\n\r\n    flatpickr(refs.checkoutdate, {\r\n      dateFormat: \"d-m-Y\",\r\n      //onChange: () => handleChange(\"checkOutDate\", room.roomNumber, { target: { value: refs.checkoutdate.value } }), // Gọi handleChange khi chọn ngày\r\n    });\r\n\r\n    flatpickr(refs.checkintime, {\r\n      enableTime: true,\r\n      noCalendar: true,\r\n      dateFormat: \"H:i\",\r\n      time_24hr: true,\r\n      minuteIncrement: 60,\r\n      onChange: () => handleChange(\"checkTimeDate\", room.roomNumber, { target: { value: refs.checkintime.value } }), // Gọi handleChange khi chọn thời gian\r\n    });\r\n\r\n    flatpickr(refs.checkouttime, {\r\n      enableTime: true,\r\n      noCalendar: true,\r\n      dateFormat: \"H:i\",\r\n      time_24hr: true,\r\n      minuteIncrement: 60,\r\n      \r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    initFlatpickr();\r\n  }, [room.roomNumber]);\r\n\r\n  // Hàm để gán ref cho các input\r\n  const setRef = (el, key) => {\r\n    if (!checkDateRef.current[room.roomNumber]) {\r\n      checkDateRef.current[room.roomNumber] = {};\r\n    }\r\n    if (el) {\r\n      checkDateRef.current[room.roomNumber][key] = el;\r\n    }\r\n  };\r\n\r\n  // Hàm tính tiền\r\n  const handleCalculate = () => {\r\n    calculate(room.roomNumber, checkDateRef);\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"room\")}>\r\n      <h3>Phòng {String(room.roomNumber).padStart(3, \"0\")}</h3>\r\n\r\n      {/* Check-in */}\r\n      <div className={cx(\"time-container\")}>\r\n        <input\r\n          ref={(el) => setRef(el, \"checkindate\")}\r\n          type=\"text\"\r\n          id={`checkin-date-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n          value={tempDates[`checkInDate-${room.roomNumber}`] ?? formatDateValue(room.checkInDate)}\r\n          onChange={(e) => handleChange(\"checkInDate\", room.roomNumber, e)}\r\n        />\r\n        <input\r\n          ref={(el) => setRef(el, \"checkintime\")}\r\n          type=\"text\"\r\n          id={`checkin-time-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n          value={tempDates[`checkTimeDate-${room.roomNumber}`] ?? formatTimeValue(room.checkInDate)}\r\n          onChange={(e) => handleChange(\"checkTimeDate\", room.roomNumber, e)}\r\n        />\r\n      </div>\r\n\r\n      {/* Check-out */}\r\n      <div className={cx(\"time-container\")}>\r\n        <input\r\n          ref={(el) => setRef(el, \"checkoutdate\")}\r\n          type=\"text\"\r\n          id={`checkout-date-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n          \r\n          \r\n        />\r\n        <input\r\n          ref={(el) => setRef(el, \"checkouttime\")}\r\n          type=\"text\"\r\n          id={`checkout-time-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n         \r\n         \r\n        />\r\n      </div>\r\n\r\n      {/* Buttons */}\r\n      <div className={cx(\"btn-container\")}>\r\n        <div className={cx(\"btn-top\")}>\r\n          <button className={cx(\"check-in\")} onClick={() => setCurrentTime(\"checkin\", room.roomNumber, checkDateRef)}>\r\n            Nhận phòng\r\n          </button>\r\n          <button className={cx(\"check-out\")} onClick={() => setCurrentTime(\"checkout\", room.roomNumber, checkDateRef)}>\r\n            Trả phòng\r\n          </button>\r\n        </div>\r\n        <div className={cx(\"btn-bottom\")}>\r\n          <button className={cx(\"btn-calculate\")} onClick={handleCalculate}>\r\n            Tính tiền\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Room from \"./Room\";\r\nimport {\r\n  fetchRoomsList,\r\n  editRoom,\r\n  saveRoomHistory,\r\n  deleteRoomData,\r\n} from \"../../api\"; // Giả sử hàm này sẽ fetch dữ liệu từ API\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./Room.module.scss\";\r\nimport { convertToStandardDateFormat, convertToISODate } from \"../dateUtils\";\r\nimport { useModal } from \"../Modal/ModalContext\";\r\n\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst RoomList = () => {\r\n  const [rooms, setRooms] = useState([]);\r\n  const depositRef = useRef(null);\r\n  const deposit2Ref = useRef(null);\r\n\r\n  const { openModal, closeModal } = useModal();\r\n\r\n  useEffect(() => {\r\n    const loadRooms = async () => {\r\n      const fetchedRooms = await fetchRoomsList();\r\n      const sortedRooms = fetchedRooms.sort(\r\n        (a, b) => a.roomNumber - b.roomNumber\r\n      );\r\n      setRooms(sortedRooms);\r\n    };\r\n\r\n    loadRooms();\r\n  }, []);\r\n\r\n  const handleInputChange = async (roomNumber, data) => {\r\n    let date;\r\n    if (data.type === \"checkTimeDate\") {\r\n      date = data.date + \" \" + data.value;\r\n    } else {\r\n      date = data.value + \" \" + data.time;\r\n    }\r\n    await editRoom(String(roomNumber), { checkInDate: date });\r\n  };\r\n\r\n  const setCurrentTime = async (type, roomNumber, ref) => {\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleDateString(\"vi-VN\"); // \"24/04/2025\"\r\n    const hours = String(now.getHours()).padStart(2, \"0\");\r\n    const minutes = String(now.getMinutes()).padStart(2, \"0\");\r\n    const timeStr = `${hours}:${minutes}`;\r\n\r\n    const dateStrBK = convertToStandardDateFormat(dateStr, timeStr); // GIỮ NGUYÊN LOGIC\r\n\r\n    if (type === \"checkin\") {\r\n      const checkinDateInput = ref.current[roomNumber][\"checkindate\"];\r\n      const checkinTimeInput = ref.current[roomNumber][\"checkintime\"];\r\n\r\n      if (checkinDateInput && checkinDateInput._flatpickr) {\r\n        checkinDateInput.value = dateStr; // Hiển thị trực tiếp\r\n        checkinDateInput._flatpickr.setDate(dateStr, true, \"d-m-Y\");\r\n      }\r\n\r\n      if (checkinTimeInput && checkinTimeInput._flatpickr) {\r\n        checkinTimeInput.value = timeStr;\r\n        checkinTimeInput._flatpickr.setDate(timeStr, true, \"H:i\");\r\n      }\r\n\r\n      const response = await editRoom(String(roomNumber), {\r\n        checkInDate: dateStrBK,\r\n      });\r\n      if (response) return window.location.reload();\r\n\r\n      \r\n    } else {\r\n      const checkoutDateInput = ref.current[roomNumber][\"checkoutdate\"];\r\n      const checkoutTimeInput = ref.current[roomNumber][\"checkouttime\"];\r\n\r\n      if (checkoutDateInput && checkoutDateInput._flatpickr) {\r\n        checkoutDateInput.value = dateStr;\r\n        checkoutDateInput._flatpickr.setDate(dateStr, true, \"d-m-Y\");\r\n      }\r\n\r\n      if (checkoutTimeInput && checkoutTimeInput._flatpickr) {\r\n        checkoutTimeInput.value = timeStr;\r\n        checkoutTimeInput._flatpickr.setDate(timeStr, true, \"H:i\");\r\n      }\r\n\r\n     \r\n    }\r\n  };\r\n\r\n  const calculate = (roomNumber, data) => {\r\n    const ref = data;\r\n    const checkInDate = convertToISODate(\r\n      ref.current[roomNumber][\"checkindate\"].value\r\n    );\r\n    const checkInTime = ref.current[roomNumber][\"checkintime\"].value;\r\n    const checkOutDate = convertToISODate(\r\n      ref.current[roomNumber][\"checkoutdate\"].value\r\n    );\r\n    const checkOutTime = ref.current[roomNumber][\"checkouttime\"].value;\r\n\r\n    if (!checkInDate || !checkInTime || !checkOutDate || !checkOutTime) {\r\n      return openModal(\r\n        <p style={{ textAlign: \"center\" }}>Vui lòng nhập đầy đủ thời gian.</p>\r\n      );\r\n    }\r\n\r\n    const start = new Date(`${checkInDate}T${checkInTime}`);\r\n    const end = new Date(`${checkOutDate}T${checkOutTime}`);\r\n\r\n    if (end <= start) {\r\n      return openModal(\r\n        <p style={{ textAlign: \"center\" }}>\r\n          Thời gian trả phòng cần được thiết lập muộn hơn thời gian nhận phòng\r\n          để đảm bảo hợp lệ.\r\n        </p>\r\n      );\r\n    }\r\n\r\n    let total = 0;\r\n    const notes = [];\r\n    const diffMs = end - start;\r\n    const diffMinutes = Math.ceil(diffMs / 60000);\r\n    const diffHours = Math.ceil(diffMs / 3600000);\r\n    const startHour = start.getHours();\r\n    const endHour = end.getHours();\r\n    const isSameDay = start.toDateString() === end.toDateString();\r\n    const isNightStay =\r\n      startHour >= 19 &&\r\n      startHour <= 23 &&\r\n      endHour >= 0 &&\r\n      endHour <= 2 &&\r\n      diffHours <= 9;\r\n\r\n    const dataRoom = rooms.find((room) => room.roomNumber === roomNumber);\r\n\r\n    // Danh sách ngày lễ\r\n    const holidays = {\r\n      \"01-01\": \"Tết Dương Lịch\",\r\n      \"30-04\": \"Giải phóng miền Nam\",\r\n      \"01-05\": \"Quốc tế Lao động\",\r\n      \"02-09\": \"Quốc khánh\",\r\n    };\r\n\r\n    // Hàm đếm ngày lễ\r\n    function getHolidayDays(start, end) {\r\n      const holidayCounts = {};\r\n      const current = new Date(start);\r\n      current.setHours(0, 0, 0, 0);\r\n      const endDate = new Date(end);\r\n      endDate.setHours(0, 0, 0, 0);\r\n\r\n      while (current <= endDate) {\r\n        const currentStr = current\r\n          .toLocaleDateString(\"vi-VN\", { day: \"2-digit\", month: \"2-digit\" })\r\n          .replace(/\\//g, \"-\");\r\n        if (holidays[currentStr]) {\r\n          holidayCounts[holidays[currentStr]] =\r\n            (holidayCounts[holidays[currentStr]] || 0) + 1;\r\n        }\r\n        current.setDate(current.getDate() + 1);\r\n      }\r\n      return holidayCounts;\r\n    }\r\n\r\n    // ----- Tính giá -----\r\n    let surcharge = 0;\r\n    let holidaySurcharge = 0;\r\n\r\n    if (isSameDay || isNightStay) {\r\n      // Thuê theo giờ\r\n      total = dataRoom.firstHour;\r\n      notes.push(`Giờ đầu: ${dataRoom.firstHour.toLocaleString()} VNĐ`);\r\n\r\n      const extraMinutes = diffMinutes - 60;\r\n      const extraHoursCharged =\r\n        extraMinutes > 0 ? Math.floor((extraMinutes + 45) / 60) : 0;\r\n\r\n      if (extraHoursCharged > 0) {\r\n        let temp = new Date(start);\r\n        temp.setMinutes(temp.getMinutes() + 60); // Bỏ 1 giờ đầu\r\n\r\n        let totalExtraHourSurcharge = 0;\r\n        let holidayHours = 0;\r\n\r\n        for (let i = 0; i < extraHoursCharged; i++) {\r\n          const currentStr = temp\r\n            .toLocaleDateString(\"vi-VN\", { day: \"2-digit\", month: \"2-digit\" })\r\n            .replace(/\\//g, \"-\");\r\n          const isHoliday = holidays[currentStr];\r\n          const hourPrice = dataRoom.extraHour + (isHoliday ? 10000 : 0);\r\n          totalExtraHourSurcharge += hourPrice;\r\n          if (isHoliday) holidayHours++;\r\n          temp.setHours(temp.getHours() + 1);\r\n        }\r\n\r\n        notes.push(\r\n          `Phụ thu: ${extraHoursCharged} giờ x ${dataRoom.extraHour.toLocaleString()} VNĐ ${\r\n            holidayHours > 0 ? `(Ngày lễ: ${holidayHours} giờ)` : \"\"\r\n          } = ${totalExtraHourSurcharge.toLocaleString()} VNĐ`\r\n        );\r\n        total += totalExtraHourSurcharge;\r\n      }\r\n    } else {\r\n      // Thuê qua đêm\r\n      if (startHour >= 5 && startHour <= 12) {\r\n        const surchargeHours = 12 - startHour;\r\n        if (surchargeHours > 0) {\r\n          surcharge += surchargeHours * dataRoom.extraHour;\r\n          notes.push(\r\n            `Phụ thu nhận phòng sớm: ${surchargeHours} giờ x ${dataRoom.extraHour.toLocaleString()} VNĐ`\r\n          );\r\n        }\r\n      }\r\n\r\n      const firstDayEnd = new Date(start);\r\n      firstDayEnd.setDate(firstDayEnd.getDate() + 1);\r\n      firstDayEnd.setHours(12, 0, 0, 0);\r\n\r\n      if (end <= firstDayEnd) {\r\n        total = dataRoom.daily;\r\n        notes.push(`Tính 1 ngày: ${dataRoom.daily.toLocaleString()} VNĐ`);\r\n      } else {\r\n        const lastNoon = new Date(end);\r\n        lastNoon.setHours(12, 0, 0, 0);\r\n        const fullDays = Math.round((lastNoon - firstDayEnd) / 86400000) + 1;\r\n        total = fullDays * dataRoom.daily;\r\n        notes.push(`${fullDays} ngày x ${dataRoom.daily.toLocaleString()} VNĐ`);\r\n      }\r\n\r\n      if (endHour >= 12) {\r\n        const extraHours = endHour - 12;\r\n        if (extraHours > 0) {\r\n          surcharge += extraHours * dataRoom.extraHour;\r\n          notes.push(\r\n            `Phụ thu trả phòng muộn: ${extraHours} giờ x ${dataRoom.extraHour.toLocaleString()} VNĐ`\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    let holidayHours = 0;\r\n    // -------- Tính phụ thu lễ --------\r\n    if (!isSameDay) {\r\n      const holidayCounts = getHolidayDays(start, end);\r\n      for (const name in holidayCounts) {\r\n        holidaySurcharge += holidayCounts[name] * 100000;\r\n        notes.push(`Qua đêm ngày lễ ${name}: +100,000 VNĐ`);\r\n      }\r\n\r\n      if (endHour >= 12) {\r\n        const extraHours = endHour - 12;\r\n        if (extraHours > 0) {\r\n          const temp = new Date(start);\r\n          while (temp <= end) {\r\n            const currentStr = temp\r\n              .toLocaleDateString(\"vi-VN\", { day: \"2-digit\", month: \"2-digit\" })\r\n              .replace(/\\//g, \"-\");\r\n            if (holidays[currentStr]) {\r\n              holidayHours = extraHours;\r\n              holidaySurcharge += extraHours * 10000;\r\n              break; // chỉ cần 1 lần gặp ngày lễ là cộng\r\n            }\r\n            temp.setHours(temp.getHours() + 1);\r\n          }\r\n        }\r\n      }\r\n    } \r\n\r\n    // Ghi chú tổng số giờ phụ thu lễ\r\n    if (holidayHours > 0) {\r\n      notes.push(\r\n        `Phụ thu ${holidayHours} giờ lễ x 10,000 VNĐ = ${(\r\n          holidayHours * 10000\r\n        ).toLocaleString()} VNĐ`\r\n      );\r\n    }\r\n\r\n    // 3. Ghi chú tổng phụ thu lễ\r\n    if (holidaySurcharge > 0) {\r\n      notes.push(`Tổng phụ thu lễ: +${holidaySurcharge.toLocaleString()} VNĐ`);\r\n    }\r\n\r\n    // ----------------- Kết thúc -----------------\r\n    total += surcharge + holidaySurcharge;\r\n\r\n    // Ghi chú thời gian ở thực\r\n    notes.push(\r\n      `Thời gian ở thực: ${\r\n        diffMinutes >= 1440\r\n          ? `${Math.floor(diffMinutes / 1440)} ngày${\r\n              diffMinutes % 1440\r\n                ? ` ${Math.floor((diffMinutes % 1440) / 60)} giờ ${\r\n                    diffMinutes % 60\r\n                  } phút`\r\n                : \"\"\r\n            }`\r\n          : `${Math.floor(diffMinutes / 60)} giờ ${diffMinutes % 60} phút`\r\n      }`\r\n    );\r\n\r\n    const objectDatatoSaveHistory = {\r\n      totalAmount: total.toLocaleString(),\r\n      checkInDate: start.toLocaleString(),\r\n      checkOutDate: end.toLocaleString(),\r\n      description: notes.map((note) => `<span>${note}</span>`).join(\"\"),\r\n    };\r\n\r\n    const HandleSaveDatatoHistory = async () => {\r\n      ref.current[roomNumber][\"checkindate\"].value = \"\";\r\n      ref.current[roomNumber][\"checkintime\"].value = \"\";\r\n      ref.current[roomNumber][\"checkoutdate\"].value = \"\";\r\n      ref.current[roomNumber][\"checkouttime\"].value = \"\";\r\n      deleteRoomData(roomNumber);\r\n      await saveRoomHistory(roomNumber, objectDatatoSaveHistory);\r\n      closeModal();\r\n    };\r\n\r\n    const handleDeposit = () => {\r\n      console.log(depositRef);\r\n      const rawValue = depositRef.current.value.replace(/\\./g, \"\");\r\n      const numberValue = parseInt(rawValue, 10) || 0;\r\n      const formatted = numberValue.toLocaleString();\r\n      depositRef.current.value = formatted;\r\n      deposit2Ref.current.innerText =\r\n        (numberValue - total).toLocaleString() < 0\r\n          ? 0\r\n          : (numberValue - total).toLocaleString();\r\n    };\r\n    openModal(\r\n      <div className={cx(\"calculate\")}>\r\n        <h3 className={cx(\"calculate-header\")}>Chi tiết tính tiền</h3>\r\n        <p className={cx(\"room-info\")}>\r\n          <span className={cx(\"title\")}>Phòng:</span> <span>{roomNumber}</span>\r\n        </p>\r\n        <p className={cx(\"check-in-time\")}>\r\n          <span className={cx(\"title\")}>Nhận phòng:</span>{\" \"}\r\n          <span>{start.toLocaleString()}</span>\r\n        </p>\r\n        <p className={cx(\"check-out-time\")}>\r\n          <span className={cx(\"title\")}>Trả phòng:</span>{\" \"}\r\n          <span>{end.toLocaleString()}</span>\r\n        </p>\r\n        {notes.map((note, i) => (\r\n          <p className={cx(\"additional-note\")} key={i}>\r\n            <span>{note}</span>\r\n          </p>\r\n        ))}\r\n        <p className={cx(\"total-amount\")}>\r\n          <span>Tổng tiền:</span> <span>{total.toLocaleString()} VNĐ</span>\r\n        </p>\r\n        <p className={cx(\"total-amount\")}>\r\n          <span>Khách đưa:</span>{\" \"}\r\n          <input\r\n            ref={depositRef}\r\n            type=\"text\"\r\n            onChange={(e) => handleDeposit(e.target.value)}\r\n            placeholder=\"Nhập số tiền khách hàng\"\r\n          />\r\n          <span>\r\n            Thối lại khách: <b ref={deposit2Ref}>0</b>\r\n          </span>\r\n        </p>\r\n        <div className={cx(\"control\")}>\r\n          <button\r\n            className={cx(\"button\")}\r\n            onClick={() => HandleSaveDatatoHistory()}\r\n          >\r\n            Lưu dữ liệu\r\n          </button>\r\n          <button className={cx(\"button\")} onClick={() => closeModal()}>\r\n            Tạm tính\r\n          </button>\r\n        </div>\r\n        <div className={cx(\"footer-note\")}>\r\n          <span>Phần mềm được tạo bởi Hữu Đức</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div id={cx(\"room\")}>\r\n      {rooms && rooms.length > 0 ? (\r\n        rooms.map((room) => (\r\n          <Room\r\n            key={room.roomNumber}\r\n            room={room}\r\n            handleInputChange={handleInputChange}\r\n            setCurrentTime={setCurrentTime}\r\n            calculate={calculate}\r\n          />\r\n        ))\r\n      ) : (\r\n        <span>Hiện tại chưa có phòng nào được thêm vào dữ liệu</span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomList;\r\n","import { useModal } from \"./ModalContext\";\r\nimport styles from './modal.module.scss'; // Đảm bảo SCSS của bạn được import ở đây\r\nimport classNames from 'classnames/bind';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\n\r\nconst GlobalModal = () => {\r\n  const { showModal, closeModal, modalContent } = useModal();\r\n\r\n  if (!showModal) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={cx(\"overlay\")}></div>\r\n      <div className={cx(\"modal-wrapper\")}>\r\n        <div className={`${cx('modal-parent')}`}>\r\n          <div className={`${cx('modal-content')}`} onClick={(e) => e.stopPropagation()}>\r\n            <div onClick={closeModal} className={cx(\"modal-close\")}>x</div>\r\n            {modalContent}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GlobalModal;","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './App.module.scss';\nimport Header from './layout/Header';\nimport RoomList from './component/RoomDaily/RoomList';\nimport { ModalProvider } from './component/Modal/ModalContext';\nimport GlobalModal from './component/Modal/GlobalModal.js';\n\n\nconst cx = classNames.bind(styles);\n\nfunction App() {\n  return (\n\n    <ModalProvider>\n      <div className={cx('App')}>\n        <Header />\n        <RoomList />\n        <GlobalModal />\n       \n      </div>\n    </ModalProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}