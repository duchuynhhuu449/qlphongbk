(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],[,,,,,,,,,,function(e,t,c){e.exports={room:"Room_room__3dn-v","edit-room":"Room_edit-room__2UOE_","time-container":"Room_time-container__1cqrG","btn-container":"Room_btn-container__3bsDN","btn-top":"Room_btn-top__3f26V","check-in":"Room_check-in__uGDzQ","check-out":"Room_check-out__245g2",button:"Room_button__3GK7E","btn-calculate":"Room_btn-calculate__12o8-",calculate:"Room_calculate__NsbGe",borderRun:"Room_borderRun__1BOZk","calculate-header":"Room_calculate-header__2oNqo","room-info":"Room_room-info__1i3is","check-in-time":"Room_check-in-time__P7-KB","check-out-time":"Room_check-out-time__2e3DF","total-amount":"Room_total-amount__2ZyRh",title:"Room_title__2iwMF","additional-note":"Room_additional-note__w53VK",control:"Room_control__1S4n6","footer-note":"Room_footer-note__307lz","title-table":"Room_title-table__3aXL3","filter-container":"Room_filter-container__3TJ1h"}},,,,,function(e,t,c){e.exports={App:"App_App__1vo9O",borderRun:"App_borderRun__2iWKz"}},function(e,t,c){e.exports={header:"Header_header__1jUDE",header__nav:"Header_header__nav__2dn1u",header__menu:"Header_header__menu__31mMF",header__item:"Header_header__item__2tILp",header__link:"Header_header__link__SinI9"}},function(e,t,c){e.exports={"title-table":"History_title-table__228zP","history-table":"History_history-table__IC4Mj","add-room":"History_add-room__XPnpc",pagination:"History_pagination__2zJno",notification:"History_notification__-NJI2",controls:"History_controls__-CZIH"}},function(e,t,c){e.exports={"title-table":"ListRoomDetail_title-table__ml7io","history-table":"ListRoomDetail_history-table__1vKnO","add-room":"ListRoomDetail_add-room__33fcw",pagination:"ListRoomDetail_pagination__1xP6h",notification:"ListRoomDetail_notification__2XcTJ",controls:"ListRoomDetail_controls__16woz"}},function(e,t,c){e.exports={container:"AddRoom_container__2M6M9",title:"AddRoom_title__3u_SX",form:"AddRoom_form__1RRjs",formGroup:"AddRoom_formGroup__3GaUv",label:"AddRoom_label__2wxth",input:"AddRoom_input__1MztV",button:"AddRoom_button__2XxF9",message:"AddRoom_message__2miCS"}},function(e,t,c){e.exports={search:"ListWater_search__1kSQX","title-table":"ListWater_title-table__2mf65","water-table-history-table":"ListWater_water-table-history-table__2cswU","plus-minus-button":"ListWater_plus-minus-button__1Rrs8","water-table-pagination":"ListWater_water-table-pagination__3SGE1","water-table-notification":"ListWater_water-table-notification__26L_G","water-table-controls":"ListWater_water-table-controls__1KLWs"}},function(e,t,c){e.exports={search:"Inventory_search__2uETV",news:"Inventory_news__2U8HP","title-table":"Inventory_title-table__wiBor","water-table-history-table":"Inventory_water-table-history-table__2gojk","water-table-pagination":"Inventory_water-table-pagination___jlke","water-table-notification":"Inventory_water-table-notification__259yr","water-table-controls":"Inventory_water-table-controls__1INCz"}},function(e,t,c){e.exports={overlay:"modal_overlay__2wYXf","modal-parent":"modal_modal-parent__2mNpV","modal-content":"modal_modal-content__26qwn","modal-close":"modal_modal-close__2J9y6"}},,,,,,,function(e,t,c){},,,,,,,function(e,t,c){"use strict";c.r(t);var n=c(3),a=c.n(n),i=c(14),r=c.n(i),s=(c(29),c(4)),o=c.n(s),l=c(15),h=c.n(l),d=c(16),j=c.n(d),b=c(17),u=c.n(b);const m=c(38).a.create({baseURL:"http://localhost:3000",timeout:1e4}),p=async(e,t)=>{try{return(await e).data}catch(c){throw new Error(t)}},O=async(e,t)=>await p(m.post("/api/edit-room",{roomNumber:e,newDetails:t}),"L\u1ed7i khi ch\u1ec9nh s\u1eeda ph\xf2ng:"),_=async()=>{const e=await p(m.get("/api/rooms"),"L\u1ed7i khi l\u1ea5y danh s\xe1ch ph\xf2ng:");return e&&localStorage.setItem("rooms",JSON.stringify(e)),e},x=async e=>{const t="all"===e?"/api/history/all":`/api/history/${e}`;return await p(m.get(t),"L\u1ed7i khi l\u1ea5y danh s\xe1ch ph\xf2ng:")};var g=c(5);c(13);function N(e){if(!/^\d{2}-\d{2}-\d{4}$/.test(e))return"";const[t,c,n]=e.split("-");return`${n}-${c}-${t}`}const k=e=>{if(!e)return"";const[t,c,n]=e.split(" ")[0].split("-");return n+"-"+c+"-"+t},f=e=>{if(!e)return"";const[,t]=e.split(" ");return(null===t||void 0===t?void 0:t.substring(0,5))||""};var y=c(0);const v=o.a.bind(u.a);var w=function(){const[e,t]=Object(n.useState)([]),[c,a]=Object(n.useState)(1);Object(n.useEffect)((()=>{(async()=>{const e=await x("all"),c=await e.sort(((e,t)=>new Date(t.checkOutDate)-new Date(e.checkInDate)));t(c)})()}),[]),console.log(e);const i=5*c,r=i-5,s=e.slice(r,i),o=()=>Math.ceil(e.length/5);return Object(n.useEffect)((()=>{Object(g.a)("#startTime",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:60}),Object(g.a)("#endTime",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:60}),Object(g.a)("#startDate",{dateFormat:"d-m-Y",maxDate:"today"}),Object(g.a)("#endDate",{dateFormat:"d-m-Y"})}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{className:v("title-table"),children:"L\u1ecbch S\u1eed Thu\xea Ph\xf2ng"}),Object(y.jsxs)("table",{className:v("history-table"),children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"S\u1ed1 Ph\xf2ng"}),Object(y.jsx)("th",{children:"Ng\xe0y V\xe0o"}),Object(y.jsx)("th",{children:"Ng\xe0y Ra"}),Object(y.jsx)("th",{children:"T\u1ed5ng Ti\u1ec1n"}),Object(y.jsx)("th",{children:"Ghi Ch\xfa"}),Object(y.jsx)("th",{children:"H\xe0nh \u0110\u1ed9ng"})]})}),Object(y.jsx)("tbody",{className:v("data"),children:s&&s.length>0?s.map(((c,n)=>Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:c.roomNumber}),Object(y.jsxs)("td",{children:["Ng\xe0y ",k(c.checkInDate)," ",f(c.checkInDate).split(":")[0]," gi\u1edd ",f(c.checkInDate).split(":")[1]," ph\xfat"]}),Object(y.jsxs)("td",{children:["Ng\xe0y ",k(c.checkOutDate)," ",f(c.checkOutDate).split(":")[0]," gi\u1edd ",f(c.checkOutDate).split(":")[1]," ph\xfat"]}),Object(y.jsx)("td",{children:c.totalAmount}),Object(y.jsx)("td",{dangerouslySetInnerHTML:{__html:c.description}}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{onClick:()=>(async c=>{try{if(200===(await x(c)).status){const n=e.filter((e=>e._id!==c));t(n)}else console.error("Kh\xf4ng th\u1ec3 x\xf3a l\u1ecbch s\u1eed, vui l\xf2ng th\u1eed l\u1ea1i.")}catch(n){console.error("L\u1ed7i khi x\xf3a l\u1ecbch s\u1eed:",n)}})(c._id),children:"X\xf3a"})})]},n))):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"6",style:{textAlign:"center",padding:"20px",fontStyle:"italic"},children:"Kh\xf4ng c\xf3 b\u1ea3ng n\xe0o \u0111\u01b0\u1ee3c ghi"})})})]}),Object(y.jsxs)("div",{className:v("pagination"),children:[Object(y.jsx)("div",{className:v("notification"),children:Object(y.jsxs)("span",{children:["Trang ",c," of ",o()]})}),Object(y.jsxs)("div",{className:v("controls"),children:[Object(y.jsx)("button",{onClick:()=>{c>1&&a(c-1)},disabled:1===c,children:"Trang tr\u01b0\u1edbc"}),Object(y.jsx)("button",{onClick:()=>{c<o()&&a(c+1)},disabled:c===o(),children:"Trang sau"})]})]})]})},S=c(18),D=c.n(S);const C=Object(n.createContext)(),L=e=>{let{children:t}=e;const[c,a]=Object(n.useState)(!1),[i,r]=Object(n.useState)(null);return Object(y.jsx)(C.Provider,{value:{showModal:c,modalContent:i,openModal:e=>{r(e),a(!0)},closeModal:()=>{a(!1),r(null)}},children:t})},T=()=>Object(n.useContext)(C);var $=c(19),H=c.n($);const R=o.a.bind(H.a);var I=function(){const[e,t]=Object(n.useState)({roomNumber:"",dailyprice:"",firstHour:"",extraHour:""}),[c,a]=Object(n.useState)(""),i=async t=>{const{roomNumber:c,dailyprice:n,firstHour:i,extraHour:r}=e;if(c&&n&&i&&r)try{await(async e=>{try{return await p(m.post("/api/addroom",{roomNumber:e.roomNumber,daily:e.dailyprice,firstHour:e.firstHour,extraHour:e.extraHour,checkInDate:"",checkOutDate:""}),"L\u1ed7i khi th\xeam ph\xf2ng")}catch(t){throw new Error(t.message||"Kh\xf4ng th\u1ec3 th\xeam ph\xf2ng, vui l\xf2ng th\u1eed l\u1ea1i!")}})(e)&&a("Th\xeam ph\xf2ng th\xe0nh c\xf4ng!")}catch(s){console.error(s),a(s.message||"C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam ph\xf2ng!")}else a("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin!")};return Object(y.jsxs)("div",{className:R("container"),children:[Object(y.jsx)("h2",{className:R("title"),children:"Th\xeam Ph\xf2ng M\u1edbi"}),Object(y.jsxs)("form",{className:R("form"),id:"roomForm",children:[Object(y.jsxs)("div",{className:R("formGroup"),children:[Object(y.jsx)("label",{className:R("label"),children:"S\u1ed1 ph\xf2ng:"}),Object(y.jsx)("input",{value:e.roomNumber||"",onChange:e=>t((t=>({...t,roomNumber:e.target.value}))),type:"number",id:"roomNumber",required:!0,className:R("input")})]}),Object(y.jsxs)("div",{className:R("formGroup"),children:[Object(y.jsx)("label",{className:R("label"),children:"Gi\xe1 ph\xf2ng ng\xe0y:"}),Object(y.jsx)("input",{value:e.dailyprice||"",onChange:e=>t((t=>({...t,dailyprice:e.target.value}))),type:"number",id:"daily",required:!0,className:R("input")})]}),Object(y.jsxs)("div",{className:R("formGroup"),children:[Object(y.jsx)("label",{className:R("label"),children:"Gi\u1edd \u0111\u1ea7u ti\xean:"}),Object(y.jsx)("input",{value:e.firstHour||"",onChange:e=>t((t=>({...t,firstHour:e.target.value}))),type:"number",id:"firstHour",required:!0,className:R("input")})]}),Object(y.jsxs)("div",{className:R("formGroup"),children:[Object(y.jsx)("label",{className:R("label"),children:"Gi\xe1 th\xeam gi\u1edd:"}),Object(y.jsx)("input",{value:e.extraHour||"",onChange:e=>t((t=>({...t,extraHour:e.target.value}))),type:"number",id:"extraHour",required:!0,className:R("input")})]}),Object(y.jsx)("button",{type:"button",onClick:()=>i(),className:R("button"),children:"Th\xeam Ph\xf2ng"})]}),Object(y.jsx)("p",{id:"message",className:R("message"),children:c})]})};const M=o.a.bind(D.a);var A=function(){const{openModal:e}=T(),[t,c]=Object(n.useState)([]),[a,i]=Object(n.useState)(1);Object(n.useEffect)((()=>{(async()=>{const e=(await _()).sort(((e,t)=>e.roomNumber-t.roomNumber));c(e)})()}),[]);const r=5*a,s=r-5,o=t.slice(s,r),l=()=>Math.ceil(t.length/5);return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{className:M("title-table"),children:"Danh s\xe1ch ph\xf2ng c\u1ee5 th\u1ec3"}),Object(y.jsxs)("table",{className:M("history-table"),children:[Object(y.jsx)("button",{onClick:t=>{e(Object(y.jsx)(I,{}))},className:M("add-room"),children:"Th\xeam ph\xf2ng"}),Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"S\u1ed1 Ph\xf2ng"}),Object(y.jsx)("th",{children:"Gi\xe1 ph\xf2ng"}),Object(y.jsx)("th",{children:"L\u1ecbch s\u1eed thu\xea"}),Object(y.jsx)("th",{children:"H\xe0nh \u0111\u1ed9ng"})]})}),Object(y.jsx)("tbody",{className:M("data"),children:o&&o.length>0?o.map(((t,c)=>Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:["Ph\xf2ng: ",String(t.roomNumber).padStart(3,"0")]}),Object(y.jsxs)("td",{children:[Object(y.jsxs)("span",{children:["Gi\xe1 ph\xf2ng ng\xe0y: ",t.daily.toLocaleString()," VN\u0110"]}),Object(y.jsxs)("span",{children:["Gi\xe1 ph\xf2ng gi\u1edd \u0111\u1ea7u: ",t.firstHour.toLocaleString()," VN\u0110"]}),Object(y.jsxs)("span",{children:[" Gi\xe1 ph\xf2ng gi\u1edd \u0111\u1ea7u: ",t.extraHour.toLocaleString()," VN\u0110"]})]}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{onClick:t=>{e(Object(y.jsx)(w,{}))},children:"Xem ngay"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{onClick:e=>(async e=>{await O(e,{deleted:!0})&&window.location.reload()})(t._id),children:"X\xf3a"})})]},c))):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"6",style:{textAlign:"center",padding:"20px",fontStyle:"italic"},children:"Kh\xf4ng c\xf3 b\u1ea3ng n\xe0o \u0111\u01b0\u1ee3c ghi"})})})]}),Object(y.jsxs)("div",{className:M("pagination"),children:[Object(y.jsx)("div",{className:M("notification"),children:Object(y.jsxs)("span",{children:["Trang ",a," of ",l()]})}),Object(y.jsxs)("div",{className:M("controls"),children:[Object(y.jsx)("button",{onClick:()=>{a>1&&i(a-1)},disabled:1===a,children:"Trang tr\u01b0\u1edbc"}),Object(y.jsx)("button",{onClick:()=>{a<l()&&i(a+1)},disabled:a===l(),children:"Trang sau"})]})]})]})},G=c(20),P=c.n(G),V=c(21),F=c.n(V);const E=o.a.bind(F.a);var K=function(){const[e,t]=Object(n.useState)([]),[c,a]=Object(n.useState)(1),{openModal:i}=T(),r=async()=>{console.log("ham da duoc goi");try{const e=await(async()=>{const e=await p(m.get("/api/kiemhangthuall"),"L\u1ed7i khi l\u1ea5y danh s\xe1ch ph\xf2ng:");return e})();return e&&(console.log(e),t(e)),e}catch(e){console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch n\u01b0\u1edbc:",e)}};Object(n.useEffect)((()=>{r()}),[]);const s=40*c,o=s-40,l=e.slice(o,s),h=()=>Math.ceil(e.length/40),d=async()=>{if("0786566176"!==prompt("\u0110\u1ec3 reset b\u1ea1n c\u1ea7n nh\u1eadp m\u1eadt kh\u1ea9u: "))return alert("M\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang");await(async()=>{if(!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n t\u1ea1o m\u1edbi d\u1eef li\xeau kh\xf4ng? \n H\u1ec7 th\u1ed1ng s\u1ebd t\u1ef1 \u0111\u1ed9ng l\u1ea5y S\u1ed1 l\u01b0\u1ee3ng cu\u1ed1i v\xe0 Chuy\u1ec3n v\u1ec1 l\u1ea1i S\u1ed1 l\u01b0\u1ee3ng \u0110\u1ea7u"))return;const e=await p(m.get("/api/resetwt"),"L\u1ed7i khi l\u1ea5y danh s\xe1ch ph\xf2ng:");return e})()&&i(Object(y.jsx)(W,{}))};return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:E("search"),children:[Object(y.jsx)("button",{onClick:e=>{i(Object(y.jsx)(W,{}))},className:E("search-button"),children:"Quay l\u1ea1i"}),Object(y.jsx)("button",{onClick:e=>d(),className:E("search-button","news"),children:"L\xe0m m\u1edbi"})]}),Object(y.jsxs)("table",{className:E("water-table-history-table"),children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"STT"}),Object(y.jsx)("th",{children:"Lo\u1ea1i N\u01b0\u1edbc"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng \u0111\u1ea7u"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng b\xe1n"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng cu\u1ed1i"})]})}),Object(y.jsx)("tbody",{className:E("water-table-data"),children:l.length>0?l.map(((e,t)=>Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t+1}),Object(y.jsxs)("td",{children:["N\u01b0\u1edbc ",e.tenNuoc]}),Object(y.jsx)("td",{children:Object(y.jsx)("span",{children:e.soLuongDau})}),Object(y.jsx)("td",{children:Object(y.jsx)("span",{children:e.ban})}),Object(y.jsx)("td",{children:Object(y.jsx)("span",{children:e.thucTeCuoiKy})})]},t))):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"8",style:{textAlign:"center",padding:"20px",fontStyle:"italic"},children:"Kh\xf4ng c\xf3 b\u1ea3ng n\xe0o \u0111\u01b0\u1ee3c ghi"})})})]}),Object(y.jsxs)("div",{className:E("water-table-pagination"),children:[Object(y.jsx)("div",{className:E("water-table-notification"),children:Object(y.jsxs)("span",{children:["Trang ",c," of ",h()]})}),Object(y.jsxs)("div",{className:E("water-table-controls"),children:[Object(y.jsx)("button",{onClick:()=>{c>1&&a(c-1)},disabled:1===c,children:"Trang tr\u01b0\u1edbc"}),Object(y.jsx)("button",{onClick:()=>{c<h()&&a(c+1)},disabled:c===h(),children:"Trang sau"})]})]})]})};const X=o.a.bind(P.a);var W=function(){const{openModal:e}=T(),[t,c]=Object(n.useState)(""),[a,i]=Object(n.useState)([]),[r,s]=Object(n.useState)([]),[o,l]=Object(n.useState)(1),h=async()=>{try{const e=await(async()=>{const e=await p(m.get("/api/water"),"L\u1ed7i khi l\u1ea5y danh s\xe1ch ph\xf2ng:");return e})();return e&&(s(e),i(e)),e}catch(e){console.error("L\u1ed7i khi l\u1ea5y danh s\xe1ch n\u01b0\u1edbc:",e)}};Object(n.useEffect)((()=>{h()}),[]),Object(n.useEffect)((()=>{(()=>{if(t){const e=r.filter((e=>e.tenNuoc.toLowerCase().includes(t.toLowerCase())));i(e)}else i(r)})()}),[t]);const d=40*o,j=d-40,b=a.slice(j,d),u=()=>Math.ceil(a.length/40),O=async(e,c)=>{const n=prompt("Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng n\u01b0\u1edbc \u0111\xe3 b\xe1n?\nN\u1ebfu mu\u1ed1n tr\u1eeb s\u1ed1 l\u01b0\u1ee3ng -(s\u1ed1 l\u01b0\u1ee3ng mu\u1ed1n tr\u1eeb)");if(n){let a;"nhap"==c?a={tenNuoc:e,nhap:n||0}:"ban"==c&&(a={tenNuoc:e,soLuong:n||0});const r=await(async e=>{try{return await p(m.post("/api/update-water",{tenNuoc:e.tenNuoc,soLuong:Number(e.soLuong)||0,nhap:Number(e.nhap)||0}),"L\u1ed7i khi th\xeam ph\xf2ng")}catch(t){throw new Error(t.message||"Kh\xf4ng th\u1ec3 th\xeam ph\xf2ng, vui l\xf2ng th\u1eed l\u1ea1i!")}})(a);if(r){const e=await h();if(alert("N\u1ea1p d\u1eef li\u1ec7u th\xe0nh c\xf4ng"),t){const c=e.filter((e=>e.tenNuoc.toLowerCase().includes(t.toLowerCase())));i(c)}}}};return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:X("search"),children:[Object(y.jsx)("input",{value:t||"",onChange:e=>c(e.target.value),type:"text",placeholder:"T\xecm ki\u1ebfm...",className:X("search-input")}),Object(y.jsx)("button",{onClick:t=>{e(Object(y.jsx)(K,{}))},className:X("search-button"),children:"Ki\u1ec3m h\xe0ng"})]}),Object(y.jsxs)("table",{className:X("water-table-history-table"),children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"STT"}),Object(y.jsx)("th",{children:"Lo\u1ea1i N\u01b0\u1edbc"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng \u0111\u1ea7u"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng b\xe1n"}),Object(y.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng cu\u1ed1i"})]})}),Object(y.jsx)("tbody",{className:X("water-table-data"),children:b.length>0?b.map(((e,t)=>Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:j+t+1}),Object(y.jsx)("td",{children:e.tenNuoc}),Object(y.jsx)("td",{children:e.soLuongDau}),Object(y.jsxs)("td",{children:[e.nhap,Object(y.jsx)("a",{className:X("plus-minus-button"),onClick:()=>O(e.tenNuoc,"nhap"),children:"+"})]}),Object(y.jsxs)("td",{children:[e.ban," ",Object(y.jsx)("a",{className:X("plus-minus-button"),onClick:()=>O(e.tenNuoc,"ban"),children:"+"})]}),Object(y.jsx)("td",{children:e.thucTeCuoiKy})]},t))):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"8",style:{textAlign:"center",padding:"20px",fontStyle:"italic"},children:"Kh\xf4ng c\xf3 b\u1ea3ng n\xe0o \u0111\u01b0\u1ee3c ghi"})})})]}),Object(y.jsxs)("div",{className:X("water-table-pagination"),children:[Object(y.jsx)("div",{className:X("water-table-notification"),children:Object(y.jsxs)("span",{children:["Trang ",o," of ",u()]})}),Object(y.jsxs)("div",{className:X("water-table-controls"),children:[Object(y.jsx)("button",{onClick:()=>{o>1&&l(o-1)},disabled:1===o,children:"Trang tr\u01b0\u1edbc"}),Object(y.jsx)("button",{onClick:()=>{o<u()&&l(o+1)},disabled:o===u(),children:"Trang sau"})]})]})]})};const z=o.a.bind(j.a);var J=()=>{const{openModal:e}=T();return Object(y.jsx)("header",{className:z("header"),children:Object(y.jsx)("nav",{className:z("header__nav"),children:Object(y.jsxs)("ul",{className:z("header__menu"),children:[Object(y.jsx)("li",{className:z("header__item"),children:Object(y.jsx)("a",{href:"/",className:z("header__link"),children:"Trang ch\u1ee7"})}),Object(y.jsx)("li",{className:z("header__item"),children:Object(y.jsx)("a",{className:z("header__link"),onClick:()=>{e(Object(y.jsx)(w,{}))},children:"L\u1ecbch s\u1eed"})}),Object(y.jsx)("li",{className:z("header__item"),children:Object(y.jsx)("a",{className:z("header__link"),onClick:()=>{e(Object(y.jsx)(A,{}))},children:"Danh s\xe1ch ph\xf2ng"})}),Object(y.jsx)("li",{className:z("header__item"),children:Object(y.jsx)("a",{className:z("header__link"),onClick:()=>{e(Object(y.jsx)(W,{}))},children:"Qu\u1ea3n l\xfd n\u01b0\u1edbc"})})]})})})},q=c(10),Y=c.n(q);const B=o.a.bind(Y.a);var U=e=>{var t,c;let{room:a,handleInputChange:i,setCurrentTime:r,calculate:s}=e;const o=(()=>{const e=Object(n.useRef)({});return function(t,c,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:800;console.log("h\xe0m n\xe0y ho\u1ea1t \u0111\u1ed9ng"),c!==n&&(e.current[t]&&clearTimeout(e.current[t]),e.current[t]=setTimeout((()=>{a(),delete e.current[t],console.log("da goi lai")}),i))}})(),[l,h]=Object(n.useState)({}),d=Object(n.useRef)({}),j=Object(n.useRef)({}),b=(e,t,c)=>{var n;const r=c.target.value,s=null!==(n=j.current[`${e}-${t}`])&&void 0!==n?n:"date"===e?k(a.checkInDate):f(a.checkInDate);j.current[`${e}-${t}`]=r,h((c=>({...c,[`${e}-${t}`]:r}))),o(`${e}-${t}`,r,s,(()=>{var c,n;i(t,{type:e,value:r,..."checkTimeDate"===e?{date:null!==(c=l[`checkInDate-${a.roomNumber}`])&&void 0!==c?c:k(a.checkInDate)}:{time:null!==(n=l[`checkTimeDate-${a.roomNumber}`])&&void 0!==n?n:f(a.checkInDate)}})}))};Object(n.useEffect)((()=>{(()=>{if(!d.current[a.roomNumber])return;const e=d.current[a.roomNumber];Object(g.a)(e.checkindate,{dateFormat:"d-m-Y",maxDate:"today",onChange:()=>b("checkInDate",a.roomNumber,{target:{value:e.checkindate.value}})}),Object(g.a)(e.checkoutdate,{dateFormat:"d-m-Y",onChange:()=>b("checkOutDate",a.roomNumber,{target:{value:e.checkoutdate.value}})}),Object(g.a)(e.checkintime,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:60,onChange:()=>b("checkTimeDate",a.roomNumber,{target:{value:e.checkintime.value}})}),Object(g.a)(e.checkouttime,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,minuteIncrement:60})})()}),[a.roomNumber]);const u=(e,t)=>{d.current[a.roomNumber]||(d.current[a.roomNumber]={}),e&&(d.current[a.roomNumber][t]=e)};return Object(y.jsxs)("div",{className:B("room"),children:[Object(y.jsxs)("h3",{children:["Ph\xf2ng ",String(a.roomNumber).padStart(3,"0")]}),Object(y.jsxs)("div",{className:B("time-container"),children:[Object(y.jsx)("input",{ref:e=>u(e,"checkindate"),type:"text",id:`checkin-date-${a.roomNumber}`,className:B("time-picker"),value:null!==(t=l[`checkInDate-${a.roomNumber}`])&&void 0!==t?t:k(a.checkInDate),onChange:e=>b("checkInDate",a.roomNumber,e)}),Object(y.jsx)("input",{ref:e=>u(e,"checkintime"),type:"text",id:`checkin-time-${a.roomNumber}`,className:B("time-picker"),value:null!==(c=l[`checkTimeDate-${a.roomNumber}`])&&void 0!==c?c:f(a.checkInDate),onChange:e=>b("checkTimeDate",a.roomNumber,e)})]}),Object(y.jsxs)("div",{className:B("time-container"),children:[Object(y.jsx)("input",{ref:e=>u(e,"checkoutdate"),type:"text",id:`checkout-date-${a.roomNumber}`,className:B("time-picker")}),Object(y.jsx)("input",{ref:e=>u(e,"checkouttime"),type:"text",id:`checkout-time-${a.roomNumber}`,className:B("time-picker")})]}),Object(y.jsxs)("div",{className:B("btn-container"),children:[Object(y.jsxs)("div",{className:B("btn-top"),children:[Object(y.jsx)("button",{className:B("check-in"),onClick:()=>r("checkin",a.roomNumber,d),children:"Nh\u1eadn ph\xf2ng"}),Object(y.jsx)("button",{className:B("check-out"),onClick:()=>r("checkout",a.roomNumber,d),children:"Tr\u1ea3 ph\xf2ng"})]}),Object(y.jsx)("div",{className:B("btn-bottom"),children:Object(y.jsx)("button",{className:B("btn-calculate"),onClick:()=>{s(a.roomNumber,d)},children:"T\xednh ti\u1ec1n"})})]})]})};const Q=o.a.bind(Y.a);var Z=()=>{const[e,t]=Object(n.useState)([]),{openModal:c,closeModal:a}=T();Object(n.useEffect)((()=>{(async()=>{const e=(await _()).sort(((e,t)=>e.roomNumber-t.roomNumber));t(e)})()}),[]);const i=async(e,t)=>{let c;c="checkTimeDate"===t.type?t.date+" "+t.value:t.value+" "+t.time,await O(String(e),{checkInDate:c})},r=async(e,t,c)=>{const n=new Date,a=n.toLocaleDateString("vi-VN"),i=`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`,r=((e,t)=>{const[c,n,a]=e.split("/"),i=`${c.padStart(2,"0")}-${n.padStart(2,"0")}-${a}`;let r;return r=t?`${i} ${t}`:`${i}`,r})(a,i);if("checkin"===e){const e=c.current[t].checkindate,n=c.current[t].checkintime;e&&e._flatpickr&&(e.value=a,e._flatpickr.setDate(a,!0,"d-m-Y")),n&&n._flatpickr&&(n.value=i,n._flatpickr.setDate(i,!0,"H:i"));if(await O(String(t),{checkInDate:r}))return window.location.reload()}else{const e=c.current[t].checkoutdate,n=c.current[t].checkouttime;e&&e._flatpickr&&(e.value=a,e._flatpickr.setDate(a,!0,"d-m-Y")),n&&n._flatpickr&&(n.value=i,n._flatpickr.setDate(i,!0,"H:i")),await O(String(t),{checkOutDate:r})}},s=(t,n)=>{const i=n,r=N(i.current[t].checkindate.value),s=i.current[t].checkintime.value,o=N(i.current[t].checkoutdate.value),l=i.current[t].checkouttime.value;if(!r||!s||!o||!l)return c(Object(y.jsx)("p",{style:{textAlign:"center"},children:"Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\u1eddi gian."}));const h=new Date(`${r}T${s}`),d=new Date(`${o}T${l}`);if(d<=h)return c(Object(y.jsx)("p",{style:{textAlign:"center"},children:"Th\u1eddi gian tr\u1ea3 ph\xf2ng c\u1ea7n \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp mu\u1ed9n h\u01a1n th\u1eddi gian nh\u1eadn ph\xf2ng \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o h\u1ee3p l\u1ec7."}));let j=0;const b=[],u=d-h,O=Math.ceil(u/6e4),_=Math.ceil(u/36e5),x=h.getHours(),g=d.getHours(),k=h.toDateString()===d.toDateString(),f=x>=19&&x<=23&&g>=0&&g<=2&&_<=9,v=e.find((e=>e.roomNumber===t));if(k||f){j=v.firstHour,b.push(`Gi\u1edd \u0111\u1ea7u: ${v.firstHour.toLocaleString()} VN\u0110`);const e=O-60,t=e>0?Math.floor((e+45)/60):0;t>0&&(j+=t*v.extraHour,b.push(`Ph\u1ee5 thu ${t} gi\u1edd x ${v.extraHour.toLocaleString()} VN\u0110`))}else{let e=0;if(x>=6&&x<=12){const t=12-x;t>0&&(e+=2e4*t,b.push(`Ph\u1ee5 thu nh\u1eadn ph\xf2ng s\u1edbm: ${t} gi\u1edd x 20,000 VN\u0110`))}const t=new Date(h);if(t.setDate(t.getDate()+1),t.setHours(12,0,0,0),d<=t)j=v.daily,b.push(`T\xednh 1 ng\xe0y: ${v.daily.toLocaleString()} VN\u0110`);else{const e=new Date(d);e.setHours(12,0,0,0);const c=Math.round((e-t)/864e5)+1;j=c*v.daily,b.push(`${c} ng\xe0y x ${v.daily.toLocaleString()} VN\u0110`)}if(g>=12){const t=g-12;t>0&&(e+=2e4*t,b.push(`Ph\u1ee5 thu tr\u1ea3 ph\xf2ng mu\u1ed9n: ${t} gi\u1edd x 20,000 VN\u0110`))}j+=e}b.push("Th\u1eddi gian \u1edf th\u1ef1c: "+(O>=1440?`${Math.floor(O/1440)} ng\xe0y${O%1440?` ${Math.floor(O%1440/60)} gi\u1edd ${O%60} ph\xfat`:""}`:`${Math.floor(O/60)} gi\u1edd ${O%60} ph\xfat`));const w={totalAmount:j.toLocaleString(),checkInDate:h.toLocaleString(),checkOutDate:d.toLocaleString(),description:b.map((e=>`<span>${e}</span>`)).join("")};c(Object(y.jsxs)("div",{className:Q("calculate"),children:[Object(y.jsx)("h3",{className:Q("calculate-header"),children:"Chi ti\u1ebft t\xednh ti\u1ec1n"}),Object(y.jsxs)("p",{className:Q("room-info"),children:[Object(y.jsx)("span",{className:Q("title"),children:"Ph\xf2ng:"})," ",Object(y.jsx)("span",{children:t})]}),Object(y.jsxs)("p",{className:Q("check-in-time"),children:[Object(y.jsx)("span",{className:Q("title"),children:"Nh\u1eadn ph\xf2ng:"})," ",Object(y.jsx)("span",{children:h.toLocaleString()})]}),Object(y.jsxs)("p",{className:Q("check-out-time"),children:[Object(y.jsx)("span",{className:Q("title"),children:"Tr\u1ea3 ph\xf2ng:"})," ",Object(y.jsx)("span",{children:d.toLocaleString()})]}),b.map(((e,t)=>Object(y.jsx)("p",{className:Q("additional-note"),children:Object(y.jsx)("span",{children:e})},t))),Object(y.jsxs)("p",{className:Q("total-amount"),children:[Object(y.jsx)("span",{children:"T\u1ed5ng ti\u1ec1n:"})," ",Object(y.jsxs)("span",{children:[j.toLocaleString()," VN\u0110"]})]}),Object(y.jsxs)("div",{className:Q("control"),children:[Object(y.jsx)("button",{className:Q("button"),onClick:async()=>{var e;i.current[t].checkindate.value="",i.current[t].checkintime.value="",i.current[t].checkoutdate.value="",i.current[t].checkouttime.value="",e=t,p(m.get(`/api/reset/${e}`),"L\u1ed7i khi reset ph\xf2ng:"),await((e,t)=>p(m.post("/api/history",{roomNumber:e,totalAmount:t.totalAmount,checkInDate:t.checkInDate,checkOutDate:t.checkOutDate,description:t.description}),"L\u1ed7i khi l\u01b0u l\u1ecbch s\u1eed ph\xf2ng:"))(t,w),a()},children:"L\u01b0u d\u1eef li\u1ec7u"}),Object(y.jsx)("button",{className:Q("button"),onClick:a,children:"T\u1ea1m t\xednh"})]}),Object(y.jsx)("div",{className:Q("footer-note"),children:Object(y.jsx)("span",{children:"Ph\u1ea7n m\u1ec1m \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi H\u1eefu \u0110\u1ee9c"})})]}))};return Object(y.jsx)("div",{id:Q("room"),children:e&&e.length>0?e.map((e=>Object(y.jsx)(U,{room:e,handleInputChange:i,setCurrentTime:r,calculate:s},e.roomNumber))):Object(y.jsx)("span",{children:"Hi\u1ec7n t\u1ea1i ch\u01b0a c\xf3 ph\xf2ng n\xe0o \u0111\u01b0\u1ee3c th\xeam v\xe0o d\u1eef li\u1ec7u"})})},ee=c(22),te=c.n(ee);const ce=o.a.bind(te.a);var ne=()=>{const{showModal:e,closeModal:t,modalContent:c}=T();return e?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:ce("overlay")}),Object(y.jsx)("div",{className:ce("modal-wrapper"),children:Object(y.jsx)("div",{className:`${ce("modal-parent")}`,children:Object(y.jsxs)("div",{className:`${ce("modal-content")}`,onClick:e=>e.stopPropagation(),children:[Object(y.jsx)("div",{onClick:t,className:ce("modal-close"),children:"x"}),c]})})})]}):null};const ae=o.a.bind(h.a);var ie=function(){return Object(y.jsx)(L,{children:Object(y.jsxs)("div",{className:ae("App"),children:[Object(y.jsx)(J,{}),Object(y.jsx)(Z,{}),Object(y.jsx)(ne,{})]})})};var re=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,39)).then((t=>{let{getCLS:c,getFID:n,getFCP:a,getLCP:i,getTTFB:r}=t;c(e),n(e),a(e),i(e),r(e)}))};r.a.createRoot(document.getElementById("root")).render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(ie,{})})),re()}],[[36,1,2]]]);
//# sourceMappingURL=main.6029432b.chunk.js.map