{"version":3,"sources":["RoomMonth/PaymentInfo/PaymentInfo.module.scss","component/RoomDaily/Room.module.scss","App.module.scss","layout/Header/Header.module.scss","component/RoomDaily/History/History.module.scss","component/RoomDaily/ListRoomDetail/ListRoomDetail.module.scss","component/RoomDaily/AddRoom/AddRoom.module.scss","RoomMonth/Room.module.scss","RoomMonth/AddRoomMonth/AddRoomMonth.module.scss","RoomMonth/AdjustRoom/AdjustRoom.module.scss","component/WaterManager/ListWater.module.scss","component/WaterManager/Inventory.module.scss","component/Modal/modal.module.scss","api/index.js","component/dateUtils.js","component/RoomDaily/History/HistoryRoom.js","component/Modal/ModalContext.js","component/RoomDaily/AddRoom/AddRoom.js","component/RoomDaily/ListRoomDetail/ListRoomDetail.js","RoomMonth/AddRoomMonth/AddRoomMonth.js","RoomMonth/AdjustRoom/AdjustRoom.js","RoomMonth/PaymentInfo/TotalPaymentInfo.js","RoomMonth/PaymentInfo/PaymentInfo.js","RoomMonth/Room.js","component/WaterManager/Inventory.js","component/WaterManager/ListWater.js","layout/Header/index.js","component/debounce.js","component/RoomDaily/Room.js","component/RoomDaily/RoomList.js","component/Modal/GlobalModal.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","api","axios","create","baseURL","timeout","handleRequest","async","promise","errorMessage","data","error","_error$response","_error$response$data","message","response","Error","editRoom","room","adjust","post","roomNumber","newDetails","fetchRoomsList","get","localStorage","setItem","JSON","stringify","fetchHistory","type","url","GetUpdateRoom","id","object","put","convertToISODate","dateStr","test","day","month","year","split","formatDateValue","datetime","date","formatTimeValue","time","substring","cx","classNames","bind","styles","HistoryRoom","history","setHistory","useState","currentPage","setCurrentPage","useEffect","getHistory","sortedHistory","sort","a","b","Date","checkOutDate","checkInDate","loadHistory","console","log","indexOfLastItem","indexOfFirstItem","currentItems","slice","totalPages","Math","ceil","length","flatpickr","enableTime","noCalendar","dateFormat","time_24hr","minuteIncrement","maxDate","_jsxs","children","_jsx","className","map","item","index","totalAmount","dangerouslySetInnerHTML","__html","description","onClick","idToDelete","status","updatedHistory","filter","_id","handleDeleteItem","colSpan","style","textAlign","padding","fontStyle","prevPage","disabled","nextPage","ModalContext","createContext","ModalProvider","_ref","showModal","setShowModal","modalContent","setModalContent","Provider","value","openModal","content","closeModal","useModal","useContext","AddRoom","setData","dailyprice","firstHour","extraHour","setMessage","handleAddRoom","daily","onChange","e","prev","target","required","ListRoomDetail","ListRoom","setListroom","sortedRooms","String","padStart","toLocaleString","roomID","deleted","window","location","reload","handleEditRoom","AddRoomMonth","deposit","setDeposit","hovaten","SoPhong","GiaPhong","sinhhoatchung","chisodiencu","chisodienmoi","chisonuoclanhcu","chisonuoclanhmoi","chisonuocnongcu","chisonuocnongmoi","ghichu","setTimeout","forEach","key","formattedValue","rawValue","replace","parseInt","handleDeposit","_Fragment","AdjustRoomMonth","props","handleUpdateRoom","TotalPaymentInfo","totalRoom","totalElectric","totalWater","totalElectricUsed","totalWaterUsed","roomCount","electricUsed","waterUsed","hasElectric","hasWater","push","undefined","join","PayMentInfo","Total","confirm","alert","prompt","position","HandleRefresh","handleBack","dientieuthu","nuoctieuthu","coastNuoc","coastDien","total","setListRoom","getListRoom","HandleAdjustRoom","input","includes","parts","parseFloat","isNaN","handleDeleteRoom","deleteRoomV2","list","handleOpenAjust","FaEdit","FaTrash","Inventory","waterList","setWaterList","getWaterList","resetWt","TestInventory2","ListWater","tenNuoc","soLuongDau","ban","thucTeCuoiKy","search","setSearch","originalList","setOriginalList","filtered","toLowerCase","handleSearch","handleAddWater","name","amount","nhap","soLuong","updated","Number","updateWater","placeholder","Header","href","Room","_tempDates3","_tempDates4","handleInputChange","setCurrentTime","calculate","debounce","useDebounceHandler","debounceTimers","useRef","newVal","oldVal","callback","delay","arguments","current","clearTimeout","tempDates","setTempDates","checkDateRef","originalRef","handleChange","_originalRef$current","newValue","originalValue","_tempDates","_tempDates2","initFlatpickr","refs","checkindate","checkoutdate","checkintime","checkouttime","setRef","el","ref","handleCalculate","RoomList","rooms","setRooms","depositRef","deposit2Ref","loadRooms","now","toLocaleDateString","timeStr","getHours","getMinutes","dateStrBK","convertToStandardDateFormat","formattedDate","formattedDateTime","checkinDateInput","checkinTimeInput","_flatpickr","setDate","checkoutDateInput","checkoutTimeInput","checkInTime","checkOutTime","start","end","notes","diffMs","diffMinutes","diffHours","startHour","endHour","isSameDay","toDateString","isNightStay","dataRoom","find","holidays","surcharge","holidaySurcharge","extraMinutes","extraHoursCharged","floor","temp","setMinutes","totalExtraHourSurcharge","holidayHours","i","currentStr","isHoliday","setHours","surchargeHours","firstDayEnd","getDate","lastNoon","fullDays","round","extraHours","holidayCounts","endDate","getHolidayDays","objectDatatoSaveHistory","note","HandleSaveDatatoHistory","saveRoomHistory","numberValue","formatted","innerText","GlobalModal","stopPropagation","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.0015efae.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"invoice-container\":\"PaymentInfo_invoice-container__3NcRS\",\"invoice-title\":\"PaymentInfo_invoice-title__1iDoZ\",\"invoice-summary\":\"PaymentInfo_invoice-summary__2viE-\",\"summary-item\":\"PaymentInfo_summary-item__3JolZ\",\"btn-summary\":\"PaymentInfo_btn-summary__3a7Eb\",\"btn-total\":\"PaymentInfo_btn-total__2ksxY\",\"btn-refresh\":\"PaymentInfo_btn-refresh__1zn1v\",\"btn-back\":\"PaymentInfo_btn-back__2Ts2J\",\"refresh\":\"PaymentInfo_refresh__33nVz\",\"invoice-list\":\"PaymentInfo_invoice-list__K1hyz\",\"invoice-card\":\"PaymentInfo_invoice-card__2wqd0\",\"customer-name\":\"PaymentInfo_customer-name__1Gf2o\",\"invoice-info\":\"PaymentInfo_invoice-info__3S7wD\",\"invoice-charges\":\"PaymentInfo_invoice-charges__1CMkk\",\"divider\":\"PaymentInfo_divider__1T_s2\",\"invoice-info-item\":\"PaymentInfo_invoice-info-item__brzmt\",\"info-line\":\"PaymentInfo_info-line__cS2b2\",\"charge-line\":\"PaymentInfo_charge-line__28Vij\",\"total-amount\":\"PaymentInfo_total-amount__1eLaO\",\"result\":\"PaymentInfo_result__1l9jW\",\"result-item\":\"PaymentInfo_result-item__h3W1w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"room\":\"Room_room__3dn-v\",\"edit-room\":\"Room_edit-room__2UOE_\",\"time-container\":\"Room_time-container__1cqrG\",\"btn-container\":\"Room_btn-container__3bsDN\",\"btn-top\":\"Room_btn-top__3f26V\",\"check-in\":\"Room_check-in__uGDzQ\",\"check-out\":\"Room_check-out__245g2\",\"button\":\"Room_button__3GK7E\",\"btn-calculate\":\"Room_btn-calculate__12o8-\",\"calculate\":\"Room_calculate__NsbGe\",\"borderRun\":\"Room_borderRun__1BOZk\",\"calculate-header\":\"Room_calculate-header__2oNqo\",\"room-info\":\"Room_room-info__1i3is\",\"check-in-time\":\"Room_check-in-time__P7-KB\",\"check-out-time\":\"Room_check-out-time__2e3DF\",\"total-amount\":\"Room_total-amount__2ZyRh\",\"title\":\"Room_title__2iwMF\",\"additional-note\":\"Room_additional-note__w53VK\",\"control\":\"Room_control__1S4n6\",\"footer-note\":\"Room_footer-note__307lz\",\"title-table\":\"Room_title-table__3aXL3\",\"filter-container\":\"Room_filter-container__3TJ1h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1vo9O\",\"borderRun\":\"App_borderRun__2iWKz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1jUDE\",\"header__nav\":\"Header_header__nav__2dn1u\",\"header__menu\":\"Header_header__menu__31mMF\",\"header__item\":\"Header_header__item__2tILp\",\"header__link\":\"Header_header__link__SinI9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title-table\":\"History_title-table__228zP\",\"history-table\":\"History_history-table__IC4Mj\",\"add-room\":\"History_add-room__XPnpc\",\"pagination\":\"History_pagination__2zJno\",\"notification\":\"History_notification__-NJI2\",\"controls\":\"History_controls__-CZIH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title-table\":\"ListRoomDetail_title-table__ml7io\",\"history-table\":\"ListRoomDetail_history-table__1vKnO\",\"add-room\":\"ListRoomDetail_add-room__33fcw\",\"pagination\":\"ListRoomDetail_pagination__1xP6h\",\"notification\":\"ListRoomDetail_notification__2XcTJ\",\"controls\":\"ListRoomDetail_controls__16woz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AddRoom_container__2M6M9\",\"title\":\"AddRoom_title__3u_SX\",\"form\":\"AddRoom_form__1RRjs\",\"formGroup\":\"AddRoom_formGroup__3GaUv\",\"label\":\"AddRoom_label__2wxth\",\"input\":\"AddRoom_input__1MztV\",\"button\":\"AddRoom_button__2XxF9\",\"message\":\"AddRoom_message__2miCS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"Room_search__3q12X\",\"title-table\":\"Room_title-table__2d6o4\",\"water-table-history-table\":\"Room_water-table-history-table__32ZzD\",\"room-item\":\"Room_room-item__1esQf\",\"plus-minus-button\":\"Room_plus-minus-button__2DSRH\",\"icon\":\"Room_icon__1uPD-\",\"water-table-pagination\":\"Room_water-table-pagination__gxe4W\",\"water-table-notification\":\"Room_water-table-notification__2CBqn\",\"water-table-controls\":\"Room_water-table-controls__2RuUn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AddRoomMonth_container__3Ms6p\",\"title\":\"AddRoomMonth_title__ovD8_\",\"form\":\"AddRoomMonth_form__1GIXS\",\"formGroup\":\"AddRoomMonth_formGroup__228oK\",\"label\":\"AddRoomMonth_label__38xGG\",\"input\":\"AddRoomMonth_input__3LVx8\",\"control\":\"AddRoomMonth_control__2FcPx\",\"button\":\"AddRoomMonth_button__20Tf5\",\"message\":\"AddRoomMonth_message__Sjgnm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AdjustRoom_container__GXhqa\",\"title\":\"AdjustRoom_title__23q3z\",\"form\":\"AdjustRoom_form__1rSxt\",\"formGroup\":\"AdjustRoom_formGroup__2nb79\",\"label\":\"AdjustRoom_label__3rm8f\",\"input\":\"AdjustRoom_input__3KHM3\",\"control\":\"AdjustRoom_control__3baM-\",\"button\":\"AdjustRoom_button__sagZb\",\"message\":\"AdjustRoom_message__1rmfI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"ListWater_search__1kSQX\",\"title-table\":\"ListWater_title-table__2mf65\",\"water-table-history-table\":\"ListWater_water-table-history-table__2cswU\",\"plus-minus-button\":\"ListWater_plus-minus-button__1Rrs8\",\"water-table-pagination\":\"ListWater_water-table-pagination__3SGE1\",\"water-table-notification\":\"ListWater_water-table-notification__26L_G\",\"water-table-controls\":\"ListWater_water-table-controls__1KLWs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"Inventory_search__2uETV\",\"news\":\"Inventory_news__2U8HP\",\"title-table\":\"Inventory_title-table__wiBor\",\"water-table-history-table\":\"Inventory_water-table-history-table__2gojk\",\"water-table-pagination\":\"Inventory_water-table-pagination___jlke\",\"water-table-notification\":\"Inventory_water-table-notification__259yr\",\"water-table-controls\":\"Inventory_water-table-controls__1INCz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal_overlay__2wYXf\",\"modal-parent\":\"modal_modal-parent__2mNpV\",\"modal-content\":\"modal_modal-content__26qwn\",\"modal-close\":\"modal_modal-close__2J9y6\"};","import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:3000\",\r\n  timeout: 10000,\r\n});\r\n\r\n// Hàm xử lý promise chung có catch lỗi\r\nconst handleRequest = async (promise, errorMessage) => {\r\n  try {\r\n    const res = await promise;\r\n    return res.data;\r\n  } catch (error) {\r\n    const message = error.response?.data?.message || errorMessage || \"Có lỗi xảy ra!\";\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\n// Các API dưới đây:\r\n\r\nconst editRoom = (room, adjust) => {\r\n  return handleRequest(\r\n    api.post('/api/edit-room', {\r\n      roomNumber: room,\r\n      newDetails: adjust\r\n    }),\r\n    \"Lỗi khi chỉnh sửa phòng\"\r\n  );\r\n};\r\n\r\nconst addRoom = (object) => {\r\n  return handleRequest(\r\n    api.post('/api/addroom', {\r\n      roomNumber: object.roomNumber,\r\n      daily: object.dailyprice,\r\n      firstHour: object.firstHour,\r\n      extraHour: object.extraHour,\r\n      checkInDate: \"\",\r\n      checkOutDate: \"\",\r\n    }),\r\n    \"Lỗi khi thêm phòng\"\r\n  );\r\n};\r\n\r\nconst saveRoomHistory = (room, adjust) => {\r\n  return handleRequest(\r\n    api.post('/api/history', {\r\n      roomNumber: room,\r\n      totalAmount: adjust.totalAmount,\r\n      checkInDate: adjust.checkInDate,\r\n      checkOutDate: adjust.checkOutDate,\r\n      description: adjust.description,\r\n    }),\r\n    \"Lỗi khi lưu lịch sử phòng\"\r\n  );\r\n};\r\n\r\nconst deleteRoomData = (room) => {\r\n  return handleRequest(\r\n    api.get(`/api/reset/${room}`),\r\n    \"Lỗi khi reset phòng\"\r\n  );\r\n};\r\n\r\nconst fetchRoomsList = async () => {\r\n  const data = await handleRequest(\r\n    api.get(\"/api/rooms\"),\r\n    \"Lỗi khi lấy danh sách phòng\"\r\n  );\r\n  if (data) {\r\n    localStorage.setItem(\"rooms\", JSON.stringify(data));\r\n  }\r\n  return data;\r\n};\r\n\r\nconst fetchHistory = (type) => {\r\n  const url = type === 'all' ? \"/api/history/all\" : `/api/history/${type}`;\r\n  return handleRequest(api.get(url), \"Lỗi khi lấy lịch sử phòng\");\r\n};\r\n\r\nconst fetchWaterList = () => {\r\n  return handleRequest(\r\n    api.get(\"/api/water\"),\r\n    \"Lỗi khi lấy danh sách nước\"\r\n  );\r\n};\r\n\r\nconst updateWater = (object) => {\r\n  return handleRequest(\r\n    api.post('/api/update-water', {\r\n      tenNuoc: object.tenNuoc,\r\n      soLuong: Number(object.soLuong) || 0,\r\n      nhap: Number(object.nhap) || 0,\r\n    }),\r\n    \"Lỗi khi cập nhật nước\"\r\n  );\r\n};\r\n\r\nconst TestInventory = () => {\r\n  return handleRequest(\r\n    api.get(\"/api/kiemhangthuall\"),\r\n    \"Lỗi khi kiểm hàng thử\"\r\n  );\r\n};\r\n\r\nconst TestInventory2 = async () => {\r\n  const check = window.confirm(\"Bạn có chắc muốn tạo mới dữ liệu không?\\nHệ thống sẽ tự động lấy Số lượng cuối và Chuyển về lại Số lượng Đầu\");\r\n  if (!check) return null;\r\n  \r\n  return handleRequest(\r\n    api.get(\"/api/resetwt\"),\r\n    \"Lỗi khi reset số lượng nước\"\r\n  );\r\n};\r\n\r\nconst GetAllRoomsMonth = () => {\r\n  return handleRequest(\r\n    api.get(\"/api/getallroom/v2\"),\r\n    \"Lỗi khi tải danh sách phòng tháng\"\r\n  );\r\n};\r\n\r\nconst GetUpdateRoom = (id, object) => {\r\n  return handleRequest(\r\n    api.put(`/api/update/${id}/v2`, object),\r\n    \"Lỗi khi cập nhật phòng\"\r\n  );\r\n};\r\n\r\nconst addRoomV2 = (object) => {\r\n  return handleRequest(\r\n    api.post(`/api/addroom/v2`, {\r\n      hovaten: object.hovaten,\r\n      SoPhong: object.SoPhong,\r\n      GiaPhong: object.GiaPhong,\r\n      chisodiencu: object.chisodiencu || 0,\r\n      chisodienmoi: 0,\r\n      chisonuoclanhcu: object.chisonuoclanhcu || 0,\r\n      chisonuoclanhmoi: 0,\r\n      chisonuocnongcu: object.chisonuocnongcu || 0,\r\n      chisonuocnongmoi: 0,\r\n      sinhhoatchung: object.sinhhoatchung || 0,\r\n      ghichu: \"Chưa có ghi chú\",\r\n    }),\r\n    \"Lỗi khi thêm phòng mới\"\r\n  );\r\n};\r\n\r\nconst deleteRoomV2 = async (id) => {\r\n  const check = window.confirm(\"Bạn có chắc muốn xóa không?\");\r\n  if (!check) return null;\r\n\r\n  return handleRequest(\r\n    api.get(`/api/delete/${id}/v2`),\r\n    \"Lỗi khi xóa phòng\"\r\n  );\r\n};\r\n\r\n// Xuất toàn bộ\r\nexport { \r\n  api, \r\n  editRoom, \r\n  saveRoomHistory, \r\n  deleteRoomData, \r\n  fetchRoomsList, \r\n  fetchHistory, \r\n  addRoom, \r\n  fetchWaterList, \r\n  updateWater, \r\n  TestInventory, \r\n  TestInventory2, \r\n  GetAllRoomsMonth, \r\n  GetUpdateRoom, \r\n  addRoomV2, \r\n  deleteRoomV2 \r\n};\r\n","// Hàm lấy giờ Việt Nam\r\nexport function getVietnamTime() {\r\n    const now = new Date();\r\n    const utc = now.getTime() + now.getTimezoneOffset() * 60000;\r\n    return new Date(utc + 7 * 3600000);\r\n}\r\n\r\n// Hàm định dạng ngày theo múi giờ Việt Nam\r\nexport function formatVietnamDate(dateObj) {\r\n    console.log(\"du lieu nhan duoc\", dateObj)\r\n    const day = String(dateObj.getDate()).padStart(2, '0');\r\n    const month = String(dateObj.getMonth() + 1).padStart(2, '0');\r\n    const year = dateObj.getFullYear();\r\n    return `${year}-${month}-${day}`;\r\n}\r\n\r\nexport function convertToISODate(dateStr) {\r\n    if (!/^\\d{2}-\\d{2}-\\d{4}$/.test(dateStr)) return '';\r\n    const [day, month, year] = dateStr.split('-');\r\n    return `${year}-${month}-${day}`;\r\n}\r\n  \r\n\r\nexport const convertToStandardDateFormat = (dateStr, timeStr) => {\r\n    // Tách ngày thành ngày, tháng, năm\r\n    const [day, month, year] = dateStr.split(\"/\");\r\n  \r\n    // Chuyển đổi thành định dạng yyyy-mm-dd\r\n    const formattedDate = `${day.padStart(2, \"0\")}-${month.padStart(2, \"0\")}-${year}`;\r\n  \r\n    let formattedDateTime\r\n    // Kết hợp ngày với giờ\r\n    if(timeStr) {\r\n        formattedDateTime = `${formattedDate} ${timeStr}`;\r\n    }else {\r\n        formattedDateTime = `${formattedDate}`;\r\n    }\r\n    \r\n  \r\n    return formattedDateTime;\r\n};\r\n\r\nexport const formatDateValue = (datetime) => {\r\n    if (!datetime) return \"\";\r\n    const [year, date, day] = datetime.split(\" \")[0].split(\"-\"); // Chia chuỗi theo dấu \"-\"\r\n\r\n    return day + \"-\" + date + \"-\" + year; // Định dạng lại thành d-m-Y\r\n  };\r\n\r\n  // Lấy giờ định dạng hh:mm\r\nexport const formatTimeValue = (datetime) => {\r\n    if (!datetime) return \"\";\r\n    const [, time] = datetime.split(\" \");\r\n    return time?.substring(0, 5) || \"\";\r\n  };\r\n  \r\n","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./History.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { fetchHistory } from \"../../../api\";\r\n\r\nimport flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nimport { formatDateValue, formatTimeValue } from \"../../dateUtils\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction HistoryRoom() {\r\n  const [history, setHistory] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5;\r\n\r\n  useEffect(() => {\r\n    const loadHistory = async () => {\r\n      const getHistory = await fetchHistory('all');\r\n      const sortedHistory = await getHistory.sort((a, b) => new Date(b.checkOutDate) - new Date(a.checkInDate));\r\n      setHistory(sortedHistory);\r\n    };\r\n\r\n    loadHistory();\r\n  }, []);\r\n  console.log(history)\r\n\r\n  // Tính toán dữ liệu cho mỗi trang\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = history.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n  // Chuyển sang trang kế tiếp\r\n  const nextPage = () => {\r\n    if (currentPage < totalPages()) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  // Chuyển sang trang trước\r\n  const prevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  // Tính tổng số trang\r\n  const totalPages = () => {\r\n    return Math.ceil(history.length / itemsPerPage);\r\n  };\r\n\r\n\r\n  const handleDeleteItem = async (idToDelete) => {\r\n    try {\r\n      // Gửi yêu cầu xóa đến backend\r\n      const response = await fetchHistory(idToDelete);\r\n\r\n      // Kiểm tra nếu xóa thành công (tùy vào response từ backend)\r\n      if (response.status === 200) {\r\n        // Xóa phần tử khỏi state history\r\n        const updatedHistory = history.filter(item => item._id !== idToDelete);\r\n        setHistory(updatedHistory);\r\n      } else {\r\n        console.error(\"Không thể xóa lịch sử, vui lòng thử lại.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi xóa lịch sử:\", error);\r\n    }\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n      flatpickr(`#startTime`, {\r\n        enableTime: true,\r\n        noCalendar: true,\r\n        dateFormat: \"H:i\",\r\n        time_24hr: true,\r\n        minuteIncrement: 60,\r\n  \r\n      });\r\n      flatpickr(`#endTime`, {\r\n        enableTime: true,\r\n        noCalendar: true,\r\n        dateFormat: \"H:i\",\r\n        time_24hr: true,\r\n        minuteIncrement: 60,\r\n      });\r\n  \r\n  \r\n      flatpickr(`#startDate`, {\r\n        dateFormat: \"d-m-Y\", // <-- Định dạng ngày/tháng/năm đúng\r\n        maxDate: \"today\",     // Chặn các ngày sau ngày hiện tại\r\n      });\r\n  \r\n      flatpickr(`#endDate`, {\r\n        dateFormat: \"d-m-Y\", // <-- Định dạng ngày/tháng/năm đúng\r\n      });\r\n  \r\n    }, []);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1 className={cx(\"title-table\")}>Lịch Sử Thuê Phòng</h1>\r\n      \r\n      <table className={cx(\"history-table\")}>\r\n        <thead>\r\n          <tr>\r\n            <th>Số Phòng</th>\r\n            <th>Ngày Vào</th>\r\n            <th>Ngày Ra</th>\r\n            <th>Tổng Tiền</th>\r\n            <th>Ghi Chú</th>\r\n            <th>Hành Động</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className={cx(\"data\")}>\r\n          {currentItems && currentItems.length > 0 ? (\r\n            currentItems.map((item, index) => (\r\n              <tr key={index}>\r\n                <td>{item.roomNumber}</td>\r\n                <td>\r\n                  Ngày {formatDateValue(item.checkInDate)} {formatTimeValue(item.checkInDate).split(\":\")[0]} giờ {formatTimeValue(item.checkInDate).split(\":\")[1]} phút\r\n                </td>\r\n\r\n                <td>\r\n                  Ngày {formatDateValue(item.checkOutDate)} {formatTimeValue(item.checkOutDate).split(\":\")[0]} giờ {formatTimeValue(item.checkOutDate).split(\":\")[1]} phút\r\n                </td>\r\n                <td>{item.totalAmount}</td>\r\n                <td dangerouslySetInnerHTML={{ __html: item.description }} />\r\n                <td><button onClick={() => handleDeleteItem(item._id)}>Xóa</button></td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"6\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                Không có bảng nào được ghi\r\n              </td>\r\n            </tr>\r\n          )}\r\n\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Pagination Controls */}\r\n      <div className={cx(\"pagination\")}>\r\n        <div className={cx(\"notification\")}><span>Trang {currentPage} of {totalPages()}</span></div>\r\n        <div className={cx(\"controls\")}>\r\n          <button onClick={prevPage} disabled={currentPage === 1}>\r\n            Trang trước\r\n          </button>\r\n          <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n            Trang sau\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HistoryRoom;\r\n","// src/context/ModalContext.js\r\nimport { createContext, useState, useContext } from \"react\";\r\n\r\nconst ModalContext = createContext();\r\n\r\nexport const ModalProvider = ({ children }) => {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [modalContent, setModalContent] = useState(null);\r\n\r\n  const openModal = (content) => {\r\n    setModalContent(content);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setShowModal(false);\r\n    setModalContent(null);\r\n  };\r\n\r\n  return (\r\n    <ModalContext.Provider value={{ showModal, modalContent, openModal, closeModal }}>\r\n      {children}\r\n    </ModalContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useModal = () => useContext(ModalContext);\r\n","import React, { useState } from \"react\";\r\nimport styles from \"./AddRoom.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { addRoom } from \"api\";\r\n\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction AddRoom() {\r\n\r\n  const [data, setData] = useState({\r\n    roomNumber: \"\",\r\n    dailyprice: \"\",\r\n    firstHour: \"\",\r\n    extraHour: \"\"\r\n  });\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleAddRoom = async (event) => {\r\n    \r\n  \r\n    const { roomNumber, dailyprice, firstHour, extraHour } = data;\r\n  \r\n    if (!roomNumber || !dailyprice || !firstHour || !extraHour) {\r\n      setMessage(\"Vui lòng nhập đầy đủ thông tin!\");\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const response = await addRoom(data);\r\n      if (response) {\r\n        setMessage(\"Thêm phòng thành công!\");\r\n        // Reset form nếu cần\r\n        // setData({ roomNumber: '', dailyprice: '', firstHour: '', extraHour: '', ... });\r\n      }\r\n    } catch (error) {\r\n      console.error(error); // log ra để dễ debug\r\n      setMessage(error.message || \"Có lỗi xảy ra khi thêm phòng!\");\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className={cx(\"container\")}>\r\n      <h2 className={cx(\"title\")}>Thêm Phòng Mới</h2>\r\n      <form className={cx(\"form\")} id=\"roomForm\">\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Số phòng:</label>\r\n          <input value={data.roomNumber || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, roomNumber: e.target.value }))\r\n          } type=\"number\" id=\"roomNumber\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giá phòng ngày:</label>\r\n          <input value={data.dailyprice || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, dailyprice: e.target.value }))\r\n          } type=\"number\" id=\"daily\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giờ đầu tiên:</label>\r\n          <input value={data.firstHour || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, firstHour: e.target.value }))\r\n          } type=\"number\" id=\"firstHour\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giá thêm giờ:</label>\r\n          <input value={data.extraHour || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, extraHour: e.target.value }))\r\n          } type=\"number\" id=\"extraHour\" required className={cx(\"input\")} />\r\n        </div>\r\n        <button type=\"button\" onClick={() => handleAddRoom()} className={cx(\"button\")}>Thêm Phòng</button>\r\n      </form>\r\n      <p id=\"message\" className={cx(\"message\")}>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddRoom;","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./ListRoomDetail.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { fetchRoomsList } from \"../../../api\";\r\nimport { editRoom } from \"api\";\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport AddRoom from \"../AddRoom/AddRoom\";\r\nimport HistoryRoom from \"../History/HistoryRoom\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListRoomDetail() {\r\n\r\n  const {openModal} = useModal();\r\n\r\n  const [ListRoom, setListroom] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5;\r\n\r\n  useEffect(() => {\r\n    const loadHistory = async () => {\r\n      const getRooms = await fetchRoomsList();\r\n      const sortedRooms = getRooms.sort((a, b) => a.roomNumber - b.roomNumber);\r\n      setListroom(sortedRooms);\r\n    };\r\n\r\n    loadHistory();\r\n  }, []);\r\n  \r\n\r\n  // Tính toán dữ liệu cho mỗi trang\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = ListRoom.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n  // Chuyển sang trang kế tiếp\r\n  const nextPage = () => {\r\n    if (currentPage < totalPages()) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  // Chuyển sang trang trước\r\n  const prevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  // Tính tổng số trang\r\n  const totalPages = () => {\r\n    return Math.ceil(ListRoom.length / itemsPerPage);\r\n  };\r\n\r\n\r\n//   const handleDeleteItem = async (idToDelete) => {\r\n//     try {\r\n//       // Gửi yêu cầu xóa đến backend\r\n//       const response = await fetchHistory(idToDelete);\r\n\r\n//       // Kiểm tra nếu xóa thành công (tùy vào response từ backend)\r\n//       if (response.status === 200) {\r\n//         // Xóa phần tử khỏi state history\r\n//         const updatedHistory = history.filter(item => item._id !== idToDelete);\r\n//         setHistory(updatedHistory);\r\n//       } else {\r\n//         console.error(\"Không thể xóa lịch sử, vui lòng thử lại.\");\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Lỗi khi xóa lịch sử:\", error);\r\n//     }\r\n//   };\r\n\r\nconst handleEditRoom = async(roomID) => {\r\n    const response = await editRoom(roomID, {deleted: true});\r\n    if(response) {\r\n      window.location.reload();\r\n    }    \r\n  }\r\n\r\nconst handleOpenAddRoom = () => {\r\n    openModal(<AddRoom />);\r\n}\r\n\r\nconst handleHistoryRoom = () => {\r\n    openModal(<HistoryRoom />);\r\n}\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h1 className={cx(\"title-table\")}>Danh sách phòng cụ thể</h1>\r\n      <table className={cx(\"history-table\")}>\r\n      <button onClick={(e) => handleOpenAddRoom()} className={cx(\"add-room\")}>Thêm phòng</button>\r\n        <thead>\r\n          <tr>\r\n            <th>Số Phòng</th>\r\n            <th>Giá phòng</th>\r\n            <th>Lịch sử thuê</th>\r\n            <th>Hành động</th>\r\n            \r\n          </tr>\r\n        </thead>\r\n        <tbody className={cx(\"data\")}>\r\n          {currentItems && currentItems.length > 0 ? (\r\n            currentItems.map((item, index) => (\r\n              <tr key={index}>\r\n                <td>Phòng: {String(item.roomNumber).padStart(3, \"0\")}</td>\r\n                <td>\r\n                    <span>Giá phòng ngày: {item.daily.toLocaleString()} VNĐ</span>\r\n                    <span>Giá phòng giờ đầu: {item.firstHour.toLocaleString()} VNĐ</span>\r\n                    <span> Giá phòng giờ đầu: {item.extraHour.toLocaleString()} VNĐ</span>\r\n                    \r\n                   \r\n                </td>\r\n                <td><button onClick={(e) => handleHistoryRoom()}>Xem ngay</button></td>\r\n                <td><button onClick={(e) => handleEditRoom(item._id)}>Xóa</button></td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"6\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                Không có bảng nào được ghi\r\n              </td>\r\n            </tr>\r\n          )}\r\n\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Pagination Controls */}\r\n      <div className={cx(\"pagination\")}>\r\n        <div className={cx(\"notification\")}><span>Trang {currentPage} of {totalPages()}</span></div>\r\n        <div className={cx(\"controls\")}>\r\n          <button onClick={prevPage} disabled={currentPage === 1}>\r\n            Trang trước\r\n          </button>\r\n          <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n            Trang sau\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ListRoomDetail;\r\n","import React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport styles from './AddRoomMonth.module.scss';\r\nimport { addRoomV2 } from 'api';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport ListRoom from '../Room';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction AddRoomMonth() {\r\n  const [data, setData] = useState({});\r\n  const [deposit, setDeposit] = useState({}); \r\n  const [message, setMessage] = useState('');\r\n  const { openModal } = useModal();\r\n\r\n  const handleAddRoom = async () => {\r\n      console.log(data)\r\n      if(data.hovaten && data.SoPhong && data.GiaPhong && data.sinhhoatchung) {\r\n        try {\r\n            const response = await addRoomV2(data);\r\n            if(response) {\r\n                setData({});\r\n\r\n                setTimeout(() => {\r\n                  setMessage(\"\")\r\n                }, 3000)\r\n                setMessage(\"Thêm phòng thành công!\");\r\n            }\r\n        }catch (error) {\r\n            setMessage(error.message);\r\n        }\r\n      }\r\n      \r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleDeposit = (value) => {\r\n      const rawValue = value.replace(/\\./g, \"\");\r\n      const numberValue = parseInt(rawValue, 10) || 0;\r\n      return numberValue.toLocaleString();\r\n    };\r\n    \r\n    [\"GiaPhong\", \"sinhhoatchung\"].forEach((key) => {\r\n      if (data[key]) {\r\n        const formattedValue = handleDeposit(data[key]);\r\n        setDeposit((prev) => ({ ...prev, [key]: formattedValue }));\r\n      }\r\n    });    \r\n  }, [data])\r\n\r\n\r\n  const handleCloseBack = () => {\r\n    openModal(<ListRoom />);\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n        <div className={cx(\"container\")}>\r\n      <h2 className={cx(\"title\")}>Thêm Phòng Mới</h2>\r\n      <form className={cx(\"form\")} id=\"roomForm\">\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Họ và tên người thuê phòng</label>\r\n          <input value={data.hovaten || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, hovaten: e.target.value }))\r\n          } type=\"text\" id=\"hovaten\" required className={cx(\"input\")} />\r\n          \r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Số Phòng</label>\r\n          <input value={data.SoPhong || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, SoPhong: e.target.value }))\r\n          } type=\"number\" id=\"SoPhong\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n\r\n        \r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Giá phòng tháng</label>\r\n          <input value={data.GiaPhong || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, GiaPhong: e.target.value }))\r\n          } type=\"number\" id=\"GiaPhong\" required className={cx(\"input\")} />\r\n          <span>{deposit.GiaPhong || ''}</span>\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Phí sinh hoạt:</label>\r\n          <input value={data.sinhhoatchung || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, sinhhoatchung: e.target.value }))\r\n          } type=\"number\" id=\"sinhhoatchung\" required className={cx(\"input\")} />\r\n          <span>{deposit.sinhhoatchung || ''}</span>\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số điện cũ</label>\r\n          <input value={data.chisodiencu || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisodiencu: e.target.value }))\r\n          } type=\"number\" id=\"chisodien\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước nóng cũ</label>\r\n          <input value={data.chisonuocnongcu || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuocnongcu: e.target.value }))\r\n          } type=\"number\" id=\"chisonuocnongcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước lạnh cũ</label>\r\n          <input value={data.chisonuoclanhcu || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuoclanhcu: e.target.value }))\r\n          } type=\"number\" id=\"chisonuoclanhcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước nóng mới</label>\r\n          <input value={data.chisonuocnongmoi || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuocnongmoi: e.target.value }))\r\n          } type=\"number\" id=\"chisonuoclanhcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"formGroup\")}>\r\n          <label className={cx(\"label\")}>Chỉ số nước lạnh mới</label>\r\n          <input value={data.chisonuoclanhmoi || ''} onChange={(e) =>\r\n            setData((prev) => ({ ...prev, chisonuoclanhmoi: e.target.value }))\r\n          } type=\"number\" id=\"chisonuoclanhcu\" required className={cx(\"input\")} />\r\n        </div>\r\n\r\n        <div className={cx(\"control\")}>\r\n        <button type=\"button\" onClick={() => handleCloseBack()} className={cx(\"button\")}>Quay lại</button>\r\n        <button type=\"button\" onClick={() => handleAddRoom()} className={cx(\"button\")}>Thêm Phòng</button>\r\n        </div>\r\n      </form>\r\n      <p id=\"message\" className={cx(\"message\")}>{message}</p>\r\n    </div>\r\n    </>\r\n  );\r\n}   \r\n\r\n\r\nexport default AddRoomMonth;","import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./AdjustRoom.module.scss\";\r\nimport { GetUpdateRoom } from \"api\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport ListRoom from \"RoomMonth/Room\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction AdjustRoomMonth({ props }) {\r\n  const [data, setData] = useState({});\r\n  const [deposit, setDeposit] = useState({});\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const { openModal } = useModal();\r\n\r\n  const handleUpdateRoom = async () => {\r\n    try {\r\n      const response = await GetUpdateRoom(props._id,data);\r\n      if (response) {\r\n        setTimeout(() => {\r\n          setMessage(\"\");\r\n        }, 3000);\r\n        setMessage(\"Cập nhật phòng thành công!\");\r\n      } else {\r\n        setMessage(\"Thêm phòng thất bại!\");\r\n      }\r\n    } catch (error) {\r\n      setMessage(error.message);\r\n    }\r\n  };\r\n\r\n  const handleDeposit = (value) => {\r\n    const rawValue = value.replace(/\\./g, \"\");\r\n    const numberValue = parseInt(rawValue, 10) || 0;\r\n    return numberValue.toLocaleString();\r\n  };\r\n  useEffect(() => {\r\n    // Cập nhật `data`\r\n    setData({\r\n      hovaten: props.hovaten,\r\n      GiaPhong: props.GiaPhong,\r\n      chisodiencu: props.chisodiencu,\r\n      chisodienmoi: props.chisodienmoi,\r\n      chisonuoclanhcu: props.chisonuoclanhcu,\r\n      chisonuoclanhmoi: props.chisonuoclanhmoi,\r\n      chisonuocnongcu: props.chisonuocnongcu,\r\n      chisonuocnongmoi: props.chisonuocnongmoi,\r\n      sinhhoatchung: props.sinhhoatchung,\r\n      ghichu: props.ghichu,\r\n    });\r\n  }, [props]);\r\n\r\n  useEffect(() => {\r\n    // Chạy lại khi `data` thay đổi\r\n    [\"GiaPhong\", \"sinhhoatchung\"].forEach((key) => {\r\n      if (data[key]) {\r\n        const formattedValue = handleDeposit(data[key]);\r\n        setDeposit((prev) => ({ ...prev, [key]: formattedValue }));\r\n      }\r\n    });\r\n  }, [props]); // Theo dõi sự thay đổi của `data`\r\n\r\n\r\n  const handleBackAgian = () => {\r\n    return openModal(<ListRoom />);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={cx(\"container\")}>\r\n        <h2 className={cx(\"title\")}>Cập nhật phòng - {props.SoPhong}</h2>\r\n        <form className={cx(\"form\")} id=\"roomForm\">\r\n          {/* Nhóm thông tin số phòng và giá phòng */}\r\n          <div className={cx(\"formGroup\")}>\r\n          <div className={cx(\"inputGroup\")}>\r\n                    <label className={cx(\"label\")}>Họ và tên</label>\r\n                    <input\r\n                      value={data.hovaten || ''}\r\n                      onChange={(e) =>\r\n                        setData((prev) => ({\r\n                          ...prev,\r\n                          hovaten: e.target.value,\r\n                        }))\r\n                      }\r\n                      type=\"text\"\r\n                      id=\"hovaten\"\r\n                      required\r\n                      className={cx(\"input\")}\r\n                    />\r\n                    <span>{deposit.sinhhoatchung || \"\"}</span>\r\n                  </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Số Phòng</label>\r\n              <input\r\n                value={props.SoPhong}\r\n                \r\n                type=\"number\"\r\n                id=\"SoPhong\"\r\n                disabled\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            \r\n          </div>\r\n\r\n          {/* Nhóm thông tin sinh hoạt chung */}\r\n          <div className={cx(\"formGroup\")}>\r\n          <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Giá phòng tháng</label>\r\n              <input\r\n                value={data.GiaPhong || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({ ...prev, GiaPhong: e.target.value }))\r\n                }\r\n                type=\"number\"\r\n                id=\"GiaPhong\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n              <span>{deposit.GiaPhong || \"\"}</span>\r\n            </div>\r\n                \r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Phí sinh hoạt</label>\r\n              <input\r\n                value={data.sinhhoatchung || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    sinhhoatchung: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"sinhhoatchung\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n              <span>{deposit.sinhhoatchung || \"\"}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Nhóm chỉ số điện và nước */}\r\n          <div className={cx(\"formGroup\")}>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số điện cũ</label>\r\n              <input\r\n                value={data.chisodiencu || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({ ...prev, chisodiencu: e.target.value }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số điện mới</label>\r\n              <input\r\n                value={data.chisodienmoi || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({ ...prev, chisodienmoi: e.target.value }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Nhóm chỉ số nước nóng và nước lạnh */}\r\n          <div className={cx(\"formGroup\")}>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước nóng cũ</label>\r\n              <input\r\n                value={data.chisonuocnongcu || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuocnongcu: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước nóng mới</label>\r\n              <input\r\n                value={data.chisonuocnongmoi || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuocnongmoi: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisodien\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Nhóm chỉ số nước lạnh cũ và mới */}\r\n          <div className={cx(\"formGroup\")}>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước lạnh cũ</label>\r\n              <input\r\n                value={data.chisonuoclanhcu || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuoclanhcu: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisonuoclanh\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n            <div className={cx(\"inputGroup\")}>\r\n              <label className={cx(\"label\")}>Chỉ số nước lạnh mới</label>\r\n              <input\r\n                value={data.chisonuoclanhmoi || ''}\r\n                onChange={(e) =>\r\n                  setData((prev) => ({\r\n                    ...prev,\r\n                    chisonuoclanhmoi: e.target.value,\r\n                  }))\r\n                }\r\n                type=\"number\"\r\n                id=\"chisonuoclanh\"\r\n                required\r\n                className={cx(\"input\")}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className={cx(\"control\")}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleBackAgian()}\r\n              className={cx(\"button\")}\r\n            >\r\n              Quay lại\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleUpdateRoom()}\r\n              className={cx(\"button\")}\r\n            >\r\n              Cập Nhật\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <p id=\"message\" className={cx(\"message\")}>\r\n          {message}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AdjustRoomMonth;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './PaymentInfo.module.scss';\r\nimport classNames from 'classnames/bind';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction TotalPaymentInfo({ props }) {\r\n  const [data, setData] = useState({});\r\n\r\n  useEffect(() => {\r\n    let totalRoom = 0;\r\nlet totalElectric = 0;\r\nlet totalWater = 0;\r\nlet totalElectricUsed = 0;\r\nlet totalWaterUsed = 0;\r\nlet roomCount = [];\r\n\r\nconst filteredRooms = props.filter((item) => item.GiaPhong > 0);\r\n\r\nfilteredRooms.forEach((item) => {\r\n  const electricUsed = item.chisodienmoi - item.chisodiencu;\r\n  const waterUsed = (item.chisonuoclanhmoi + item.chisonuocnongmoi) - \r\n                    (item.chisonuoclanhcu + item.chisonuocnongcu);\r\n\r\n  const hasElectric = electricUsed > 0;\r\n  const hasWater = waterUsed > 0;\r\n\r\n  // Chỉ tính phòng nếu có điện hoặc nước tiêu thụ\r\n  if (hasElectric || hasWater) {\r\n    totalRoom += item.GiaPhong;\r\n    roomCount.push(item.SoPhong);\r\n\r\n    if (hasElectric) {\r\n      totalElectric += electricUsed;\r\n      totalElectricUsed += electricUsed * 4000;\r\n    }\r\n\r\n    if (hasWater) {\r\n      totalWater += waterUsed;\r\n      totalWaterUsed += waterUsed * 20000;\r\n    }\r\n  }\r\n});\r\n\r\nsetData({\r\n  totalRoom: totalRoom.toLocaleString(),\r\n  totalElectric: totalElectric > 0 ? totalElectric : undefined,\r\n  totalWater: totalWater > 0 ? totalWater : undefined,\r\n  totalElectricUsed: totalElectricUsed > 0 ? totalElectricUsed.toLocaleString() : undefined,\r\n  totalWaterUsed: totalWaterUsed > 0 ? totalWaterUsed.toLocaleString() : undefined,\r\n  roomCount: roomCount.length ? roomCount.join(', ') : 'Không có phòng nào phù hợp'\r\n});\r\n\r\n    \r\n}, [props]); // nên thêm dependency là props nếu nó có thể thay đổi\r\n\r\n  return (\r\n   <div className={cx(\"container\")}>\r\n        <div className={cx(\"result\")}>\r\n            <div className={cx(\"result-item\")}>Tổng tiền Phòng: {data.totalRoom} đồng</div>\r\n            <div className={cx(\"result-item\")}>Tổng tiền Điện: {data.totalElectricUsed} đồng</div>\r\n            <div className={cx(\"result-item\")}>Tổng tiền Nước: {data.totalWaterUsed} đồng</div>\r\n            <div className={cx(\"result-item\")}>Tổng lượng điện sử dụng trong tháng: {data.totalElectric} kWh</div>\r\n            <div className={cx(\"result-item\")}>Tổng lượng nước sử dụng trong tháng: {data.totalWater} m3</div>\r\n            <div className={cx(\"result-item\")}>Các phòng đã tính: {data.roomCount}</div>\r\n            <div className={cx(\"result-item\")}><button className={cx(\"button\")}>Quay lại</button></div>\r\n\r\n        </div>\r\n   </div>\r\n  );\r\n}\r\n\r\nexport default TotalPaymentInfo;","import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./PaymentInfo.module.scss\";\r\nimport classNames from \"classnames/bind\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport ListRoom from \"../Room\";\r\nimport TotalPaymentInfo from \"./TotalPaymentInfo\";\r\nimport { GetUpdateRoom } from \"api\";\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction PayMentInfo({ props }) {\r\n  const { openModal } = useModal();\r\n  const {data, setData} = useState({})\r\n\r\n  const HandleRefresh = async () => {\r\n    const confirmRefresh = window.confirm(\r\n      \"Khi làm mới hóa đơn, số liệu nước mới và điện mới sẽ được chuyển thành số liệu cũ. Bạn có chắc chắn muốn làm mới hóa đơn không?\"\r\n    );\r\n    if (!confirmRefresh) {\r\n      alert(\"Đã hủy thao tác làm mới hóa đơn\");\r\n      return;\r\n    }\r\n  \r\n    const password = prompt(\"Nhập mật khẩu để làm mới hóa đơn\");\r\n    if (password !== \"0786566176\") {\r\n      alert(\"Mật khẩu không đúng, không thể làm mới hóa đơn\");\r\n      return;\r\n    }\r\n  \r\n    let position = 0;\r\n    \r\n    // Dùng for...of để xử lý async tuần tự\r\n    for (const item of props) {\r\n      position++;\r\n  \r\n      const object = {\r\n        hovaten: item.hovaten,\r\n        GiaPhong: item.GiaPhong,\r\n        chisodiencu: item.chisodienmoi, // mới -> cũ\r\n        chisodienmoi: 0,                 // reset mới\r\n        chisonuoclanhcu: item.chisonuoclanhmoi,\r\n        chisonuoclanhmoi: 0,\r\n        chisonuocnongcu: item.chisonuocnongmoi,\r\n        chisonuocnongmoi: 0,\r\n        sinhhoatchung: item.sinhhoatchung,\r\n        ghichu: item.ghichu,\r\n      };\r\n  \r\n      const response = await GetUpdateRoom(item._id, object);\r\n  \r\n      if (response && position >= props.length) {\r\n        openModal(<ListRoom />);\r\n      }\r\n    }\r\n  };\r\n  \r\n\r\n  const handleBack = () => {\r\n    openModal(<ListRoom />);\r\n  };\r\n\r\n  const Total = () => {\r\n    const data = props\r\n    openModal(<TotalPaymentInfo props={data} />);\r\n\r\n  }\r\n\r\n  return (\r\n    <div className={cx(\"invoice-container\")}>\r\n    <h2 className={cx(\"invoice-title\")}>Danh sách hóa đơn thanh toán</h2>\r\n  \r\n    <div className={cx(\"invoice-summary\")}>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={() => Total()} className={cx(\"btn-summary\", \"btn-total\")}>\r\n          Tổng kết\r\n        </button>\r\n      </div>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={() => HandleRefresh()} className={cx(\"btn-summary\", \"btn-refresh\")}>\r\n          Làm mới\r\n        </button>\r\n      </div>\r\n      <div className={cx(\"summary-item\")}>\r\n        <button onClick={handleBack} className={cx(\"btn-summary\", \"btn-back\")}>\r\n          Quay lại\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  \r\n\r\n      <div className={cx(\"invoice-list\")}>\r\n        {props.map((item) => {\r\n          const dientieuthu = item.chisodienmoi - item.chisodiencu;\r\n          const nuoctieuthu =\r\n            item.chisonuoclanhmoi -\r\n            item.chisonuoclanhcu +\r\n            item.chisonuocnongmoi -\r\n            item.chisonuocnongcu;\r\n          const coastNuoc = nuoctieuthu > 0 ? nuoctieuthu * 20000 : 0;\r\n          const coastDien = dientieuthu > 0 ? dientieuthu * 4000 : 0;\r\n          const total =\r\n            coastNuoc + coastDien + item.sinhhoatchung + item.GiaPhong;\r\n          return (\r\n            <div className={cx(\"invoice-card\")}>\r\n              <h3 className={cx(\"customer-name\")}>\r\n                {item.hovaten} - {item.SoPhong}\r\n              </h3>\r\n              <div className={cx(\"invoice-info\")}>\r\n                <span className={cx(\"divider\")}>-----------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Điện mới: {item.chisodienmoi} kWh\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Điện cũ: {item.chisodiencu} kWh\r\n                  </div>\r\n                  \r\n                </div>\r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước lạnh mới: {item.chisonuoclanhmoi} m³\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước lạnh cũ: {item.chisonuoclanhcu} m³\r\n                  </div>\r\n                </div>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước nóng mới: {item.chisonuocnongmoi} m³\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước nóng cũ: {item.chisonuocnongcu} m³\r\n                  </div>\r\n                </div>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                <div className={cx(\"info-line\")}>\r\n                    Tổng nước mới: {item.chisonuoclanhmoi + item.chisonuocnongmoi} m³\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Tổng nước cũ: {item.chisonuoclanhcu + item.chisonuocnongcu} m³\r\n                  </div>\r\n                  \r\n                </div>\r\n              \r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                 <div className={cx(\"info-line\")}>\r\n                    Giá phòng: {item.GiaPhong.toLocaleString()}đ\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Phí Sinh hoạt: {item.sinhhoatchung.toLocaleString()}đ\r\n                  </div>\r\n                </div>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Điện tiêu thụ: {dientieuthu >= 0 ? dientieuthu : 0} kWh\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Nước tiêu thụ: {nuoctieuthu >= 0 ? nuoctieuthu : 0} m³\r\n                  </div>\r\n                </div>\r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <div className={cx(\"invoice-info-item\")}>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Tiền điện: {coastDien.toLocaleString()}đ<br></br>Giá điện: {\" \"}\r\n                    {dientieuthu >= 0 ? `${dientieuthu} x 4.000đ` : '0'}đ\r\n                  </div>\r\n                  <div className={cx(\"info-line\")}>\r\n                    Tiền nước: {coastNuoc.toLocaleString()}đ<br></br>Giá\r\n                    nước: {nuoctieuthu >= 0 ? `${nuoctieuthu} x 20.000đ` : '0'}đ\r\n                  </div>\r\n                </div>\r\n                <span className={cx(\"divider\")}>--------------------------------------------------</span>\r\n                <span className={cx(\"total-amount\")}>Tổng thanh toán: {total.toLocaleString()}</span>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PayMentInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { GetAllRoomsMonth, GetUpdateRoom, deleteRoomV2 } from \"api\";\r\nimport { useModal } from \"component/Modal/ModalContext\";\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./Room.module.scss\";\r\nimport AddRoomMonth from \"./AddRoomMonth/AddRoomMonth\";\r\nimport { FaTrash, FaEdit } from \"react-icons/fa\";\r\nimport AdjustRoomMonth from \"./AdjustRoom/AdjustRoom\";\r\nimport PayMentInfo from \"./PaymentInfo/PaymentInfo\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListRoom() {\r\n  const [ListRoom, setListRoom] = useState([]);\r\n  const { openModal } = useModal();\r\n  const getListRoom = async () => {\r\n    const response = await GetAllRoomsMonth();\r\n    if (response) {\r\n      setListRoom(response.data);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getListRoom();\r\n  }, []);\r\n\r\n  const HandleAdjustRoom = async (id, key) => {\r\n    const input = prompt(`Vui lòng nhập chỉ số`);\r\n\r\n    if (input) {\r\n      let value;\r\n\r\n      if (input.includes(\"+\")) {\r\n        const parts = input.split(\"+\");\r\n        const base = parseFloat(parts[0]) || 0;\r\n        const plus = parseFloat(parts[1]) || 0;\r\n        value = base + plus;\r\n      } else {\r\n        value = parseFloat(input);\r\n      }\r\n\r\n      if (!isNaN(value)) {\r\n        const object = { [key]: value };\r\n        const response = await GetUpdateRoom(id, object);\r\n        if (response) {\r\n          getListRoom();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleOpenAddRoom = () => {\r\n    openModal(<AddRoomMonth list={ListRoom} />);\r\n  };\r\n\r\n  const handleDeleteRoom = async (id) => {\r\n    const password = prompt(\"Bạn hãy nhập mật khẩu để xóa phòng?\");\r\n    if (password !== \"0786566176\") {\r\n      alert(\"Mật khẩu không đúng!\");\r\n      return;\r\n    }\r\n\r\n    const response = await deleteRoomV2(id);\r\n    if (response) {\r\n      alert(\"Xóa phòng thành công!\");\r\n      getListRoom();\r\n    }\r\n  };\r\n\r\n  const handlePaymentInfo = () => {\r\n    // const filterCoastRoom = ListRoom.filter((item) => item.GiaPhong !== 0);\r\n\r\n    // const isValid = filterCoastRoom.every(\r\n    //   (item) => item.chisodienmoi !== 0 && item.chisonuoclanhmoi !== 0\r\n    // );\r\n    // if (!isValid) {\r\n    //   alert(\r\n    //     \"Để tạo hóa đơn, hãy tạo mới chỉ số điện nước của tất cả các phòng\"\r\n    //   );\r\n    //   return;\r\n    // }\r\n\r\n    openModal(<PayMentInfo props={ListRoom}/>);\r\n  };\r\n\r\n\r\n  const handleOpenAjust = (item) => {\r\n    openModal(<AdjustRoomMonth props={item} />);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className={cx(\"search\")}>\r\n          <button\r\n            onClick={(e) => handleOpenAddRoom()}\r\n            className={cx(\"search-button\")}\r\n          >\r\n            Thêm phòng\r\n          </button>\r\n          <button\r\n            onClick={(e) => handlePaymentInfo()}\r\n            className={cx(\"search-button\")}\r\n          >\r\n            Tạo Hóa Đơn\r\n          </button>\r\n        </div>\r\n        <table className={cx(\"water-table-history-table\")}>\r\n          <thead>\r\n            <tr>\r\n              <th>STT</th>\r\n              <th>Số Phòng</th>\r\n              <th>Giá Phòng</th>\r\n              <th>Chỉ số tiêu thụ điện</th>\r\n              <th>Chỉ số tiêu thụ nước</th>\r\n              <th>Sinh hoạt</th>\r\n              <th>Trạng thái</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className={cx(\"water-table-data\")}>\r\n            {ListRoom.length > 0 ? (\r\n              ListRoom.map((item, index) => (\r\n                <tr key={index}>\r\n                  <td>{index + 1}</td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        {item.SoPhong}\r\n                        <a\r\n                          onClick={() => HandleAdjustRoom(item._id, \"SoPhong\")}\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        {item.GiaPhong.toLocaleString()}Đ\r\n                        <a\r\n                          onClick={() => HandleAdjustRoom(item._id, \"GiaPhong\")}\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      \r\n                      <span>\r\n                        Điện mới: {item.chisodienmoi}\r\n                        <a\r\n                          onClick={() => HandleAdjustRoom(item._id, \"chisodienmoi\")}\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n\r\n                      <span>\r\n                        Nước nóng mới: {item.chisonuocnongmoi}   \r\n                        <a\r\n                          onClick={() =>\r\n                            HandleAdjustRoom(item._id, \"chisonuocnongmoi\")\r\n                          }\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >+</a>\r\n                      </span>\r\n\r\n                      <span>\r\n                        Nước lạnh mới: {item.chisonuoclanhmoi}   \r\n                        <a\r\n                          onClick={() =>\r\n                            HandleAdjustRoom(item._id, \"chisonuoclanhmoi\")\r\n                          }\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >+  </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        {item.sinhhoatchung.toLocaleString()}Đ\r\n                        <a\r\n                          onClick={() =>\r\n                            HandleAdjustRoom(item._id, \"sinhhoatchung\")\r\n                          }\r\n                          className={cx(\"plus-minus-button\")}\r\n                        >\r\n                          +\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className={cx(\"room-item\")}>\r\n                      <span>\r\n                        <a onClick={(e) => handleOpenAjust(item)} className={cx(\"plus-minus-button\", \"icon\")}>\r\n                          <FaEdit />\r\n                        </a>\r\n                        <a\r\n                          onClick={(e) => handleDeleteRoom(item._id)}\r\n                          className={cx(\"plus-minus-button\", \"icon\")}\r\n                        >\r\n                          <FaTrash />\r\n                        </a>\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td\r\n                  colSpan=\"7\"\r\n                  style={{\r\n                    textAlign: \"center\",\r\n                    padding: \"20px\",\r\n                    fontStyle: \"italic\",\r\n                  }}\r\n                >\r\n                  Không có bảng nào được ghi\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ListRoom;\r\n","\r\nimport React from 'react';\r\nimport styles from './Inventory.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport { useEffect, useState } from 'react';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport ListWater from './ListWater';\r\nimport { TestInventory,TestInventory2 } from 'api';\r\n\r\n\r\nconst cx = classNames.bind(styles)\r\n\r\nfunction Inventory() {\r\n\r\n    const [waterList, setWaterList] = useState([]);        // Dữ liệu hiển thị\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 40;\r\n    const {openModal} = useModal();\r\n\r\n    // Lấy danh sách nước\r\n    const getWaterList = async () => {\r\n        console.log(\"ham da duoc goi\")\r\n        try {\r\n            const data = await TestInventory();\r\n            if (data) {\r\n                console.log(data)\r\n                setWaterList(data);     // Hiển thị mặc định\r\n            }\r\n\r\n            return data\r\n        } catch (error) {\r\n            console.error(\"Lỗi khi lấy danh sách nước:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getWaterList();\r\n    }, []);\r\n\r\n    // Tính toán phân trang\r\n    const indexOfLastItem = currentPage * itemsPerPage;\r\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n    const currentItems = waterList.slice(indexOfFirstItem, indexOfLastItem);\r\n    \r\n\r\n    const nextPage = () => {\r\n        if (currentPage < totalPages()) {\r\n            setCurrentPage(currentPage + 1);\r\n        }\r\n    };\r\n\r\n    const prevPage = () => {\r\n        if (currentPage > 1) {\r\n            setCurrentPage(currentPage - 1);\r\n        }\r\n    };\r\n\r\n    const totalPages = () => {\r\n        return Math.ceil(waterList.length / itemsPerPage);\r\n    };\r\n\r\n\r\n    const HandleBack = () => {  \r\n        \r\n        openModal(<ListWater />); // Mở modal với nội dung là component ListWater\r\n    }\r\n\r\n    const resetWt = async() => { \r\n        const password = prompt(\"Để reset bạn cần nhập mật khẩu: \")\r\n        if(password !== \"0786566176\") return alert(\"Mật khẩu không đúng\")\r\n        const data = await TestInventory2();\r\n        if(data) {\r\n            openModal(<ListWater />); // Mở modal với nội dung là component ListWater\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className={cx(\"search\")}>\r\n\r\n                <button onClick={(e) => HandleBack()} className={cx(\"search-button\")}>Quay lại</button>\r\n                <button onClick={(e) => resetWt()} className={cx(\"search-button\", \"news\")}>Làm mới</button>\r\n            </div>\r\n            <table className={cx(\"water-table-history-table\")}>\r\n                <thead>\r\n                    <tr>\r\n                        <th>STT</th>\r\n                        <th>Loại Nước</th>\r\n                        <th>Số lượng đầu</th>\r\n                        <th>Số lượng bán</th>\r\n                        <th>Số lượng cuối</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className={cx(\"water-table-data\")}>\r\n                    {currentItems.length > 0 ? (\r\n                        currentItems.map((item, index) => (\r\n                            \r\n                            <tr key={index}>\r\n                                <td>{index + 1}</td>\r\n                                <td>Nước {item.tenNuoc}</td>\r\n                                <td><span>{item.soLuongDau}</span></td>\r\n                                <td><span>{item.ban}</span></td>\r\n                                <td><span>{item.thucTeCuoiKy}</span></td>\r\n                                \r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"8\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                                Không có bảng nào được ghi\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination Controls */}\r\n            <div className={cx(\"water-table-pagination\")}>\r\n                <div className={cx(\"water-table-notification\")}>\r\n                    <span>Trang {currentPage} of {totalPages()}</span>\r\n                </div>\r\n                <div className={cx(\"water-table-controls\")}>\r\n                    <button onClick={prevPage} disabled={currentPage === 1}>\r\n                        Trang trước\r\n                    </button>\r\n                    <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n                        Trang sau\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Inventory;","import React, { useEffect, useState } from 'react';\r\nimport styles from './ListWater.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport { fetchWaterList, updateWater } from 'api';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport Inventory from 'component/WaterManager/Inventory';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListWater() {\r\n    const { openModal } = useModal();\r\n    const [search, setSearch] = useState(\"\");\r\n    const [waterList, setWaterList] = useState([]);        // Dữ liệu hiển thị\r\n    const [originalList, setOriginalList] = useState([]);  // Dữ liệu gốc\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 40;\r\n\r\n    // Lấy danh sách nước\r\n    const getWaterList = async () => {\r\n        try {\r\n            const data = await fetchWaterList();\r\n            if (data) {\r\n                setOriginalList(data);  // Lưu bản gốc\r\n                setWaterList(data);     // Hiển thị mặc định\r\n            }\r\n\r\n            return data\r\n        } catch (error) {\r\n            console.error(\"Lỗi khi lấy danh sách nước:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getWaterList();\r\n    }, []);\r\n\r\n\r\n    const handleSearch = (e) => {   \r\n        if(search) {\r\n            const filtered = originalList.filter((item) => item.tenNuoc.toLowerCase().includes(search.toLowerCase()));\r\n            setWaterList(filtered); \r\n            return\r\n        }\r\n\r\n        setWaterList(originalList); // Nếu không có gì thì hiển thị lại danh sách gốc\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleSearch(search)\r\n    }, [search])\r\n\r\n  \r\n\r\n    // Tính toán phân trang\r\n    const indexOfLastItem = currentPage * itemsPerPage;\r\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n    const currentItems = waterList.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n    const nextPage = () => {\r\n        if (currentPage < totalPages()) {\r\n            setCurrentPage(currentPage + 1);\r\n        }\r\n    };\r\n\r\n    const prevPage = () => {\r\n        if (currentPage > 1) {\r\n            setCurrentPage(currentPage - 1);\r\n        }\r\n    };\r\n\r\n    const totalPages = () => {\r\n        return Math.ceil(waterList.length / itemsPerPage);\r\n    };\r\n\r\n    // Cập nhật số lượng nước khi bán\r\n    const handleAddWater = async (name, type) => { \r\n        const amount = prompt(\"Nhập số lượng nước đã bán?\\nNếu muốn trừ số lượng -(số lượng muốn trừ)\");\r\n        if (amount) {\r\n            let object\r\n            if(type == \"nhap\") {\r\n                object = {\r\n                    tenNuoc: name,    \r\n                    nhap: amount || 0,\r\n                };\r\n            }else if(type == \"ban\") {\r\n                object = {\r\n                    tenNuoc: name,    \r\n                    soLuong: amount || 0,    \r\n                };\r\n            }\r\n            const updated = await updateWater(object);\r\n            if (updated) {\r\n                const response = await getWaterList();  // Cập nhật lại danh sách\r\n                alert(\"Nạp dữ liệu thành công\")\r\n                \r\n                if (search) {\r\n                    // Tự động lọc lại khi có tìm kiếm\r\n                    const filtered = response.filter((item) =>\r\n                        item.tenNuoc.toLowerCase().includes(search.toLowerCase())\r\n                    );\r\n                    setWaterList(filtered);\r\n                }\r\n            }\r\n        }\r\n    };\r\n     \r\n    const handleInventory = () => {\r\n        openModal(<Inventory />)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={cx(\"search\")}>\r\n                <input \r\n                    value={search || \"\"} \r\n                    onChange={(e) => setSearch(e.target.value)} \r\n                    type=\"text\" \r\n                    placeholder=\"Tìm kiếm...\" \r\n                    className={cx(\"search-input\")} \r\n                />\r\n                <button onClick={(e) => handleInventory()} className={cx(\"search-button\")}>Kiểm hàng</button>\r\n            </div>\r\n            <table className={cx(\"water-table-history-table\")}>\r\n                <thead>\r\n                    <tr>\r\n                        <th>STT</th>\r\n                        <th>Loại Nước</th>\r\n                        <th>Số lượng đầu</th>\r\n                        <th>Số lượng nhập</th>\r\n                        <th>Số lượng bán</th>\r\n                        <th>Số lượng cuối</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className={cx(\"water-table-data\")}>\r\n                    {currentItems.length > 0 ? (\r\n                        currentItems.map((item, index) => (\r\n                            <tr key={index}>\r\n                                <td>{indexOfFirstItem + index + 1}</td>\r\n                                <td>{item.tenNuoc}</td>\r\n                                <td>{item.soLuongDau}</td>\r\n                                <td>{item.nhap}\r\n                                    <a\r\n                                        className={cx(\"plus-minus-button\")}\r\n                                        onClick={() => handleAddWater(item.tenNuoc, \"nhap\")}\r\n                                    >\r\n                                        +\r\n                                    </a>    \r\n                                </td>\r\n                                <td>\r\n                                    {item.ban}{\" \"}\r\n                                    <a\r\n                                        className={cx(\"plus-minus-button\")}\r\n                                        onClick={() => handleAddWater(item.tenNuoc, \"ban\")}\r\n                                    >\r\n                                        +\r\n                                    </a>\r\n                                </td>\r\n                                <td>{item.thucTeCuoiKy}</td>\r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"8\" style={{ textAlign: 'center', padding: '20px', fontStyle: 'italic' }}>\r\n                                Không có bảng nào được ghi\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination Controls */}\r\n            <div className={cx(\"water-table-pagination\")}>\r\n                <div className={cx(\"water-table-notification\")}>\r\n                    <span>Trang {currentPage} of {totalPages()}</span>\r\n                </div>\r\n                <div className={cx(\"water-table-controls\")}>\r\n                    <button onClick={prevPage} disabled={currentPage === 1}>\r\n                        Trang trước\r\n                    </button>\r\n                    <button onClick={nextPage} disabled={currentPage === totalPages()}>\r\n                        Trang sau\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListWater;\r\n","import React from 'react';\r\nimport styles from './Header.module.scss';\r\nimport classNames from 'classnames/bind';\r\nimport HistoryRoom from 'component/RoomDaily/History/HistoryRoom';\r\nimport ListRoomDetail from 'component/RoomDaily/ListRoomDetail/ListRoomDetail';\r\nimport ListRoom from 'RoomMonth/Room';\r\nimport { useModal } from 'component/Modal/ModalContext';\r\nimport ListWater from 'component/WaterManager/ListWater';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst Header = () => {\r\n    const { openModal } = useModal();\r\n    const handleOpenHistoryRoom = () => {\r\n        openModal(<HistoryRoom />);\r\n    }\r\n\r\n    const handleOpenListRoom = () => {  \r\n        openModal(<ListRoomDetail />);\r\n    }\r\n\r\n    const handleOpenWaterManager = () => {  \r\n        openModal(<ListWater />);\r\n    }\r\n\r\n\r\n    const handleOpenListRoomMonth = () => {  \r\n        openModal(<ListRoom />);\r\n    }\r\n    return (\r\n        <header className={cx('header')}>\r\n            <nav className={cx('header__nav')}>\r\n                <ul className={cx('header__menu')}>\r\n                    <li className={cx('header__item')}>\r\n                        <a href=\"/\" className={cx('header__link')}>Trang chủ</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenHistoryRoom()}  >Lịch sử</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenListRoom()}>Danh sách phòng ngày</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenListRoomMonth()}>Danh sách phòng tháng</a>\r\n                    </li>\r\n                    <li className={cx('header__item')}>\r\n                        <a className={cx('header__link')} onClick={() => handleOpenWaterManager()}>Quản lý nước</a>\r\n                    </li>\r\n                </ul>\r\n            </nav>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;","import { useRef } from \"react\";\r\n\r\nexport const useDebounceHandler = () => {\r\n  const debounceTimers = useRef({});\r\n\r\n\r\n  const debounce = (key, newVal, oldVal, callback, delay = 800) => {\r\n    console.log(\"hàm này hoạt động\")\r\n    if (newVal === oldVal) return;\r\n\r\n    if (debounceTimers.current[key]) {\r\n      clearTimeout(debounceTimers.current[key]);\r\n    }\r\n\r\n    debounceTimers.current[key] = setTimeout(() => {\r\n      callback();\r\n      delete debounceTimers.current[key];\r\n      console.log(\"da goi lai\")\r\n    }, delay);\r\n  };\r\n\r\n  return debounce;\r\n};\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./Room.module.scss\";\r\nimport { formatTimeValue, formatDateValue } from \"../dateUtils\";\r\nimport { useDebounceHandler } from \"../debounce\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst Room = ({ room, handleInputChange, setCurrentTime, calculate }) => {\r\n  const debounce = useDebounceHandler();\r\n  const [tempDates, setTempDates] = useState({});\r\n  const checkDateRef = useRef({});\r\n  const originalRef = useRef({});\r\n\r\n  // Hàm xử lý thay đổi input\r\n  const handleChange = (type, roomNumber, e) => {\r\n    const newValue = e.target.value;\r\n\r\n    // Lấy giá trị ban đầu từ ref hoặc tính toán từ room nếu chưa có giá trị\r\n    const originalValue = originalRef.current[`${type}-${roomNumber}`] ??\r\n      (type === \"date\" ? formatDateValue(room.checkInDate) : formatTimeValue(room.checkInDate));\r\n\r\n    // Cập nhật giá trị mới vào originalRef để theo dõi sự thay đổi\r\n    originalRef.current[`${type}-${roomNumber}`] = newValue;\r\n\r\n    // Cập nhật state (tempDates) với giá trị mới\r\n    setTempDates((prev) => ({\r\n      ...prev,\r\n      [`${type}-${roomNumber}`]: newValue,\r\n    }));\r\n\r\n    // Gọi debounce sau khi cập nhật state\r\n    debounce(\r\n      `${type}-${roomNumber}`,\r\n      newValue,\r\n      originalValue,\r\n      () => {\r\n        // Truyền đúng dữ liệu vào handleInputChange\r\n        handleInputChange(roomNumber, {\r\n          type,\r\n          value: newValue,\r\n          ...(type === \"checkTimeDate\"\r\n            ? {\r\n                date: tempDates[`checkInDate-${room.roomNumber}`] ?? formatDateValue(room.checkInDate),\r\n              }\r\n            : {\r\n                time: tempDates[`checkTimeDate-${room.roomNumber}`] ?? formatTimeValue(room.checkInDate),\r\n              }),\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  // Hàm khởi tạo flatpickr\r\n  const initFlatpickr = () => {\r\n    if (!checkDateRef.current[room.roomNumber]) return;\r\n\r\n    const refs = checkDateRef.current[room.roomNumber];\r\n\r\n    flatpickr(refs.checkindate, {\r\n      dateFormat: \"d-m-Y\",\r\n     \r\n      onChange: () => handleChange(\"checkInDate\", room.roomNumber, { target: { value: refs.checkindate.value } }), // Gọi handleChange khi chọn ngày\r\n    });\r\n\r\n    flatpickr(refs.checkoutdate, {\r\n      dateFormat: \"d-m-Y\",\r\n      onChange: () => handleChange(\"checkOutDate\", room.roomNumber, { target: { value: refs.checkoutdate.value } }), // Gọi handleChange khi chọn ngày\r\n    });\r\n\r\n    flatpickr(refs.checkintime, {\r\n      enableTime: true,\r\n      noCalendar: true,\r\n      dateFormat: \"H:i\",\r\n      time_24hr: true,\r\n      minuteIncrement: 60,\r\n      onChange: () => handleChange(\"checkTimeDate\", room.roomNumber, { target: { value: refs.checkintime.value } }), // Gọi handleChange khi chọn thời gian\r\n    });\r\n\r\n    flatpickr(refs.checkouttime, {\r\n      enableTime: true,\r\n      noCalendar: true,\r\n      dateFormat: \"H:i\",\r\n      time_24hr: true,\r\n      minuteIncrement: 60,\r\n      \r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    initFlatpickr();\r\n  }, [room.roomNumber]);\r\n\r\n  // Hàm để gán ref cho các input\r\n  const setRef = (el, key) => {\r\n    if (!checkDateRef.current[room.roomNumber]) {\r\n      checkDateRef.current[room.roomNumber] = {};\r\n    }\r\n    if (el) {\r\n      checkDateRef.current[room.roomNumber][key] = el;\r\n    }\r\n  };\r\n\r\n  // Hàm tính tiền\r\n  const handleCalculate = () => {\r\n    calculate(room.roomNumber, checkDateRef);\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"room\")}>\r\n      <h3>Phòng {String(room.roomNumber).padStart(3, \"0\")}</h3>\r\n\r\n      {/* Check-in */}\r\n      <div className={cx(\"time-container\")}>\r\n        <input\r\n          ref={(el) => setRef(el, \"checkindate\")}\r\n          type=\"text\"\r\n          id={`checkin-date-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n          value={tempDates[`checkInDate-${room.roomNumber}`] ?? formatDateValue(room.checkInDate)}\r\n          onChange={(e) => handleChange(\"checkInDate\", room.roomNumber, e)}\r\n        />\r\n        <input\r\n          ref={(el) => setRef(el, \"checkintime\")}\r\n          type=\"text\"\r\n          id={`checkin-time-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n          value={tempDates[`checkTimeDate-${room.roomNumber}`] ?? formatTimeValue(room.checkInDate)}\r\n          onChange={(e) => handleChange(\"checkTimeDate\", room.roomNumber, e)}\r\n        />\r\n      </div>\r\n\r\n      {/* Check-out */}\r\n      <div className={cx(\"time-container\")}>\r\n        <input\r\n          ref={(el) => setRef(el, \"checkoutdate\")}\r\n          type=\"text\"\r\n          id={`checkout-date-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n          \r\n          \r\n        />\r\n        <input\r\n          ref={(el) => setRef(el, \"checkouttime\")}\r\n          type=\"text\"\r\n          id={`checkout-time-${room.roomNumber}`}\r\n          className={cx(\"time-picker\")}\r\n         \r\n         \r\n        />\r\n      </div>\r\n\r\n      {/* Buttons */}\r\n      <div className={cx(\"btn-container\")}>\r\n        <div className={cx(\"btn-top\")}>\r\n          <button className={cx(\"check-in\")} onClick={() => setCurrentTime(\"checkin\", room.roomNumber, checkDateRef)}>\r\n            Nhận phòng\r\n          </button>\r\n          <button className={cx(\"check-out\")} onClick={() => setCurrentTime(\"checkout\", room.roomNumber, checkDateRef)}>\r\n            Trả phòng\r\n          </button>\r\n        </div>\r\n        <div className={cx(\"btn-bottom\")}>\r\n          <button className={cx(\"btn-calculate\")} onClick={handleCalculate}>\r\n            Tính tiền\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Room from \"./Room\";\r\nimport {\r\n  fetchRoomsList,\r\n  editRoom,\r\n  saveRoomHistory,\r\n  deleteRoomData,\r\n} from \"../../api\"; // Giả sử hàm này sẽ fetch dữ liệu từ API\r\nimport classNames from \"classnames/bind\";\r\nimport styles from \"./Room.module.scss\";\r\nimport { convertToStandardDateFormat, convertToISODate } from \"../dateUtils\";\r\nimport { useModal } from \"../Modal/ModalContext\";\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst RoomList = () => {\r\n  const [rooms, setRooms] = useState([]);\r\n  const depositRef = useRef(null);\r\n  const deposit2Ref = useRef(null);\r\n\r\n  const { openModal, closeModal } = useModal();\r\n\r\n  useEffect(() => {\r\n    const loadRooms = async () => {\r\n      const fetchedRooms = await fetchRoomsList();\r\n      const sortedRooms = fetchedRooms.sort(\r\n        (a, b) => a.roomNumber - b.roomNumber\r\n      );\r\n      setRooms(sortedRooms);\r\n    };\r\n\r\n    loadRooms();\r\n  }, []);\r\n\r\n  const handleInputChange = async (roomNumber, data) => {\r\n    let date;\r\n    if (data.type === \"checkTimeDate\") {\r\n      date = data.date + \" \" + data.value;\r\n    } else {\r\n      date = data.value + \" \" + data.time;\r\n    }\r\n    await editRoom(String(roomNumber), { checkInDate: date });\r\n  };\r\n\r\n  const setCurrentTime = async (type, roomNumber, ref) => {\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleDateString(\"vi-VN\"); // \"24/04/2025\"\r\n    const hours = String(now.getHours()).padStart(2, \"0\");\r\n    const minutes = String(now.getMinutes()).padStart(2, \"0\");\r\n    const timeStr = `${hours}:${minutes}`;\r\n\r\n    const dateStrBK = convertToStandardDateFormat(dateStr, timeStr); // GIỮ NGUYÊN LOGIC\r\n\r\n    if (type === \"checkin\") {\r\n      const checkinDateInput = ref.current[roomNumber][\"checkindate\"];\r\n      const checkinTimeInput = ref.current[roomNumber][\"checkintime\"];\r\n\r\n      if (checkinDateInput && checkinDateInput._flatpickr) {\r\n        checkinDateInput.value = dateStr; // Hiển thị trực tiếp\r\n        checkinDateInput._flatpickr.setDate(dateStr, true, \"d-m-Y\");\r\n      }\r\n\r\n      if (checkinTimeInput && checkinTimeInput._flatpickr) {\r\n        checkinTimeInput.value = timeStr;\r\n        checkinTimeInput._flatpickr.setDate(timeStr, true, \"H:i\");\r\n      }\r\n\r\n      const response = await editRoom(String(roomNumber), {\r\n        checkInDate: dateStrBK,\r\n      });\r\n      if (response) return window.location.reload();\r\n    } else {\r\n      const checkoutDateInput = ref.current[roomNumber][\"checkoutdate\"];\r\n      const checkoutTimeInput = ref.current[roomNumber][\"checkouttime\"];\r\n\r\n      if (checkoutDateInput && checkoutDateInput._flatpickr) {\r\n        checkoutDateInput.value = dateStr;\r\n        checkoutDateInput._flatpickr.setDate(dateStr, true, \"d-m-Y\");\r\n      }\r\n\r\n      if (checkoutTimeInput && checkoutTimeInput._flatpickr) {\r\n        checkoutTimeInput.value = timeStr;\r\n        checkoutTimeInput._flatpickr.setDate(timeStr, true, \"H:i\");\r\n      }\r\n\r\n     \r\n    }\r\n  };\r\n\r\n  const calculate = (roomNumber, data) => {\r\n    const ref = data;\r\n    const checkInDate = convertToISODate(\r\n      ref.current[roomNumber][\"checkindate\"].value\r\n    );\r\n    const checkInTime = ref.current[roomNumber][\"checkintime\"].value;\r\n    const checkOutDate = convertToISODate(\r\n      ref.current[roomNumber][\"checkoutdate\"].value\r\n    );\r\n    const checkOutTime = ref.current[roomNumber][\"checkouttime\"].value;\r\n\r\n    if (!checkInDate || !checkInTime || !checkOutDate || !checkOutTime) {\r\n      return openModal(\r\n        <p style={{ textAlign: \"center\" }}>Vui lòng nhập đầy đủ thời gian.</p>\r\n      );\r\n    }\r\n\r\n    const start = new Date(`${checkInDate}T${checkInTime}`);\r\n    const end = new Date(`${checkOutDate}T${checkOutTime}`);\r\n\r\n    if (end <= start) {\r\n      return openModal(\r\n        <p style={{ textAlign: \"center\" }}>\r\n          Thời gian trả phòng cần được thiết lập muộn hơn thời gian nhận phòng\r\n          để đảm bảo hợp lệ.\r\n        </p>\r\n      );\r\n    }\r\n\r\n    let total = 0;\r\n    const notes = [];\r\n    const diffMs = end - start;\r\n    const diffMinutes = Math.ceil(diffMs / 60000);\r\n    const diffHours = Math.ceil(diffMs / 3600000);\r\n    const startHour = start.getHours();\r\n    const endHour = end.getHours();\r\n    const isSameDay = start.toDateString() === end.toDateString();\r\n    const isNightStay =\r\n      startHour >= 19 &&\r\n      startHour <= 23 &&\r\n      endHour >= 0 &&\r\n      endHour <= 2 &&\r\n      diffHours <= 9;\r\n\r\n    const dataRoom = rooms.find((room) => room.roomNumber === roomNumber);\r\n\r\n    // Danh sách ngày lễ\r\n    const holidays = {\r\n      \"01-01\": \"Tết Dương Lịch\",\r\n      \"30-04\": \"Giải phóng miền Nam\",\r\n      \"01-05\": \"Quốc tế Lao động\",\r\n      \"02-09\": \"Quốc khánh\",\r\n    };\r\n\r\n    // Hàm đếm ngày lễ\r\n    function getHolidayDays(start, end) {\r\n      const holidayCounts = {};\r\n      const current = new Date(start);\r\n      current.setHours(0, 0, 0, 0);\r\n      const endDate = new Date(end);\r\n      endDate.setHours(0, 0, 0, 0);\r\n\r\n      while (current <= endDate) {\r\n        const currentStr = current\r\n          .toLocaleDateString(\"vi-VN\", { day: \"2-digit\", month: \"2-digit\" })\r\n          .replace(/\\//g, \"-\");\r\n        if (holidays[currentStr]) {\r\n          holidayCounts[holidays[currentStr]] =\r\n            (holidayCounts[holidays[currentStr]] || 0) + 1;\r\n        }\r\n        current.setDate(current.getDate() + 1);\r\n      }\r\n      return holidayCounts;\r\n    }\r\n\r\n    // ----- Tính giá -----\r\n    let surcharge = 0;\r\n    let holidaySurcharge = 0;\r\n\r\n    if (isSameDay || isNightStay) {\r\n      // Thuê theo giờ\r\n      total = dataRoom.firstHour;\r\n      notes.push(`Giờ đầu: ${dataRoom.firstHour.toLocaleString()} VNĐ`);\r\n\r\n      const extraMinutes = diffMinutes - 60;\r\n      const extraHoursCharged =\r\n        extraMinutes > 0 ? Math.floor((extraMinutes + 45) / 60) : 0;\r\n\r\n      if (extraHoursCharged > 0) {\r\n        let temp = new Date(start);\r\n        temp.setMinutes(temp.getMinutes() + 60); // Bỏ 1 giờ đầu\r\n\r\n        let totalExtraHourSurcharge = 0;\r\n        let holidayHours = 0;\r\n\r\n        for (let i = 0; i < extraHoursCharged; i++) {\r\n          const currentStr = temp\r\n            .toLocaleDateString(\"vi-VN\", { day: \"2-digit\", month: \"2-digit\" })\r\n            .replace(/\\//g, \"-\");\r\n          const isHoliday = holidays[currentStr];\r\n          const hourPrice = dataRoom.extraHour + (isHoliday ? 10000 : 0);\r\n          totalExtraHourSurcharge += hourPrice;\r\n          if (isHoliday) holidayHours++;\r\n          temp.setHours(temp.getHours() + 1);\r\n        }\r\n\r\n        notes.push(\r\n          `Phụ thu: ${extraHoursCharged} giờ x ${dataRoom.extraHour.toLocaleString()} VNĐ ${\r\n            holidayHours > 0 ? `(Ngày lễ: ${holidayHours} giờ)` : \"\"\r\n          } = ${totalExtraHourSurcharge.toLocaleString()} VNĐ`\r\n        );\r\n        total += totalExtraHourSurcharge;\r\n      }\r\n    } else {\r\n      // Thuê qua đêm\r\n      if (startHour >= 5 && startHour <= 12) {\r\n        const surchargeHours = 12 - startHour;\r\n        if (surchargeHours > 0) {\r\n          surcharge += surchargeHours * dataRoom.extraHour;\r\n          notes.push(\r\n            `Phụ thu nhận phòng sớm: ${surchargeHours} giờ x ${dataRoom.extraHour.toLocaleString()} VNĐ`\r\n          );\r\n        }\r\n      }\r\n\r\n      const firstDayEnd = new Date(start);\r\n      firstDayEnd.setDate(firstDayEnd.getDate() + 1);\r\n      firstDayEnd.setHours(12, 0, 0, 0);\r\n\r\n      if (end <= firstDayEnd) {\r\n        total = dataRoom.daily;\r\n        notes.push(`Tính 1 ngày: ${dataRoom.daily.toLocaleString()} VNĐ`);\r\n      } else {\r\n        const lastNoon = new Date(end);\r\n        lastNoon.setHours(12, 0, 0, 0);\r\n        const fullDays = Math.round((lastNoon - firstDayEnd) / 86400000) + 1;\r\n        total = fullDays * dataRoom.daily;\r\n        notes.push(`${fullDays} ngày x ${dataRoom.daily.toLocaleString()} VNĐ`);\r\n      }\r\n\r\n      if (endHour >= 12) {\r\n        const extraHours = endHour - 12;\r\n        if (extraHours > 0) {\r\n          surcharge += extraHours * dataRoom.extraHour;\r\n          notes.push(\r\n            `Phụ thu trả phòng muộn: ${extraHours} giờ x ${dataRoom.extraHour.toLocaleString()} VNĐ`\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    let holidayHours = 0;\r\n    // -------- Tính phụ thu lễ --------\r\n    if (!isSameDay) {\r\n      const holidayCounts = getHolidayDays(start, end);\r\n      for (const name in holidayCounts) {\r\n        holidaySurcharge += holidayCounts[name] * 100000;\r\n        notes.push(`Qua đêm ngày lễ ${name}: +100,000 VNĐ`);\r\n      }\r\n\r\n      if (endHour >= 12) {\r\n        const extraHours = endHour - 12;\r\n        if (extraHours > 0) {\r\n          const temp = new Date(start);\r\n          while (temp <= end) {\r\n            const currentStr = temp\r\n              .toLocaleDateString(\"vi-VN\", { day: \"2-digit\", month: \"2-digit\" })\r\n              .replace(/\\//g, \"-\");\r\n            if (holidays[currentStr]) {\r\n              holidayHours = extraHours;\r\n              holidaySurcharge += extraHours * 10000;\r\n              break; // chỉ cần 1 lần gặp ngày lễ là cộng\r\n            }\r\n            temp.setHours(temp.getHours() + 1);\r\n          }\r\n        }\r\n      }\r\n    } \r\n\r\n    // Ghi chú tổng số giờ phụ thu lễ\r\n    if (holidayHours > 0) {\r\n      notes.push(\r\n        `Phụ thu ${holidayHours} giờ lễ x 10,000 VNĐ = ${(\r\n          holidayHours * 10000\r\n        ).toLocaleString()} VNĐ`\r\n      );\r\n    }\r\n\r\n    // 3. Ghi chú tổng phụ thu lễ\r\n    if (holidaySurcharge > 0) {\r\n      notes.push(`Tổng phụ thu lễ: +${holidaySurcharge.toLocaleString()} VNĐ`);\r\n    }\r\n\r\n    // ----------------- Kết thúc -----------------\r\n    total += surcharge + holidaySurcharge;\r\n\r\n    // Ghi chú thời gian ở thực\r\n    notes.push(\r\n      `Thời gian ở thực: ${\r\n        diffMinutes >= 1440\r\n          ? `${Math.floor(diffMinutes / 1440)} ngày${\r\n              diffMinutes % 1440\r\n                ? ` ${Math.floor((diffMinutes % 1440) / 60)} giờ ${\r\n                    diffMinutes % 60\r\n                  } phút`\r\n                : \"\"\r\n            }`\r\n          : `${Math.floor(diffMinutes / 60)} giờ ${diffMinutes % 60} phút`\r\n      }`\r\n    );\r\n\r\n    const objectDatatoSaveHistory = {\r\n      totalAmount: total.toLocaleString(),\r\n      checkInDate: start.toLocaleString(),\r\n      checkOutDate: end.toLocaleString(),\r\n      description: notes.map((note) => `<span>${note}</span>`).join(\"\"),\r\n    };\r\n\r\n    const HandleSaveDatatoHistory = async () => {\r\n      ref.current[roomNumber][\"checkindate\"].value = \"\";\r\n      ref.current[roomNumber][\"checkintime\"].value = \"\";\r\n      ref.current[roomNumber][\"checkoutdate\"].value = \"\";\r\n      ref.current[roomNumber][\"checkouttime\"].value = \"\";\r\n      deleteRoomData(roomNumber);\r\n      await saveRoomHistory(roomNumber, objectDatatoSaveHistory);\r\n      closeModal();\r\n    };\r\n\r\n    const handleDeposit = () => {\r\n      console.log(depositRef);\r\n      const rawValue = depositRef.current.value.replace(/\\./g, \"\");\r\n      const numberValue = parseInt(rawValue, 10) || 0;\r\n      const formatted = numberValue.toLocaleString();\r\n      depositRef.current.value = formatted;\r\n      deposit2Ref.current.innerText =\r\n        (numberValue - total).toLocaleString() < 0\r\n          ? 0\r\n          : (numberValue - total).toLocaleString();\r\n    };\r\n    openModal(\r\n      <div className={cx(\"calculate\")}>\r\n        <h3 className={cx(\"calculate-header\")}>Chi tiết tính tiền</h3>\r\n        <p className={cx(\"room-info\")}>\r\n          <span className={cx(\"title\")}>Phòng:</span> <span>{roomNumber}</span>\r\n        </p>\r\n        <p className={cx(\"check-in-time\")}>\r\n          <span className={cx(\"title\")}>Nhận phòng:</span>{\" \"}\r\n          <span>{start.toLocaleString()}</span>\r\n        </p>\r\n        <p className={cx(\"check-out-time\")}>\r\n          <span className={cx(\"title\")}>Trả phòng:</span>{\" \"}\r\n          <span>{end.toLocaleString()}</span>\r\n        </p>\r\n        {notes.map((note, i) => (\r\n          <p className={cx(\"additional-note\")} key={i}>\r\n            <span>{note}</span>\r\n          </p>\r\n        ))}\r\n        <p className={cx(\"total-amount\")}>\r\n          <span>Tổng tiền:</span> <span>{total.toLocaleString()} VNĐ</span>\r\n        </p>\r\n        <p className={cx(\"total-amount\")}>\r\n          <span>Khách đưa:</span>{\" \"}\r\n          <input\r\n            ref={depositRef}\r\n            type=\"text\"\r\n            onChange={(e) => handleDeposit(e.target.value)}\r\n            placeholder=\"Nhập số tiền khách hàng\"\r\n          />\r\n          <span>\r\n            Thối lại khách: <b ref={deposit2Ref}>0</b>\r\n          </span>\r\n        </p>\r\n        <div className={cx(\"control\")}>\r\n          <button\r\n            className={cx(\"button\")}\r\n            onClick={() => HandleSaveDatatoHistory()}\r\n          >\r\n            Lưu dữ liệu\r\n          </button>\r\n          <button className={cx(\"button\")} onClick={() => closeModal()}>\r\n            Tạm tính\r\n          </button>\r\n        </div>\r\n        <div className={cx(\"footer-note\")}>\r\n          <span>Phần mềm được tạo bởi Hữu Đức</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div id={cx(\"room\")}>\r\n      {rooms && rooms.length > 0 ? (\r\n        rooms.map((room) => (\r\n          <Room\r\n            key={room.roomNumber}\r\n            room={room}\r\n            handleInputChange={handleInputChange}\r\n            setCurrentTime={setCurrentTime}\r\n            calculate={calculate}\r\n          />\r\n        ))\r\n      ) : (\r\n        <span>Hiện tại chưa có phòng nào được thêm vào dữ liệu</span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomList;\r\n","import { useModal } from \"./ModalContext\";\r\nimport styles from './modal.module.scss'; // Đảm bảo SCSS của bạn được import ở đây\r\nimport classNames from 'classnames/bind';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\n\r\nconst GlobalModal = () => {\r\n  const { showModal, closeModal, modalContent } = useModal();\r\n\r\n  if (!showModal) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={cx(\"overlay\")}></div>\r\n      <div className={cx(\"modal-wrapper\")}>\r\n        <div className={`${cx('modal-parent')}`}>\r\n          <div className={`${cx('modal-content')}`} onClick={(e) => e.stopPropagation()}>\r\n            <div onClick={closeModal} className={cx(\"modal-close\")}>x</div>\r\n            {modalContent}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GlobalModal;","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './App.module.scss';\nimport Header from './layout/Header';\nimport RoomList from './component/RoomDaily/RoomList';\nimport { ModalProvider } from './component/Modal/ModalContext';\nimport GlobalModal from './component/Modal/GlobalModal.js';\n\n\nconst cx = classNames.bind(styles);\n\nfunction App() {\n  return (\n\n    <ModalProvider>\n      <div className={cx('App')}>\n        <Header />\n        <RoomList />\n        <GlobalModal />\n       \n      </div>\n    </ModalProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}